{"version":3,"sources":["components/general/nav-bar/_reuse/logo.png","components/general/nav-bar/_reuse/post.png","resources/icons/imageUpload.png","components/general/nav-bar/_reuse/burger.png","styles/icons/login-logo-blk.png","styles/assets/calling.gif","services/socket.js","components/reusables/DeletePostPopUp.js","components/reusables/PostCardItem.js","components/general/Home.js","redux/actions/loginsAction.js","components/register-login/Login.js","components/general/nav-bar/_reuse/NavComponents.js","redux/actions/searchAction.js","components/general/nav-bar/AppBar.js","components/general/nav-bar/Navbar.js","components/register-login/Register.js","components/reusables/Card.js","components/search/Search.js","components/chat-box/grid-components/chats/chat-search/ChatSearch.js","components/chat-box/grid-components/chats/no-chat/NoChats.js","components/chat-box/grid-components/chats/chat-item/ChatItem.js","components/chat-box/grid-components/chats/chat-list/ChatList.js","components/chat-box/grid-components/chats/new-chat/NewChat.js","components/chat-box/grid-components/chat-title/ChatTitle.js","components/reusables/MessageModal.js","components/chat-box/grid-components/message/Message.js","components/chat-box/grid-components/message/MessageList.js","components/chat-box/grid-components/chat-form/ChatForm.js","redux/actions/chatsAction.js","components/chat-box/container-main/ChatShell.js","redux/actions/selectedChatAction.js","redux/actions/friendsAction.js","components/general/Friends.js","components/reusables/CallAlertModal.js","components/video-call/VideoCall.js","redux/actions/callAction.js","components/general/InterCom.js","components/reusables/CallModal.js","components/socket-listeners/VideoListener.js","components/socket-listeners/MessageListener.js","components/reusables/PostModal.js","components/reusables/EmojiPopUp.js","redux/actions/postsAction.js","components/posts/PostCreate.js","components/posts/PostList.js","components/posts/PostManager.js","components/socket-listeners/PostListener.js","components/general/App.js","redux/reducers/loginReducer.js","redux/reducers/selectedChatReducer.js","redux/reducers/searchReducer.js","redux/reducers/chatReducer.js","redux/reducers/callReducer.js","redux/reducers/publicPostReducer.js","redux/store/configureStore.js","index.js"],"names":["module","exports","socket","io","DeletePostPopUp","props","anchorEl","handleClose","handleDeletePost","post","open","Boolean","id","undefined","Popover","onClose","anchorOrigin","vertical","horizontal","transformOrigin","onClick","postId","postType","publicPostId","_id","PostCardItem","userId","useState","openEdit","setOpenEdit","setAnchorEl","editPost","createdBy","e","currentTarget","deletePostPop","Avatar","src","profilePicUrl","username","moment","createdAt","format","FormControl","Select","disableUnderline","value","readOnly","displayEmpty","MenuItem","uploadPath","alt","isLiked","length","isDisliked","comments","connect","state","publicPosts","login","style","color","map","key","getToken","localStorage","getItem","startLogin","fd","redirect","axios","then","response","console","log","data","hasOwnProperty","alert","error","authToken","token","setItem","window","location","reload","catch","err","Login","email","password","show","handleChange","setState","target","name","handleShow","prevState","handleSubmit","preventDefault","formData","dispatch","history","push","className","require","onSubmit","this","htmlFor","type","onChange","placeholder","to","Component","NavBar","navMoveToEnd","children","NavItem","styleClassLi","styleClass","AppBar","toggleDrawer","handleLogout","useHistory","logo","burger","Drawer","anchor","Badge","badgeContent","PostIcon","user","change","searchUser","setSearchUser","removeItem","href","headers","getSearch","message","payload","startGetSearch","TextField","variant","InputProps","startAdornment","InputAdornment","position","notifications","registerSchema","object","shape","string","required","min","confirmPass","oneOf","ref","showPass","setShowPass","handleShowPass","initialValues","validationSchema","values","setSubmitting","regEnable","res","keyPattern","startRegister","isSubmitting","errors","touched","isValid","Box","marginBottom","FormGroup","label","as","helperText","endAdornment","IconButton","Button","disabled","Card","CardList","img","isFriend","sendByMe","status","handleRequest","handleAccept","handleReject","handleRemove","results","searchResult","resData","startCancelRequest","startSendRequest","handleAcceptRequest","startAcceptRequest","handleRejectRequest","startRejectRequest","handleRemoveFriend","startRemoveFriend","ChatSearch","NoChats","ChatItem","latestMsg","latestMsgDate","chat","isActive","onChatItemSelected","classNames","latestMsgObj","inbox","slice","sort","a","b","localeCompare","pop","info","fromNow","ChatList","chats","selectedChat","displayChat","filter","chatItems","chatIsActive","NewChat","ChatTitle","connectToId","chatTitleContents","useStyles","makeStyles","theme","modal","display","alignItems","justifyContent","paper","backgroundColor","palette","background","boxShadow","shadows","MessageModal","classes","React","setOpen","modalStatus","Modal","aria-labelledby","aria-describedby","handleModalStatus","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","timeout","Fade","in","Message","isMyMessage","imageUrl","imageAlt","msgClass","avatar","msgType","MessageList","messageItems","messagesEndRef","useRef","msg","useEffect","current","scrollIntoView","behavior","ChatForm","onMessageSubmitted","onFileUpload","setMessage","formContents","onDrop","file","FormData","append","getRootProps","getInputProps","setSendMsg","friends","selectedId","chatContent","storeSelectedId","getData","startSendMsg","startUploadFile","startCancelFriendRequest","startAcceptFriendRequest","startRejectFriendRequest","startFriendRemove","get","friend","CallModal","view","callState","call","userVideo","partnerVideo","getStreamRef","callEnd","callEngaged","viewCall","setViewCall","stream","setStream","callAccepted","setCallAccepted","callerSignal","setCallerSignal","caller","setCaller","offline","setOffline","offlineMsg","setOfflineMsg","signal","receiverId","match","params","query","queryString","parse","search","parseBooleans","ClientVideo","PartnerVideo","videoCssEle","isReceiving","callReceiving","navigator","mediaDevices","getUserMedia","video","audio","srcObject","receiving","from","getTracks","forEach","track","readyState","stop","emit","off","peer","Peer","initiator","trickle","serverEndCall","destroy","setTimeout","on","userToCall","signalData","callPeer","connectId","attend","acceptCall","playsInline","muted","autoPlay","controls","InterCom","pic","handleAttendCall","handleRejectCall","callerName","setCallerName","callerPic","setCallerPic","dataPack","setDataPack","setAttend","setQuery","inCallReceiving","videoSignalData","pack","saveSignal","callInitiator","path","connect_id","msgFromServer","PostModal","addPost","EmojiPopUp","handleAddEmoji","title","emoji","onSelect","addNewPost","AddPost","handleDrop","fileUp","pType","handleClearFileUpload","handlePassPostData","setPostType","postText","setPostText","lineHeight","setLineHeight","profileImg","URL","createObjectURL","height","scrollHeight","handleEmojiPopOpen","native","modalView","setModalView","setFile","setPost","handlePostModal","newPost","startCreateNewPost","posts","put","retPost","startDeletePost","PostManager","publicPostFromServer","friendPostFromServer","exact","component","Home","Register","Search","Friends","ChatShell","VideoCall","initialStateLogin","loginReducer","action","Object","assign","deleteRequest","rejectRequest","removeFriend","newPostArray","concat","notification","selectedChatReducer","initialSearchResult","searchReducer","initialChatState","chatReducer","initialCallState","inCall","callReducer","initialPostsState","postReducer","configureStore","createStore","combineReducers","publicPostReducer","applyMiddleware","thunk","store","getPosts","setAccount","subscribe","getState","jsx","ReactDOM","render","document","getElementById"],"mappings":"qFAAAA,EAAOC,QAAU,IAA0B,kC,kBCA3CD,EAAOC,QAAU,0oH,oBCAjBD,EAAOC,QAAU,IAA0B,yC,kBCA3CD,EAAOC,QAAU,8xJ,gJCAjBD,EAAOC,QAAU,IAA0B,4C,wcCA3CD,EAAOC,QAAU,IAA0B,qC,gKCO5BC,E,MAFAC,GADF,K,+JCCE,SAASC,EAAgBC,GAAQ,IAEtCC,EAAiDD,EAAjDC,SAAUC,EAAuCF,EAAvCE,YAAaC,EAA0BH,EAA1BG,iBAAkBC,EAAQJ,EAARI,KAE3CC,EAAOC,QAAQL,GACfM,EAAKF,EAAO,uBAAoBG,EAEtC,OACE,6BACE,kBAACC,EAAA,EAAD,CACEF,GAAIA,EACJF,KAAMA,EACNJ,SAAUA,EACVS,QAASR,EACTS,aAAc,CACZC,SAAU,SACVC,WAAY,QAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,UAGd,yBAAKN,GAAG,4BACN,6CACA,4BAAQQ,QACN,WACQ,IAAIC,EAAS,KAETA,EADiB,WAAlBZ,EAAKa,SACKb,EAAKc,aAELd,EAAKe,IAElBhB,EAAiBa,EAAOZ,EAAKa,UAC7Bf,MAER,kBAAC,IAAD,UC8CGkB,MAtEf,SAAsBpB,GAAQ,IAClBI,EAAmCJ,EAAnCI,KAAMiB,EAA6BrB,EAA7BqB,OAAQlB,EAAqBH,EAArBG,iBADG,EAEOmB,oBAAS,GAFhB,mBAElBC,EAFkB,KAERC,EAFQ,OAGOF,mBAAS,MAHhB,mBAGlBrB,EAHkB,KAGRwB,EAHQ,KAcrBC,EAAW,KAiBf,OAhBO,OAAJtB,QAAI,IAAJA,OAAA,EAAAA,EAAMuB,UAAUR,OAAQE,IACvBK,EACI,kBAAC,WAAD,KACI,4BAAQnB,GAAG,oBAAoBQ,QAPhB,WACvBS,GAAaD,KAMwD,kBAAC,IAAD,OAC7D,4BAAQhB,GAAG,sBAAsBQ,QAC7B,SAACa,IAfK,SAACA,GACnBH,EAAYG,EAAEC,eAcMC,CAAcF,KAAK,kBAAC,IAAD,OAC1B3B,GAAY,kBAAC,EAAD,CACLA,SAAUA,EACVG,KAAOA,EACPD,iBAAkBA,EAClBD,YAjBM,WAC1BuB,EAAY,WAuBZ,yBAAKlB,GAAG,0BACJ,yBAAKA,GAAG,sBACJ,kBAACwB,EAAA,EAAD,CAAQxB,GAAG,sBAAsByB,IAAK5B,EAAKuB,UAAUM,gBACrD,yBAAK1B,GAAG,yBACJ,4BAAKH,EAAKuB,UAAUO,UACpB,2BAAIC,IAAO/B,EAAKgC,WAAWC,OAAO,SAEtC,yBAAK9B,GAAG,wBACJ,kBAAC+B,EAAA,EAAD,CAAa/B,GAAG,wBACZ,kBAACgC,EAAA,EAAD,CACAC,kBAAkB,EAClBC,MAAOrC,EAAKa,SACZyB,UAAQ,EACRC,cAAY,GAER,kBAACC,EAAA,EAAD,CAAUrC,GAAG,uBAAuBkC,MAAO,WAAW,kBAAC,IAAD,OACtD,kBAACG,EAAA,EAAD,CAAUrC,GAAG,uBAAuBkC,MAAO,WAAW,kBAAC,IAAD,OACtD,kBAACG,EAAA,EAAD,CAAUrC,GAAG,uBAAuBkC,MAAO,UAAU,kBAAC,IAAD,SAG5Df,IAGT,6BACA,yBAAKnB,GAAG,qBACHH,EAAKyC,YAAc,yBAAKb,IAAK5B,EAAKyC,WAAYC,IAAK1C,EAAKe,MACzD,2BAAIf,EAAKA,OAEb,6BACA,yBAAKG,GAAG,uBACJ,gCAAS,kBAAC,IAAD,MAAS,8BAAOH,EAAK2C,QAAQC,SACtC,gCAAQ,kBAAC,IAAD,MAAY,8BAAO5C,EAAK6C,WAAWD,SAC3C,gCAAQ,kBAAC,IAAD,MAAsB,8BAAO5C,EAAK8C,SAASF,YCjEnE,IAOeG,eAPS,SAAAC,GACpB,MAAO,CACHC,YAAaD,EAAMC,YACnBhC,OAAQ+B,EAAME,MAAMnC,OAIbgC,EAnBf,SAAcnD,GAAQ,IACVqD,EAAwBrD,EAAxBqD,YAAahC,EAAWrB,EAAXqB,OACrB,OACI,6BACI,wBAAIkC,MAAO,CAACC,MAAO,UAAnB,4BADJ,OAEKH,QAFL,IAEKA,OAFL,EAEKA,EAAaI,KAAI,SAAArD,GACd,OAAO,kBAAC,EAAD,CAAcsD,IAAKtD,EAAKe,IAAKf,KAAMA,EAAMiB,OAAQA,W,8DCTlEsC,EAAWC,aAAaC,QAAQ,SAiCzBC,EAAa,SAACC,EAAIC,GAC7B,OAAO,WACLC,IACG7D,KAAK,eAAgB2D,GACrBG,MAAK,SAACC,GAEL,GADAC,QAAQC,IAAI,wBAAyBF,EAASG,MAC1CH,EAASG,KAAKC,eAAe,SAC/BC,MAAML,EAASG,KAAKG,WACf,CACL,IAAMC,EAAYP,EAASG,KAAKK,MAChCf,aAAagB,QAAQ,QAASF,GAC9BF,MAAM,oBACNR,IACAa,OAAOC,SAASC,aAGnBC,OAAM,SAACC,GAAD,OAASb,QAAQC,IAAIY,QC7C5BC,G,mNACJ9B,MAAQ,CACN+B,MAAO,GACPC,SAAU,GACVC,MAAM,G,EAERC,aAAe,SAAC1D,GACd,EAAK2D,SAAL,eAAiB3D,EAAE4D,OAAOC,KAAO7D,EAAE4D,OAAO/C,S,EAE5CiD,WAAa,WACX,EAAKH,UAAS,SAACI,GAAD,MAAgB,CAC5BN,MAAOM,EAAUN,U,EAGrBO,aAAe,SAAChE,GACdA,EAAEiE,iBACF,IAFoB,EAKQ,EAAKzC,MAC3B0C,EAAW,CACfX,MAPkB,EAKZA,MAGNC,SARkB,EAKLA,UAKfhB,QAAQC,IAAIyB,GACZ,EAAK9F,MAAM+F,SAASjC,EAAWgC,GATd,WACf,OAAO,EAAK9F,MAAMgG,QAAQC,KAAK,U,uDAWjC,OACE,yBAAKC,UAAU,mBACb,yBAAKA,UAAU,cACb,yBAAKA,UAAW,iBAAkBlE,IAAKmE,EAAQ,KAA0CrD,IAAI,UAE/F,0BAAMoD,UAAU,aAAaE,SAAUC,KAAKT,cAC1C,yBAAKM,UAAU,gBACb,2BAAOI,QAAQ,SAAf,SACA,2BACEC,KAAK,QACLd,KAAK,QACLlF,GAAG,QACHkC,MAAO4D,KAAKjD,MAAM+B,MAClBqB,SAAUH,KAAKf,aACfmB,YAAY,sBAIhB,yBAAKP,UAAU,gBACb,2BAAOI,QAAQ,YAAf,YACA,2BACEC,KAAMF,KAAKjD,MAAMiC,KAAO,OAAS,WACjCI,KAAK,WACLlF,GAAG,WACHkC,MAAO4D,KAAKjD,MAAMgC,SAClBoB,SAAUH,KAAKf,aACfmB,YAAY,cAIhB,yBAAKP,UAAU,oBACb,6BACE,2BACEK,KAAK,WACLd,KAAK,OACLlF,GAAG,OACHkC,MAAO4D,KAAKjD,MAAMiC,KAClBtE,QAASsF,KAAKX,aAEhB,2BAAOY,QAAQ,QAAf,kBAEF,kBAAC,IAAD,CAAMJ,UAAU,OAAOQ,GAAG,KAA1B,sBAKF,2BAAOR,UAAU,YAAYK,KAAK,SAAS9D,MAAM,YACjD,wDAEE,kBAAC,IAAD,CAAMyD,UAAU,OAAOQ,GAAG,mBAA1B,kB,GA7EQC,cAuFJxD,gBAAU+B,G,2BCzFnB,SAAS0B,EAAO5G,GACnB,IAAI6G,EAAe,GAInB,OAHIjD,aAAaC,QAAQ,WACrBgD,EAAe,gBAGf,yBAAKX,UAAU,UACX,wBAAIA,UAAS,qBAAgBW,IAA7B,IAA+C7G,EAAM8G,SAArD,MAKL,SAASC,EAAQ/G,GACpB,OACI,wBAAIkG,UAAS,mBAAclG,EAAMgH,eAC7B,kBAAC,IAAD,CAAMd,UAAS,oBAAelG,EAAMiH,YAAcP,GAAI1G,EAAM0G,GAAI3F,QAASf,EAAMe,SAAUf,EAAMyF,O,6BCjBrG9B,EAAWC,aAAaC,QAAQ,S,oDCsDvBqD,OAxCf,SAAgBlH,GAAQ,IAAD,EACOsB,oBAAS,GADhB,mBACZ8B,EADY,KACLmC,EADK,KAEb4B,EAAe,kBAAM,WACvB5B,GAAUnC,KAEPgE,EAAgBpH,EAAhBoH,aACDpB,EAAWqB,cACjB,OACI,yBAAKnB,UAAU,mBACX,6BACI,yBAAKlE,IAAKsF,IAAMxE,IAAI,UAAUoD,UAAU,cAAcnF,QAAS,WAC3DiF,EAAQC,KAAK,QAEjB,gCAAQ,yBAAKjE,IAAKuF,IAAQzE,IAAI,OAAOoD,UAAU,cAAcnF,QAASoG,OACtE,kBAACK,EAAA,EAAD,CAAQC,OAAQ,MAAOpH,KAAM+C,EAAO1C,QAASyG,KACzC,yBAAKjB,UAAU,iBACX,kBAACa,EAAD,CACAL,GAAG,uBACHO,WAAW,QACXD,aAAa,oBACbvB,KACQ,kBAACiC,EAAA,EAAD,CAAOC,aAAc,EAAGnE,MAAM,aAC1B,kBAAC,IAAD,OAGZzC,QAASoG,MAET,kBAACJ,EAAD,CAASL,GAAG,eAAejB,KAAM,yBAAKzD,IAAK4F,IAAU9E,IAAI,aAAcmE,WAAW,gBAAgBD,aAAa,WAAWjG,QAASoG,MACnI,kBAACJ,EAAD,CAASL,GAAG,iBAAiBjB,KAAM,kBAAC,IAAD,MAAmBuB,aAAa,WAAWjG,QAASoG,MACvF,kBAACJ,EAAD,CAASL,GAAG,cAAcjB,KAAM,kBAAC,IAAD,MAAeuB,aAAa,WAAWjG,QAASoG,MAChF,kBAACJ,EAAD,CAASL,GAAG,IAAIjB,KAAM,kBAAC,IAAD,MAAiBwB,WAAW,WAAWD,aAAa,WACtEjG,QAAWqG,SC8DvC,IAMejE,gBANS,SAACC,GACrB,MAAO,CACHyE,KAAMzE,EAAME,SAILH,EAxFf,SAAanD,GAET,IAAMgG,EAAUqB,cACVS,EAASlE,aAAaC,QAAQ,SAHpB,EAKmBvC,mBAAS,IAL5B,mBAKTyG,EALS,KAKEC,EALF,KAmBVZ,EAAe,WACjBpH,EAAM+F,ULaL,SAACA,GACNnC,aAAaqE,WAAW,SACxBlC,EALK,CAAEQ,KAAM,oBAMb1B,OAAOC,SAASoD,KAAO,QKVvB,OAHA9D,QAAQC,IAAI,UAAUyD,GACtB1D,QAAQC,IAAI,eAAerE,EAAM6H,MAG7B,yBAAK3B,UAAU,iBACV4B,EAEG,oCACA,yBAAK5B,UAAU,WACf,kBAACU,EAAD,KACI,yBAAK5E,IAAKsF,IAAMxE,IAAI,UAAUoD,UAAU,OAAOnF,QAAS,WAAOiF,EAAQC,KAAK,QAC5E,0BAAMC,UAAU,aAAaE,SAvBxB,SAACxE,GAClBA,EAAEiE,iBACF,IAAM9B,EAAK,CAAEgE,cACb/H,EAAM+F,SF7BgB,SAAChC,GAC3B,OAAM,SAACgC,GACH9B,IAAM7D,KAAK,gBAAgB2D,EAAG,CAC1BoE,QAAS,CACL,SAASxE,KAGZO,MAAK,SAACC,GACHC,QAAQC,IAAI,mBAAmBF,EAASG,MACxC,IAAM8D,EAAYjE,EAASG,KACxB8D,EAAU7D,eAAe,WACxBwB,EAdT,CAAEQ,KAAM,wBAeC/B,MAAM,GAAD,OAAI4D,EAAUC,WAEnBtC,EArBT,CAAEQ,KAAM,oBAAqB+B,QAqBKF,OAGhCpD,OAAM,SAACC,GAAD,OAASb,QAAQC,IAAIY,OEYjBsD,CAAexE,IAC9BK,QAAQC,IAAI,SAAS0D,GACrB/B,EAAQC,KAAK,mBAmBG,kBAACuC,EAAA,EAAD,CACItC,UAAU,eACVuC,QAAQ,WACRhC,YAAY,YACZD,SAjCH,SAAC5E,GAClBoG,EAAcpG,EAAE4D,OAAO/C,QAiCHA,MAAOsF,EACPW,WAAY,CACZC,eACI,kBAACC,EAAA,EAAD,CAAgBC,SAAS,SACrB,kBAAC,IAAD,WAMhB,kBAAC9B,EAAD,CACIL,GAAG,uBACHO,WAAW,QACXD,aAAa,WACbvB,KACQ,kBAACiC,EAAA,EAAD,CAAOC,aAAc3H,EAAM6H,KAAKiB,cAAc9F,OAAQQ,MAAM,aACxD,kBAAC,IAAD,SAIhB,kBAACuD,EAAD,CAASL,GAAG,eAAejB,KAAM,yBAAKzD,IAAK4F,IAAU9E,IAAI,aAAcmE,WAAW,kBAClF,kBAACF,EAAD,CAASL,GAAG,iBAAiBjB,KAAM,kBAAC,IAAD,QACnC,kBAACsB,EAAD,CAASL,GAAG,cAAcjB,KAAM,kBAAC,IAAD,QAChC,kBAACsB,EAAD,CAASL,GAAG,IAAIjB,KAAM,kBAAC,IAAD,MAAiBwB,WAAW,WAAWlG,QAAWqG,MAG5E,kBAAC,GAAD,CAAQrG,QAASqG,KAGjB,kBAACR,EAAD,KACI,yBAAK5E,IAAKsF,IAAMxE,IAAI,UAAUoD,UAAU,WAAWnF,QAAS,WAAOiF,EAAQC,KAAK,QAChF,kBAACc,EAAD,CAASL,GAAG,kBAAkBjB,KAAK,WAAWuB,aAAa,WAAWC,WAAW,kBACjF,kBAACF,EAAD,CAASL,GAAG,eAAejB,KAAK,UAAUuB,aAAa,UAAUC,WAAW,kBAIpF,6BAAK,6BACL,2BAAIjH,EAAM6H,KAAK1G,KAAO,8BAAOnB,EAAM6H,KAAK3F,SAAlB,MAA+BlC,EAAM6H,KAAK1C,Y,mECtFtE4D,I,OAAiBC,eAASC,MAAM,CACpC/G,SAAUgH,eAASC,WAAWC,IAAI,EAAG,wBACrCjE,MAAO+D,eAAS/D,QAAQgE,WACxB/D,SAAU8D,eAASC,WAAWC,IAAI,EAAG,wBACrCC,YAAaH,eAASI,MAAM,CAACC,aAAI,aAAc,0BAkIlCpG,sBA1Hf,SAAkBnD,GAAQ,IAAD,EACSsB,oBAAS,GADlB,mBAChBkI,EADgB,KACNC,EADM,KAEjBC,EAAiB,WACrBtF,QAAQC,IAAImF,EAAU,YACtBC,GAAaD,IAETxF,EAAW,WACfhE,EAAMgG,QAAQC,KAAK,iBAErB,OACE,yBAAKC,UAAU,kBACb,kBAAC,KAAD,CACEyD,cAAe,CACbzH,SAAU,GACVkD,SAAU,GACViE,YAAa,GACblE,MAAO,IAETyE,iBAAkBb,GAClB3C,SAAU,SAACyD,EAAD,GAAgC,IAArBC,EAAoB,EAApBA,cAIb/F,EAAE,gBACH8F,GAGL7J,EAAM+F,SNpDa,SAAChC,EAAIC,EAAU+F,GAC1C,OAAO,WACL9F,IACG7D,KADH,kBAC2B2D,GACxBG,MAAK,SAACC,GACLC,QAAQC,IAAI,kBAAmBF,EAASG,MACxC,IAAM0F,EAAM7F,EAASG,KAIjB0F,EAAIzF,eAAe,cACQ,IAAzByF,EAAIC,WAAW9E,OACjBX,MAAM,wBACNuF,MAEAvF,MAAM,2BACNuF,MAGFvF,MAAM,2BACNuF,IACA/F,QAGHgB,OAAM,SAACC,GAAD,OAASb,QAAQC,IAAI,cAAeY,OM4BxBiF,CAAcnG,EAAGC,GAPd,WAChB8F,GAAc,UASjB,gBAAGK,EAAH,EAAGA,aAAsBC,GAAzB,EAAiBP,OAAjB,EAAyBO,QAAQC,EAAjC,EAAiCA,QAASC,EAA1C,EAA0CA,QAA1C,OACC,kBAAC,WAAD,KACE,yBAAKpE,UAAU,iBACb,wCACA,kBAAC,KAAD,KACE,kBAACqE,GAAA,EAAD,CAAKC,aAAc,GACjB,kBAACC,GAAA,EAAD,KACE,kBAAC,KAAD,CACEhG,MAAO4F,EAAQnI,UAAY5B,QAAQ8J,EAAOlI,UAC1CqE,KAAK,OACLd,KAAK,WACLiF,MAAM,WACNjC,QAAQ,WACRkC,GAAInC,IACJoC,WAAYP,EAAQnI,UAAYkI,EAAOlI,aAI7C,kBAACqI,GAAA,EAAD,CAAKC,aAAc,GACjB,kBAACC,GAAA,EAAD,KACE,kBAAC,KAAD,CACEhG,MAAO4F,EAAQlF,OAAS7E,QAAQ8J,EAAOjF,OACvCyF,WAAYP,EAAQlF,OAASiF,EAAOjF,MACpCoB,KAAK,QACLd,KAAK,QACLiF,MAAM,QACNjC,QAAQ,WACRkC,GAAInC,QAIV,kBAAC+B,GAAA,EAAD,CAAKC,aAAc,GACjB,kBAACC,GAAA,EAAD,KACE,kBAAC,KAAD,CACEhG,MAAO4F,EAAQjF,UAAY9E,QAAQ8J,EAAOhF,UAC1CwF,WAAYP,EAAQjF,UAAYgF,EAAOhF,SACvCmB,KAAMiD,EAAW,OAAS,WAC1B/D,KAAK,WACLiF,MAAM,WACNjC,QAAQ,WACRkC,GAAInC,IACJE,WAAY,CACVmC,aACE,kBAACjC,EAAA,EAAD,CAAgBC,SAAS,OACvB,kBAACiC,GAAA,EAAD,CAAY/J,QAAS2I,EAAgBxD,UAAU,YAC5CsD,EACC,kBAAC,IAAD,MAEA,kBAAC,IAAD,aAShB,kBAACe,GAAA,EAAD,CAAKC,aAAc,GACjB,kBAACC,GAAA,EAAD,KACE,kBAAC,KAAD,CACEhG,MAAO4F,EAAQhB,aAAe/I,QAAQ8J,EAAOf,aAC7CuB,WAAYP,EAAQhB,aAAee,EAAOf,YAC1C9C,KAAK,WACLd,KAAK,cACLiF,MAAM,mBACNjC,QAAQ,WACRkC,GAAInC,QAIV,kBAACuC,GAAA,EAAD,CACEtC,QAAQ,YACRjF,MAAM,UACN+C,KAAK,SACLL,UAAU,eACV8E,SAAUb,IAAiBG,GAL7B,qB,OC9HT,SAASW,GAAKjL,GACjB,OACI,yBAAKkG,UAAU,QACX,wBAAIA,UAAU,aACTlG,EAAM8G,WAMhB,SAASoE,GAASlL,GAAQ,IAEzBmL,EACAnL,EADAmL,IAAIjJ,EACJlC,EADIkC,SAASf,EACbnB,EADamB,IAAIiK,EACjBpL,EADiBoL,SAASC,EAC1BrL,EAD0BqL,SAASC,EACnCtL,EADmCsL,OAAQC,EAC3CvL,EAD2CuL,cAAeC,EAC1DxL,EAD0DwL,aAAcC,EACxEzL,EADwEyL,aAAaC,EACrF1L,EADqF0L,aAEzF,OACI,yBAAKxF,UAAU,kBACX,yBAAKA,UAAU,SAASlE,IAAKmJ,EAAKrI,IAAKZ,IACvC,wBAAIgE,UAAU,aAAalG,EAAMkC,UAE7BkJ,EACA,kBAAC,WAAD,KACMC,GAAqB,YAATC,EACV,4BAAQpF,UAAU,wBAAwBnF,QAAS,WAAOwK,EAAcpK,EAAIiK,EAASC,EAASC,KAA9F,kBACA,kBAAC,WAAD,KACgB,aAAXA,EACG,4BAAQpF,UAAU,wBAAwBnF,QAAS,WAAO2K,EAAavK,KAAvE,UAA0G,YAAVmK,GAChG,kBAAC,WAAD,KACI,4BAAQpF,UAAU,wBAAwBnF,QAAS,WAAOyK,EAAarK,KAAvE,UACA,4BAAQ+E,UAAW,wBAAyBnF,QAAS,WAAO0K,EAAatK,KAAzE,aAOpB,4BAAQ+E,UAAU,MAAMnF,QAAS,WAAOwK,EAAcpK,EAAIiK,KAA1D,eCehB,IAMejI,gBANS,SAACC,GACrB,MAAO,CACHuI,QAASvI,EAAMwI,gBAIRzI,EArDf,SAAgBnD,GACZ,IAAMuL,EAAgB,SAAChL,EAAG6K,EAASC,EAASC,GACpCF,EAIGC,GAAuB,YAAXC,GACXtL,EAAM+F,SLiDY,SAACxF,EAAGwD,GAClC,OAAO,SAACgC,GACJ9B,IAAM7D,KAAN,sCAA0CG,GAAKwD,EAAG,CAC9CoE,QAAS,CACL,SAAUxE,KAGbO,MAAK,SAACC,GACHC,QAAQC,IAAI,kCAAkCF,EAASG,MACvD,IAAMuH,EAAU1H,EAASG,KACtBuH,EAAQtH,eAAe,UACtBC,MAAMqH,EAAQxD,SAGdtC,EAjBT,CAAEQ,KAAM,qBAAsB+B,QAiBFuD,QK/DRC,CAAmBvL,IAJtCP,EAAM+F,SL4Bc,SAACxF,EAAGwD,GAChC,OAAO,SAACgC,GACJ9B,IAAM7D,KAAN,oCAAwCG,GAAKwD,EAAG,CAC5CoE,QAAS,CACL,SAAUxE,KAGbO,MAAK,SAACC,GACHC,QAAQC,IAAI,gCAAiCF,EAASG,MACtD,IAAMuH,EAAU1H,EAASG,KACtBuH,EAAQtH,eAAe,UACtBC,MAAMqH,EAAQxD,SAGdtC,EAjBT,CAAEQ,KAAM,mBAAoB+B,QAiBFuD,QK1CVE,CAAiBxL,KASlCyL,EAAsB,SAACzL,GACzBP,EAAM+F,SLoEoB,SAACxF,EAAGwD,GAClC,OAAO,SAACgC,GACJ9B,IAAM7D,KAAN,sCAA0CG,GAAKwD,EAAG,CAC9CoE,QAAS,CACL,SAAUxE,KAGbO,MAAK,SAACC,GACHC,QAAQC,IAAI,kCAAkCF,EAASG,MACvD,IAAMuH,EAAU1H,EAASG,KACtBuH,EAAQtH,eAAe,UACtBC,MAAMqH,EAAQxD,SAGdtC,EAjBT,CAAEQ,KAAM,qBAAsB+B,QAiBFuD,QKlFhBI,CAAmB1L,KAGhC2L,EAAsB,SAAC3L,GACzBP,EAAM+F,SL0FoB,SAACxF,EAAGwD,GAClC,OAAO,SAACgC,GACJ9B,IAAM7D,KAAN,sCAA0CG,GAAKwD,EAAG,CAC9CoE,QAAS,CACL,SAAUxE,KAGbO,MAAK,SAACC,GACHC,QAAQC,IAAI,kCAAkCF,EAASG,MACvD,IAAMuH,EAAU1H,EAASG,KACtBuH,EAAQtH,eAAe,UACtBC,MAAMqH,EAAQxD,SAGdtC,EAjBT,CAAEQ,KAAM,qBAAsB+B,QAiBFuD,QKxGhBM,CAAmB5L,KAGhC6L,EAAqB,SAAC7L,GACxBP,EAAM+F,SLgHmB,SAACxF,EAAGwD,GACjC,OAAO,SAACgC,GACJ9B,IAAM7D,KAAN,qCAAyCG,GAAKwD,EAAG,CAC7CoE,QAAS,CACL,SAAUxE,KAGbO,MAAK,SAACC,GACHC,QAAQC,IAAI,iCAAiCF,EAASG,MACtD,IAAMuH,EAAU1H,EAASG,KACtBuH,EAAQtH,eAAe,UACtBC,MAAMqH,EAAQxD,SAGdtC,EAjBT,CAAEQ,KAAM,oBAAqB+B,QAiBEuD,QK9HnBQ,CAAkB9L,KAGrC,OACI,6BACI,kBAAC,GAAD,KACKP,EAAM2L,SAAW3L,EAAM2L,QAAQlI,KAAI,SAAAoE,GAChC,OAAO,kBAACqD,GAAD,CACKxH,IAAKmE,EAAK1G,IACVe,SAAU2F,EAAK3F,SACfiJ,IAAKtD,EAAK5F,cACVmJ,SAAUvD,EAAKuD,SACfE,OAAQzD,EAAKyD,QAAUzD,EAAKyD,OAC5BC,cAAeA,EACfpK,IAAK0G,EAAK1G,IACVkK,SAAUxD,EAAKwD,SACfG,aAAcQ,EACdP,aAAcS,EACdR,aAAcU,Y,OClC/BE,OAPf,SAAoBtM,GAChB,OACI,yBAAKO,GAAG,oBACJ,2BAAOgG,KAAK,OAAOE,YAAY,a,OCU5B8F,OAbf,WACE,OACE,yBAAKhM,GAAG,kBACN,yBAAKA,GAAG,mBACN,wCACA,2DACA,0EACA,4BAAQQ,QAAS,MAAjB,e,2BCoCOyL,OAzCf,SAAkBxM,GAAQ,IAclByM,EAAWC,EAZPC,EAAuC3M,EAAvC2M,KAAMC,EAAiC5M,EAAjC4M,SAAUC,EAAuB7M,EAAvB6M,mBAIlB3G,EAAY4G,KAAW,OAAO,CAChC,OAAUF,IAIVG,GADY,OAAGJ,QAAH,IAAGA,OAAH,EAAGA,EAAMK,MAAMC,MAAM,GAAGC,MAAK,SAACC,EAAGC,GAAJ,OAAUD,EAAE/K,UAAUiL,cAAcD,EAAEhL,eACnD6K,MAAM,GAAGK,MAgBzC,OAZIP,GAIAL,EAAgBK,EAAa3K,UAEzBqK,EADqB,SAAtBM,EAAaxG,KACAwG,EAAa1E,QAEb,KAPhBqE,EAAa,OAAGC,QAAH,IAAGA,OAAH,EAAGA,EAAMvK,UACtBqK,EAAY,IAWZ,yBAAKvG,UAAWA,EACZnF,QAAS,WAAO8L,EAAmBF,KAEnC,yBAAK3K,IAAK2K,EAAKY,KAAKtL,cAAea,IAAK6J,EAAKY,KAAKrL,WAClD,yBAAKgE,UAAU,cAAcyG,EAAKY,KAAKrL,UACvC,yBAAKgE,UAAU,gBAAgB/D,IAAOuK,GAAec,WACrD,yBAAKtH,UAAU,gBACVuG,K,OCdFgB,OAtBf,SAAkBzN,GAAQ,IAEd0N,EAA4C1N,EAA5C0N,MAAOC,EAAqC3N,EAArC2N,aAAcd,EAAuB7M,EAAvB6M,mBAEvBe,EAAcF,EAAMG,QAAO,SAAAlB,GAAI,MAAoB,YAAhBA,EAAKrB,UACxCwC,EAAYJ,GAASE,EAAYnK,KAAI,SAAAkJ,GACvC,IAAMoB,EAAeJ,GAAgBhB,EAAKY,KAAKpM,MAAQwM,EAAaJ,KAAKpM,IACzE,OAAO,kBAAC,GAAD,CACHuC,IAAKiJ,EAAKY,KAAKpM,IACf0L,mBAAoBA,EACpBD,SAAUmB,EACVpB,KAAMA,OAId,OACI,yBAAKpM,GAAG,aACHuN,I,OCVEE,OARf,WACI,OACI,yBAAKzN,GAAG,2B,OCwBD0N,OAxBf,SAAmBjO,GAAQ,IACf2N,EAAiB3N,EAAjB2N,aACFO,EAAW,OAAGP,QAAH,IAAGA,OAAH,EAAGA,EAAcJ,KAAKpM,IACnCgN,EAAoB,KAElBnI,EAAUqB,cAYhB,OAVGsG,IACCQ,EACI,kBAAC,WAAD,KACI,8BAAOR,EAAaJ,KAAKrL,UACzB,4BAAQ3B,GAAG,0BAA0BQ,QAAS,WAAKiF,EAAQC,KAAR,2BAAiCiI,MAChF,kBAAC,IAAD,SAMZ,yBAAK3N,GAAG,cACF4N,I,wDClBRC,I,OAAYC,cAAW,SAACC,GAAD,MAAY,CACzCC,MAAO,CACHC,QAAS,OACTC,WAAY,SACZC,eAAgB,UAEpBC,MAAO,CACHC,gBAAiBN,EAAMO,QAAQC,WAAWH,MAC1CI,UAAWT,EAAMU,QAAQ,SAId,SAASC,GAAajP,GACjC,IAAMkP,EAAUd,KADwB,EAEhBe,IAAM7N,UAAS,GAFC,mBAEjCjB,EAFiC,KAE3B+O,EAF2B,KAGhC/G,EAAyBrI,EAAzBqI,QAASgH,EAAgBrP,EAAhBqP,YAMjB/N,oBAJmB,WACf8N,EAAQC,KAGQ,IAOpB,OACA,6BACI,kBAACC,GAAA,EAAD,CACAC,kBAAgB,yBAChBC,mBAAiB,+BACjBtJ,UAAWgJ,EAAQX,MACnBlO,KAAMA,EACNK,QAZgB,WAChB0O,GAAQ,GACRpP,EAAMyP,qBAWNC,sBAAoB,EACpBC,kBAAmBC,KACnBC,cAAe,CACXC,QAAS,MAGb,kBAACC,GAAA,EAAD,CAAMC,GAAI3P,GACN,yBAAK6F,UAAWgJ,EAAQP,OACpB,yBAAKzI,UAAU,YAAYlE,IAAKqG,EAAQA,QAASvF,IAAKuF,EAAQlH,UCG/D8O,OA9Cf,SAAiBjQ,GAAQ,IACbkQ,EAA6ClQ,EAA7CkQ,YAAa7H,EAAgCrI,EAAhCqI,QAAS8H,EAAuBnQ,EAAvBmQ,SAAUC,EAAapQ,EAAboQ,SADpB,EAGK9O,oBAAS,GAHd,mBAGbjB,EAHa,KAGN+O,EAHM,KAKdiB,EAAWvD,KAAW,cAAc,CACtC,cAAeoD,EACf,iBAAkBA,IAGhBI,EAASJ,EAAc,KAAO,yBAAKhK,UAAU,SAASlE,IAAKmO,EAAUrN,IAAKsN,IAG1EX,EAAoB,WACtBL,GAAS/O,IAGTkQ,EAAU,KA0Bd,MAzBkB,SAAflI,EAAQ9B,KACPgK,EACI,yBAAKrK,UAAWmK,GACZ,yBAAKnK,UAAU,mBACVoK,EACD,yBAAKpK,UAAU,gBACVmC,EAAQA,SAEb,yBAAKnC,UAAU,gBAAgB/D,IAAOkG,EAAQjG,WAAWC,OAAO,8BAKvD,gBAAjBgG,EAAQ9B,OACZgK,EACI,yBAAKrK,UAAWmK,GACZ,yBAAKnK,UAAU,mBACVoK,EACD,yBAAKpK,UAAU,eAAelE,IAAKqG,EAAQA,QAASvF,IAAKuF,EAAQlH,IAAKJ,QAAS,WAAO0O,OACrFpP,GAAQ,kBAAC,GAAD,CAAcgI,QAASA,EAASgH,YAAahP,EAAMoP,kBAAmBA,IAC/E,yBAAKvJ,UAAU,gBAAgB/D,IAAOkG,EAAQjG,WAAWC,OAAO,+BAKzE,kBAAC,WAAD,KAAWkO,ICbPC,OAjCf,SAAqBxQ,GAAQ,IAEjB2N,EAAiB3N,EAAjB2N,aACJ8C,EAAe,KAIbC,EAAiBC,iBAAO,MAkB9B,OAbGhD,GAAgBA,EAAaX,MAAMhK,SAClCyN,EAAe9C,EAAaX,MAAME,MAAK,SAACC,EAAGC,GAAJ,OAAWD,EAAE/K,UAAUiL,cAAcD,EAAEhL,cAAYqB,KAAI,SAACmN,GAC3F,OAAO,kBAAC,GAAD,CACPlN,IAAKkN,EAAIzP,IACT+O,YAAaU,EAAIV,YACjB7H,QAASuI,EACTT,SAAUxC,EAAaJ,KAAKtL,cAC5BmO,SAAUzC,EAAaJ,KAAKrL,eAKpC2O,qBAhBuB,WACnBH,EAAeI,QAAQC,eAAe,CAAEC,SAAU,aAe5B,CAACP,IAEvB,yBAAKlQ,GAAG,qBACJ,yBAAKgJ,IAAKmH,IACTD,I,iBC8BEQ,OAzDf,SAAkBjR,GAAO,IAEb2N,EAAmD3N,EAAnD2N,aAAcuD,EAAqClR,EAArCkR,mBAAoBC,EAAiBnR,EAAjBmR,aAFtB,EAGU7P,mBAAS,IAHnB,mBAGb+G,EAHa,KAGJ+I,EAHI,KAIhBC,EAAe,KA8CnB,OA5BI1D,IACA0D,EACI,kBAAC,WAAD,KACI,2BACI9K,KAAK,OACLE,YAAY,iBACZhE,MAAO4F,EACP7B,SAAW,SAAC5E,GAAQwP,EAAWxP,EAAE4D,OAAO/C,UAIxC,kBAAC,KAAD,CAAU6O,OAnBP,SAACC,GAEhB,IAAMxN,EAAK,IAAIyN,SACfzN,EAAG0N,OAAO,OAAQF,EAAK,IACvBxN,EAAG0N,OAAO,OAAO,eACjBN,EAAapN,MAeI,gBAAG2N,EAAH,EAAGA,aAAcC,EAAjB,EAAiBA,cAAjB,OACG,iCACA,wBAASD,IACL,0BAAWC,KACX,4BAAQpL,KAAK,SAAShG,GAAG,cAAa,kBAAC,IAAD,YAOtD,4BAAQgG,KAAK,UAAb,UAMR,0BAAMhG,GAAG,YAAY6F,SA7CJ,SAACxE,GAClBA,EAAEiE,iBACEwC,EAAQrF,OAAS,IACjBkO,EAAmB7I,GACnB+I,EAAW,OA0CVC,ICxDP1N,I,OAAWC,aAAaC,QAAQ,UA6BzB+N,GAAa,SAACtN,GACvB,MAAO,CAACiC,KAAM,eAAgB+B,QAAQhE,ICwC1C,IAQenB,gBARS,SAAAC,GACpB,MAAO,CACHsK,MAAOtK,EAAME,MAAMuO,QACnBlE,aAAcvK,EAAMuK,aACpB9F,KAAMzE,EAAME,SAILH,EAjEf,SAAmBnD,GAAQ,IACf0N,EAAwB1N,EAAxB0N,MAAOC,EAAiB3N,EAAjB2N,aACXmE,EAAU,OAAGnE,QAAH,IAAGA,OAAH,EAAGA,EAAcJ,KAAKpM,IAEpCiD,QAAQC,IAAIqJ,EAAM,aAElB,IAAIqE,EACA,kBAAC,WAAD,KACI,kBAAC,GAAD,OA4BR,OAzBGrE,EAAM1K,OAAS,IACd+O,EACI,kBAAC,WAAD,KACI,kBAAC,GAAD,CAAapE,aAAcA,MAuBnC,yBAAKpN,GAAG,kBACJ,kBAAC,GAAD,CAAYmN,MAAOA,IACnB,kBAAC,GAAD,CACIb,mBAtBQ,SAACF,GC5BW,IAACrI,ED6B7BtE,EAAM+F,UC7BuBzB,ED6BOqI,EC5BlC,SAAC5G,GACHA,EAPuB,SAACzB,GAC5B,MAAO,CAAEiC,KAAM,cAAe+B,QAAShE,GAM1B0N,CAAgB1N,OD4BzBF,QAAQC,IAAI,wBAAsBsI,EAAKxL,MAqB/BuM,MAAOA,EACPC,aAAcA,IAClB,kBAAC,GAAD,MACA,kBAAC,GAAD,CACIA,aAAcA,IAEjBoE,EACD,kBAAC,GAAD,CACIpE,aAAcA,EACduD,mBA3Be,SAACN,GACxB,IAAM7M,EAAK,CACPsE,QAASuI,GAEbxM,QAAQC,IAAI,4BAAyByN,EAAWlB,GAChD5Q,EAAM+F,SDRc,SAACxF,EAAGwD,GAC5B,OAAM,SAACgC,GACH9B,IAAM7D,KAAN,yBAA6BG,GAAKwD,EAAG,CACjCoE,QAAS,CACL,SAAUxE,MAGbO,MAAK,SAAAC,GACFC,QAAQC,IAAI,qBAAqBF,EAASG,MAC1C,IAAM2N,EAAU9N,EAASG,KACtB2N,EAAQ1N,eAAe,UACtBC,MAAMyN,EAAQ5J,SAEdtC,EAAS6L,GAAWK,OAG3BjN,OAAM,SAAAC,GAAG,OAAGb,QAAQC,IAAI,mBAAmBY,OCRjCiN,CAAaJ,EAAW/N,KAuB/BoN,aApBS,SAACpN,GAClBK,QAAQC,IAAIyN,EAAW/N,EAAG,eAC1B/D,EAAM+F,SDYiB,SAACxF,EAAGwD,GAC/B,OAAM,SAACgC,GACH9B,IAAM7D,KAAN,8BAAkCG,GAAKwD,EAAG,CACtCoE,QAAS,CACL,eAAgB,sBAChB,SAAUxE,MAGbO,MAAK,SAAAC,GACFC,QAAQC,IAAI,wBAAwBF,EAASG,MAC7C,IAAM2N,EAAU9N,EAASG,KACtB2N,EAAQ1N,eAAe,UACtBC,MAAMyN,EAAQ5J,SAEdtC,EAjBT,CAACQ,KAAM,cAAe+B,QAiBO2J,OAG3BjN,OAAM,SAAAC,GAAG,OAAGb,QAAQC,IAAI,qBAAqBY,OC7BnCkN,CAAgBL,EAAW/N,WE/C5CJ,GAAWC,aAAaC,QAAQ,SC0DtC,IAMeV,gBANS,SAAAC,GACpB,MAAO,CACHyO,QAASzO,EAAME,MAAMuO,WAId1O,EA1Df,SAAiBnD,GACb,IAAMuL,EAAgB,SAAChL,EAAG6K,EAASC,EAASC,GACrCF,GACIC,GAAuB,YAAXC,GACXtL,EAAM+F,SDsBkB,SAACxF,EAAGwD,GACxC,OAAO,SAACgC,GACJ9B,IAAM7D,KAAN,uCAA2CG,GAAKwD,EAAG,CAC/CoE,QAAS,CACL,SAAUxE,MAGbO,MAAK,SAACC,GACHC,QAAQC,IAAI,kCAAkCF,EAASG,MACvD,IAAMuH,EAAU1H,EAASG,KACtBuH,EAAQtH,eAAe,UACtBC,MAAMqH,EAAQxD,SAGdtC,EAjBT,CAAEQ,KAAM,wBAAyB+B,QAiBCuD,QCpCduG,CAAyB7R,KAK9CyL,EAAsB,SAACzL,GACzBP,EAAM+F,SDyC0B,SAACxF,EAAGwD,GACxC,OAAO,SAACgC,GACJ9B,IAAM7D,KAAN,uCAA2CG,GAAKwD,EAAG,CAC/CoE,QAAS,CACL,SAAUxE,MAGbO,MAAK,SAACC,GACHC,QAAQC,IAAI,2BAA2BF,EAASG,MAChD,IAAMuH,EAAU1H,EAASG,KACtBuH,EAAQtH,eAAe,UACtBC,MAAMqH,EAAQxD,SAGdtC,EAjBT,CAAEQ,KAAM,wBAAyB+B,QAiBCuD,QCvDtBwG,CAAyB9R,KAGtC2L,EAAsB,SAAC3L,GACzBP,EAAM+F,SD+D0B,SAACxF,EAAGwD,GACxC,OAAO,SAACgC,GACJ9B,IAAM7D,KAAN,uCAA2CG,GAAKwD,EAAG,CAC/CoE,QAAS,CACL,SAAUxE,MAGbO,MAAK,SAACC,GACHC,QAAQC,IAAI,2BAA2BF,EAASG,MAChD,IAAMuH,EAAU1H,EAASG,KACtBuH,EAAQtH,eAAe,UACtBC,MAAMqH,EAAQxD,SAGdtC,EAjBT,CAAEQ,KAAM,wBAAyB+B,QAiBCuD,QC7EtByG,CAAyB/R,KAGtC6L,EAAqB,SAAC7L,GACxBP,EAAM+F,SDqFmB,SAACxF,EAAGwD,GACjC,OAAO,SAACgC,GACJ9B,IAAM7D,KAAN,sCAA0CG,GAAKwD,EAAG,CAC9CoE,QAAS,CACL,SAAUxE,MAGbO,MAAK,SAACC,GACHC,QAAQC,IAAI,0BAA0BF,EAASG,MAC/C,IAAMuH,EAAU1H,EAASG,KACtBuH,EAAQtH,eAAe,UACtBC,MAAMqH,EAAQxD,SAGdtC,EAjBT,CAAEQ,KAAM,gBAAiB+B,QAiBMuD,QCnGnB0G,CAAkBhS,KAG7BsR,EAAY7R,EAAZ6R,QAQR,OANAhB,qBAAU,WACN7Q,EAAM+F,UDtBH,SAACA,GACJ9B,IAAMuO,IAAN,oBAA8B,CAC1BrK,QAAS,CACL,SAAUxE,MAGbO,MAAK,SAACC,GACHC,QAAQC,IAAI,+BAA+BF,EAASG,MACpD,IAAMuH,EAAU1H,EAASG,KACtBuH,EAAQtH,eAAe,UACtBC,MAAMqH,EAAQxD,SAGdtC,EAjBT,CAAEQ,KAAM,qBAAsB+B,QAiBKuD,YCYxC,IAGE,6BACI,kBAAC,GAAD,KACMgG,GAAWA,EAAQpO,KAAI,SAAAgP,GACrB,OAAO,kBAACvH,GAAD,CACKxH,IAAK+O,EAAOtR,IACZe,SAAUuQ,EAAOlF,KAAKrL,SACtBiJ,IAAKsH,EAAOlF,KAAKtL,cACjBmJ,SAAUqH,EAAOrH,SACjBE,OAAQmH,EAAOnH,QAAUmH,EAAOnH,OAChCC,cAAeA,EACfpK,IAAKsR,EAAOlF,KAAKpM,IACjBkK,SAAUoH,EAAOpH,SACjBG,aAAcQ,EACdP,aAAcS,EACdR,aAAcU,Y,uECzCxCgC,I,OAAYC,cAAW,SAACC,GAAD,MAAY,CACzCC,MAAO,CACHC,QAAS,OACTC,WAAY,SACZC,eAAgB,UAEpBC,MAAO,CACHC,gBAAiBN,EAAMO,QAAQC,WAAWH,MAC1CI,UAAWT,EAAMU,QAAQ,SAId,SAAS0D,GAAU1S,GAC9B,IAAMkP,EAAUd,KADqB,EAEbe,IAAM7N,UAAS,GAFF,mBAE9BjB,EAF8B,KAExB+O,EAFwB,KAG7BuD,EAA+B3S,EAA/B2S,KAAMtD,EAAyBrP,EAAzBqP,YAAahH,EAAYrI,EAAZqI,QACrBrC,EAAUqB,cAMhB/F,oBAJmB,WACf8N,EAAQuD,KAGS,IAUrB,OACA,6BACI,kBAACrD,GAAA,EAAD,CACAC,kBAAgB,yBAChBC,mBAAiB,+BACjBtJ,UAAWgJ,EAAQX,MACnBlO,KAAMA,EACNK,QAfgB,WAChB0O,GAAQ,IAeRM,sBAAoB,EACpBC,kBAAmBC,KACnBC,cAAe,CACXC,QAAS,MAGb,kBAACC,GAAA,EAAD,CAAMC,GAAI3P,GACN,yBAAKE,GAAG,mBAAmB2F,UAAWgJ,EAAQP,OAC1C,kBAAC,KAAD,CAAgBpO,GAAG,iBACnB,4BAAK8H,GACL,4BAAQ9H,GAAG,cAAcQ,QACrB,WACIsO,IAvBhBrJ,EAAQC,KAAK,iBAqBL,aCsOhB,IAQe9C,gBARS,SAACC,GACvB,MAAO,CACLyE,KAAMzE,EAAME,MACZqK,aAAcvK,EAAMuK,aACpBiF,UAAWxP,EAAMyP,QAIN1P,EA9Rf,SAAmBnD,GACjB,IAAM8S,EAAYnC,mBACZoC,EAAepC,mBACf3K,EAAUqB,cACZ2L,EAAe,KACfC,EAAUtC,kBAAO,GACjBuC,EAAcvC,kBAAO,GAND,EAQQrP,oBAAS,GARjB,mBAQjB6R,EARiB,KAQPC,EARO,OASI9R,qBATJ,mBASjB+R,EATiB,KASTC,EATS,OAUgBhS,oBAAS,GAVzB,mBAUjBiS,EAViB,KAUHC,EAVG,OAWgBlS,qBAXhB,mBAWjBmS,EAXiB,KAWHC,EAXG,OAYIpS,mBAAS,IAZb,mBAYjBqS,EAZiB,KAYTC,EAZS,OAcMtS,oBAAS,GAdf,mBAcjBuS,EAdiB,KAcRC,EAdQ,OAeYxS,mBAAS,IAfrB,mBAejByS,EAfiB,KAeLC,EAfK,KAsBhBnM,EAAoB7H,EAApB6H,KAAM+K,EAAc5S,EAAd4S,UACRqB,EAASrB,EAAUqB,OAErBC,EAAalU,EAAMmU,MAAMC,OAAO7T,GACpC6D,QAAQC,IAAI,mBAAiB6P,GAC7B,IAAI7S,EAAM,OAAGwG,QAAH,IAAGA,OAAH,EAAGA,EAAM1G,IACbkT,EAAQC,KAAYC,MAAMvU,EAAM8E,SAAS0P,OAAQ,CACrDC,eAAe,IAEjBrQ,QAAQC,IAAIgQ,EAAO,uBAEnB,IAwMIK,EAaAC,EA1MEC,EAAc9H,KAAW,cAAe,CAC5C,uBAAwByG,IAGpBsB,EAAW,OAAGjC,QAAH,IAAGA,OAAH,EAAGA,EAAWkC,cA6M/B,OAlKAjE,qBAAU,WAwBR,OAvBAzM,QAAQC,IAAI6P,EAAY,cAExBa,UAAUC,aACPC,aAAa,CAAEC,OAAO,EAAMC,OAAO,IACnCjR,MAAK,SAACmP,GACLC,EAAUD,GACVL,EAAeK,EACXP,EAAUhC,UACZgC,EAAUhC,QAAQsE,UAAY/B,GAI5BgB,EAAMgB,YACR3B,EAAgBO,EAAOA,QACvBL,EAAUK,EAAOqB,MACjBlR,QAAQC,IAAI,8BAA+BsP,EAAQF,OAGtDzO,OAAM,SAACC,GACNb,QAAQC,IAAIY,GACZe,EAAQC,KAAK,kBAGV,WAhEP7B,QAAQC,IAAI,qBAAsB2O,GAC9BA,GACFA,EAAauC,YAAYC,SAAQ,SAACC,GACP,SAArBA,EAAMC,YACRD,EAAME,UAIZvR,QAAQC,IACN,cACA6P,EACA7S,EACAwT,EACA,oBACA5B,EAAQnC,SAGLoC,EAAYpC,SACVmC,EAAQnC,UACPoD,EAEFrU,EAAO+V,KAAK,mBAAoB,CAC9BlP,GAAIwN,EACJoB,KAAMjU,IAECwT,GAEThV,EAAO+V,KAAK,mBAAoB,CAC9BlP,GAAIuN,EAAOqB,KACXA,KAAMjU,KAMd4R,EAAQnC,SAAU,EAClBoC,EAAYpC,SAAU,EACtB9Q,EAAM+F,SCnFC,CAAEQ,KAAM,qBDgHb1G,EAAOgW,IAAI,uBAGZ,IAEHhF,qBAAU,WAER,GADAzM,QAAQC,IAAI,+CAAgD6P,GACxDA,EAAY,CAwDd,OAvDAlU,EAAM+F,SC5HD,CAAEQ,KAAM,kBAAmB+B,SD4HM,IACtC,SAAkB/H,GAChB,IAAMuV,EAAO,IAAIC,KAAK,CACpBC,WAAW,EACXC,SAAS,EACT5C,OAAQA,IAGJ6C,EAAgB,SAAC5R,GACrBwR,EAAKK,UACL/R,QAAQC,IAAI,YAAaC,GACzB8R,YAAW,WACTpC,EAAc1P,EAAK+D,SACnByL,GAAW,KACV,MAGLgC,EAAKO,GAAG,UAAU,SAAC/R,GACjBzE,EAAO+V,KAAK,WAAY,CACtBU,WAAYpC,EACZqC,WAAYjS,EACZgR,KAAMjU,OAIVyU,EAAKO,GAAG,UAAU,SAAChD,GACbN,EAAajC,UACfiC,EAAajC,QAAQsE,UAAY/B,MAIrCxT,EAAOwW,GAAG,gBAAgB,SAACpC,GACzBT,GAAgB,GAChBpP,QAAQC,IAAI,kBAAmB4P,GAC/B6B,EAAK7B,OAAOA,MAGdpU,EAAOwW,GAAG,gBAAiBH,GAC3BrW,EAAOwW,GAAG,eAAgBH,GAC1BrW,EAAOwW,GAAG,oBAAqBH,GAC/BrW,EAAOwW,GAAG,oBAAqBH,GAC/BrW,EAAOwW,GAAG,mBAAoBH,GAE9BrW,EAAOwW,GAAG,kBAAkB,SAAC/R,GAC3BwR,EAAKK,UACL/R,QAAQC,IAAI,YAAaC,GACzB8R,YAAW,WACTpC,EAAc1P,EAAK+D,SACnByL,GAAW,GACXZ,EAAYpC,SAAU,IACrB,QAGP0F,GAEO,WACL3W,EAAOgW,IAAI,gBACXhW,EAAOgW,IAAI,gBACXhW,EAAOgW,IAAI,iBACXhW,EAAOgW,IAAI,qBACXhW,EAAOgW,IAAI,qBACXhW,EAAOgW,IAAI,oBACXhW,EAAOgW,IAAI,sBAGd,CAACxC,EAAQhS,EAAQ6S,EAAYG,EAAMoC,YAEtC5F,qBAAU,WACR,GAAIwD,EAAMqC,QAAU/C,GAAUU,EAAMoC,UAAW,EAC7C,WACEjD,GAAgB,GAChB,IAAMsC,EAAO,IAAIC,KAAK,CACpBC,WAAW,EACXC,SAAS,EACT5C,OAAQA,IAGJ6C,EAAgB,SAAC5R,GACrBwR,EAAKK,UACL/R,QAAQC,IAAI,YAAaC,GACzB8R,YAAW,WACTpC,EAAc1P,EAAK+D,SACnByL,GAAW,KACV,MAGLgC,EAAKO,GAAG,UAAU,SAAC/R,GACjBzE,EAAO+V,KAAK,aAAc,CAAE3B,OAAQ3P,EAAMoC,GAAIiN,EAAQ2B,KAAMjU,OAG9DyU,EAAKO,GAAG,UAAU,SAAChD,GACjBN,EAAajC,QAAQsE,UAAY/B,KAGnCyC,EAAK7B,OAAOR,GAEZ5T,EAAOwW,GAAG,oBAAqBH,GAC/BrW,EAAOwW,GAAG,mBAAoBH,GAEhCS,GAGF,OAAO,WACL9W,EAAOgW,IAAI,qBACXhW,EAAOgW,IAAI,uBAEZ,CAACpC,EAAcJ,EAAQM,EAAQtS,EAAQgT,EAAMoC,YAG5CpD,IACFqB,EACE,2BACExO,UAAW0O,EACXgC,aAAW,EACXC,OAAK,EACLtN,IAAKuJ,EACLgE,UAAQ,KAMVvD,IACFoB,EACE,2BAAOoC,UAAQ,EAACxW,GAAG,eAAegJ,IAAKwJ,EAAc+D,UAAQ,KAK/D,yBAAKvW,GAAG,oBACLsT,GACC,kBAAC,GAAD,CACElB,KAAMQ,EACN9D,YAhPY,WAClB+D,GAAY,IAgPN/K,QAAS0L,IAGb,yBAAKxT,GAAG,kBACN,6BAAMmU,GACN,6BAAMC,IAER,4BACEpU,GAAG,WACHQ,QAAS,WA1OblB,EAAO+V,KAAK,gBAAiB,CAC3B/N,KAAMA,EAAK1G,MAEb8R,EAAQnC,SAAU,EAElBsF,YAAW,WACTpQ,EAAQC,KAAK,iBACZ,QAuOC,kBAAC,KAAD,WE/QO+Q,OATf,SAAkBhX,GACd,OACI,6BACI,kBAAC,GAAD,MACA,kBAAC,GAAD,QCANoO,I,OAAYC,cAAW,SAACC,GAAD,MAAY,CACzCC,MAAO,CACHC,QAAS,OACTC,WAAY,SACZC,eAAgB,UAEpBC,MAAO,CACHC,gBAAiBN,EAAMO,QAAQC,WAAWH,MAC1CI,UAAWT,EAAMU,QAAQ,SAId,SAAS0D,GAAU1S,GAC9B,IAAMkP,EAAUd,KADqB,EAEbe,IAAM7N,UAAS,GAFF,mBAE9BjB,EAF8B,KAExB+O,EAFwB,KAG7BuD,EAAqE3S,EAArE2S,KAAMtD,EAA+DrP,EAA/DqP,YAAa5J,EAAkDzF,EAAlDyF,KAAMwR,EAA4CjX,EAA5CiX,IAAKC,EAAuClX,EAAvCkX,iBAAkBC,EAAqBnX,EAArBmX,iBAMxD7V,oBAJmB,WACf8N,EAAQuD,KAGS,IAMrB,OACA,6BACI,kBAACrD,GAAA,EAAD,CACAC,kBAAgB,yBAChBC,mBAAiB,+BACjBtJ,UAAWgJ,EAAQX,MACnBlO,KAAMA,EACNK,QAXgB,WAChB0O,GAAQ,IAWRM,sBAAoB,EACpBC,kBAAmBC,KACnBC,cAAe,CACXC,QAAS,MAGb,kBAACC,GAAA,EAAD,CAAMC,GAAI3P,GACN,yBAAKE,GAAG,aAAa2F,UAAWgJ,EAAQP,OACpC,yBAAKpO,GAAG,WAAWyB,IAAKmE,EAAQ,KAAoCrD,IAAI,YAExE,yBAAKvC,GAAG,UACJ,yBAAKA,GAAG,gBAAgByB,IAAKiV,EAAKnU,IAAI,SACtC,wBAAIvC,GAAG,eAAekF,IAE1B,yBAAKlF,GAAG,aACJ,4BAAQA,GAAG,WAAWQ,QAAS,WAC3BsO,IACA6H,MAFJ,UAIA,4BAAQ3W,GAAG,WAAWQ,QAAS,WAC3BoW,IACA9H,MAFJ,eCiCpB,IAMelM,gBANS,SAAAC,GACpB,MAAO,CACHwP,UAAYxP,EAAMyP,QAIX1P,EA7Ff,SAAuBnD,GAAQ,IAAD,EAEMsB,oBAAS,GAFf,mBAEnB6R,EAFmB,KAETC,EAFS,OAGU9R,mBAAS,IAHnB,mBAGnB8V,EAHmB,KAGPC,EAHO,OAIQ/V,mBAAS,IAJjB,mBAInBgW,EAJmB,KAIRC,EAJQ,OAKMjW,mBAAS,IALf,mBAKnBkW,EALmB,KAKTC,EALS,OAMEnW,oBAAS,GANX,mBAMnBoV,EANmB,KAMXgB,EANW,OAOApW,mBAAS,IAPT,mBAOnB+S,EAPmB,KAOZsD,EAPY,KASlB/E,EAAc5S,EAAd4S,UACFgF,EAAe,OAAGhF,QAAH,IAAGA,OAAH,EAAGA,EAAWkC,cAiB7B+C,EAAkB,SAACvT,GACrBF,QAAQC,IAAI,iBAAkBC,GAC9B,IAAMwT,EAAO,CACTxC,KAAMhR,EAAKgR,KACXrB,OAAQ3P,EAAK2P,QAEjBjU,EAAM+F,SHzCY,SAACzB,GACvB,MAAO,CAAEiC,KAAM,cAAe+B,QAAQhE,GGwCnByT,CAAWD,IACtBlF,EAAUoF,gBACVhY,EAAM+F,SHlCP,CAAEQ,KAAM,mBAAoB+B,SGkCY,IACnCsP,GACAxE,GAAY,IAGpBqE,EAAYK,GACZT,EAAc/S,EAAKpC,UACnBqV,EAAajT,EAAKrC,eAGd,IAAMgW,EAAI,gCAA4B3T,EAAKgR,KAAjC,sBAAmDhR,EAAK4T,WAAxD,+BACVP,EAASM,IAqBjB,OAZApH,qBAAU,WAEN,OANAzM,QAAQC,IAAI,kCACZxE,EAAOwW,GAAG,gBAAiBwB,GAKrB,WACFzT,QAAQC,IAAI,8BACZxE,EAAOgW,IAAI,gBAAgBgC,GACxBnB,IACCgB,GAAU,GACVtE,GAAY,QAMpB,6BACI,kBAAC,WAAD,KACOD,IAAauD,GACZ,kBAAC,GAAD,CACIrH,YA5DA,WAChB+D,GAAY,IA4DIT,KAAMQ,EACN1N,KAAM2R,EACNH,IAAKK,EACLJ,iBA5DK,WACrBQ,GAAU,IA4DMP,iBAzDK,WACrBnX,EAAM+F,SHZH,CAAEQ,KAAM,qBGaX1G,EAAO+V,KAAK,aAAc,CACtBN,KAAMkC,EAASlC,UAwDToB,GACE,kBAAC,IAAD,CAAUhQ,GAAI2N,SCxCnBlR,sBA3Cf,SAAyBnD,GAMrB,IAAMmY,EAAgB,SAACvH,GACnBxM,QAAQC,IAAIuM,EAAI,oBAChB5Q,EAAM+F,SAAS6L,GAAWhB,KAgC9B,OAfAC,qBAAU,WAMN,OAnBAzM,QAAQC,IAAI,wCAKZxE,EAAOwW,GAAG,2BAA2B8B,GAc9B,WACH/T,QAAQC,IAAI,2BACZxE,EAAOgW,IAAI,2BAA4BsC,MAI7C,IAGM,QCtCN/J,I,cAAYC,cAAW,SAACC,GAAD,MAAY,CACzCC,MAAO,CACHC,QAAS,OACTC,WAAY,SACZC,eAAgB,eAIL,SAAS0J,GAAUpY,GAC9B,IAAMkP,EAAUd,KADqB,EAEbe,IAAM7N,UAAS,GAFF,mBAE9BjB,EAF8B,KAExB+O,EAFwB,KAG7BC,EAAyBrP,EAAzBqP,YAAagJ,EAAYrY,EAAZqY,QAMrB/W,oBAJmB,WACf8N,EAAQC,KAGQ,IAOpB,OACA,6BACI,kBAACC,GAAA,EAAD,CACAC,kBAAgB,yBAChBC,mBAAiB,+BACjBtJ,UAAWgJ,EAAQX,MACnBlO,KAAMA,EACNK,QAZgB,WAChB0O,GAAQ,GACRpP,EAAMyP,qBAWNC,sBAAoB,EACpBC,kBAAmBC,KACnBC,cAAe,CACXC,QAAS,MAGb,kBAACC,GAAA,EAAD,CAAMC,GAAI3P,GACN,yBAAKE,GAAG,cACH8X,M,qBC1CF,SAASC,GAAWtY,GAAQ,IAEjCC,EAA0CD,EAA1CC,SAAUC,EAAgCF,EAAhCE,YAAaqY,EAAmBvY,EAAnBuY,eAEzBlY,EAAOC,QAAQL,GACfM,EAAKF,EAAO,kBAAeG,EAEjC,OACE,6BACE,kBAACC,EAAA,EAAD,CACEF,GAAIA,EACJF,KAAMA,EACNJ,SAAUA,EACVS,QAASR,EACTS,aAAc,CACZC,SAAU,SACVC,WAAY,QAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,SAGd,kBAAC,KAAD,CAAQ2X,MAAM,wBAAmBC,MAAM,WAAWC,SAAUH,MC3BpE,IAAM5U,GAAWC,aAAaC,QAAQ,SA0BzB8U,GAAa,SAACrU,GACvB,MAAO,CAAEiC,KAAM,eAAgB+B,QAAShE,ICZrC,SAASsU,GAAQ5Y,GAAO,IAEnB6H,EAAmG7H,EAAnG6H,KAAMgR,EAA6F7Y,EAA7F6Y,WAAYC,EAAiF9Y,EAAjF8Y,OAAQ1Y,EAAyEJ,EAAzEI,KAAM2Y,EAAmE/Y,EAAnE+Y,MAAOC,EAA4DhZ,EAA5DgZ,sBAAuBC,EAAqCjZ,EAArCiZ,mBAAoBrT,EAAiB5F,EAAjB4F,aAFhE,EAIMtE,mBAAS,WAJf,mBAInBL,EAJmB,KAITiY,EAJS,OAKM5X,mBAAS,IALf,mBAKnB6X,EALmB,KAKTC,EALS,OAMM9X,mBAAS,MANf,mBAMnBrB,EANmB,KAMTwB,EANS,OAOSH,mBAAS,IAPlB,mBAOnB+X,EAPmB,KAORC,EAPQ,KAU1BzI,qBAAU,WACHzQ,IACC8Y,EAAYH,GACZK,EAAYhZ,MAGlB,IAEFgE,QAAQC,KAAK8U,EAASnW,QAAQ1C,QAAQwY,GAAQ,kBAyB9C,OANAjI,qBACI,WACIoI,EAAmBE,EAASlY,KAE9B,CAACkY,EAASlY,IAGZ,yBAAKV,GAAG,sBACJ,2CACA,6BACA,yBAAKA,GAAG,gBACJ,kBAACwB,EAAA,EAAD,CAAQxB,GAAG,cAAcyB,IAAK6F,EAAK0R,aACnC,yBAAKhZ,GAAG,iBACJ,4BAAKsH,EAAK3F,UACV,kBAACI,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CACAhC,GAAG,mBACHkC,MAAOxB,EACPuF,SAAU,SAAC5E,GAAKsX,EAAYtX,EAAE4D,OAAO/C,QACrCE,cAAY,GAER,kBAACC,EAAA,EAAD,CAAUH,MAAO,WAAW,kBAAC,IAAD,MAA5B,WACA,kBAACG,EAAA,EAAD,CAAUH,MAAO,WAAW,kBAAC,IAAD,MAA5B,WACA,kBAACG,EAAA,EAAD,CAAUH,MAAO,UAAU,kBAAC,IAAD,MAA3B,cAKfqW,GACG,yBAAKvY,GAAG,eACJ,yBAAMyB,IAAKwX,IAAIC,gBAAgBX,GAAShW,IAAI,WAC5C,4BAAQvC,GAAG,oBAAoBQ,QAASiY,GAAxC,MAGR,yBAAKzY,GAAG,oBACJ,8BACIA,GAAG,gBACHgD,MAAO,CAACmW,OAAO,GAAD,OAAIL,EAAJ,OACd9S,KAAK,OACL9D,MAAO0W,EACP1S,YAAW,6BAAwBoB,EAAK3F,SAA7B,MACXsE,SA/Ca,SAAC5E,GAC1BwX,EAAYxX,EAAE4D,OAAO/C,OACrB2B,QAAQC,IAAIzC,EAAE4D,QACd8T,EAAc1X,EAAE4D,OAAOmU,iBA8Cf,kBAAC,IAAD,CAASpZ,GAAG,kBAAkBQ,QAAS,SAACa,IA5DzB,SAACA,GACxBH,EAAYG,EAAEC,eA2DyC+X,CAAmBhY,MACjE3B,GACG,kBAACqY,GAAD,CACIrY,SAAUA,EACVC,YA7DQ,SAAC0B,GACzBH,EAAY,OA6DI8W,eA1DG,SAAC3W,GACpBwX,EAAYD,EAASvX,EAAEiY,YA6DnB,6BACA,yBAAKtZ,GAAG,mBACJ,kBAAC,KAAD,CAAU+Q,OAAQuH,IACT,gBAAGnH,EAAH,EAAGA,aAAcC,EAAjB,EAAiBA,cAAjB,OACG,iCACA,wBAASD,IACL,0BAAWC,KACX,yBAAKpR,GAAG,cACJ,yBAAKyB,IAAKmE,EAAQ,KAA0CrD,IAAI,oBAMpF,4BAAQvC,GAAG,eAAeQ,QAAS6E,EAAcoF,UAAWmO,EAASnW,SAAW1C,QAAQwY,IAAxF,UA6FhB,IAKe3V,gBALS,SAAAC,GACpB,MAAO,CACHyE,KAAMzE,EAAME,SAGLH,EA5Ff,SAAoBnD,GAAQ,IAEhB6H,EAAS7H,EAAT6H,KAFe,EAIWvG,oBAAS,GAJpB,mBAIhBwY,EAJgB,KAILC,EAJK,OAKCzY,mBAAS,MALV,mBAKhBiQ,EALgB,KAKVyI,EALU,OAMC1Y,mBAAS,IANV,mBAMhBlB,EANgB,KAMV6Z,EANU,OAOS3Y,mBAAS,WAPlB,mBAOhBL,EAPgB,KAONiY,EAPM,KAgCjBL,EAAa,SAACtH,GAIhByI,EAAQzI,EAAK,IACTuI,GACAC,GAAcD,IAIhBI,EAAkB,WACpBH,GAAcD,IAGlB,OACI,yBAAKvZ,GAAG,yBACHuZ,GAAa,kBAAC,GAAD,CACVzK,YAAayK,EACbrK,kBAAmByK,EACnB7B,QACI,kBAACO,GAAD,CACIC,WAAYA,EACZhR,KAAMA,EACNiR,OAAQvH,EACRnR,KAAMA,EACN2Y,MAAO9X,EACP+X,sBAnCU,WAC1BgB,EAAQ,OAmCQf,mBAhCO,SAAC7Y,EAAKmG,GAC7B0T,EAAQ7Z,GACR8Y,EAAY3S,IA+BIX,aAlDK,WACrBxB,QAAQC,IAAI,WAAWjE,EAAKa,EAASsQ,GACrC,IAAMxN,EAAK,IAAIyN,SACfzN,EAAG0N,OAAO,OAAQF,GAClBxN,EAAG0N,OAAO,OAAOrR,GACjB2D,EAAG0N,OAAO,WAAWxQ,GACrBjB,EAAM+F,SD9GoB,SAAChC,GAC/B,OAAM,SAACgC,GACH9B,IAAM7D,KAAK,mBAAmB2D,EAAG,CAC7BoE,QAAS,CACL,SAAUxE,MAGbO,MAAK,SAAAC,GACFC,QAAQC,IAAI,oBAAoBF,EAASG,MACzC,IAAM6V,EAAUhW,EAASG,KACzByB,EAAS4S,GAAWwB,OACrBnV,OAAM,SAAAC,GAAG,OAAIb,QAAQC,IAAIY,OCmGjBmV,CAAmBrW,IAClCmW,IACAF,EAAQ,MACRC,EAAQ,IACRf,EAAY,gBA2CR,yBAAK3Y,GAAG,aACJ,kBAACwB,EAAA,EAAD,CAAQxB,GAAG,cAAcyB,IAAK6F,EAAK0R,aACnC,2BAAOhZ,GAAG,aAAagG,KAAK,OAAOE,YAAW,6BAAwBoB,EAAK3F,SAA7B,MAA2CQ,UAAQ,EAAC3B,QAASmZ,KAE/G,6BACA,yBAAK3Z,GAAG,eACJ,kBAAC,KAAD,CAAU+Q,OAAQuH,IACT,gBAAGnH,EAAH,EAAGA,aAAcC,EAAjB,EAAiBA,cAAjB,OACG,iCACA,wBAASD,IACL,0BAAWC,KACX,yBAAKpR,GAAG,cACR,yBAAKyB,IAAKmE,EAAQ,KAA0CrD,IAAI,cADhE,mBC5KhC,IAMeK,gBANS,SAAAC,GACpB,MAAO,CACHiX,MAAOjX,EAAME,MAAM+W,MACnBhZ,OAAQ+B,EAAME,MAAMnC,OAGbgC,EA3Bf,SAAkBnD,GAAQ,IACdqa,EAAkBra,EAAlBqa,MAAOhZ,EAAWrB,EAAXqB,OACf+C,QAAQC,IAAIgW,EAAM,mBAClB,IAAMla,EAAmB,SAACI,EAAIgG,GAC1BnC,QAAQC,IAAI,aAAa9D,EAAGgG,GAC5BvG,EAAM+F,SFyCiB,SAACxF,EAAGgG,EAAKxC,GACpC,OAAM,SAACgC,GACH9B,IAAMqW,IAAN,uBAA0B/T,EAA1B,YAAkChG,GAAKwD,EAAG,CACtCoE,QAAS,CACL,SAAUxE,MAGbO,MAAK,SAAAC,GACFC,QAAQC,IAAI,uBAAuBF,EAASG,MAC5C,IAAMiW,EAAUpW,EAASG,KACzByB,EAbL,CAAEQ,KAAM,cAAe+B,QAaEiS,OACrBvV,OAAM,SAAAC,GAAG,OAAIb,QAAQC,IAAIY,OEpDjBuV,CAAgBja,EAAGgG,KAEtC,OACI,oCACK8T,QADL,IACKA,OADL,EACKA,EAAO5W,KAAI,SAAArD,GACR,OAAO,kBAAC,EAAD,CACHsD,IAAKtD,EAAKe,IACVf,KAAMA,EACNiB,OAAQA,EACRlB,iBAAkBA,WCPvBsa,OATf,WACI,OACI,6BACI,kBAAC,GAAD,MACA,kBAAC,GAAD,QC8BGtX,sBAjCf,SAAsBnD,GAElB,IAAM0a,EAAuB,SAACta,GAC1BgE,QAAQC,IAAIjE,EAAK,wBACjBJ,EAAM+F,SJFH,CAAEQ,KAAM,sBAAuB+B,QIEFlI,KAG9Bua,EAAuB,SAACva,GAC1BgE,QAAQC,IAAIjE,EAAK,wBACjBJ,EAAM+F,SAAS4S,GAAWvY,KAqB9B,OAXAyQ,qBAAU,WAEN,OARAzM,QAAQC,IAAI,qCAEZxE,EAAOwW,GAAG,aAAaqE,GACvB7a,EAAOwW,GAAG,mBAAmBsE,GAKtB,WACHvW,QAAQC,IAAI,2BACZxE,EAAOgW,IAAI,aAAc6E,GACzB7a,EAAOgW,IAAI,mBAAoB8E,MAGrC,IAGM,QCwBZ,IAMexX,gBANS,SAAAC,GACpB,MAAO,CACHyE,KAAMzE,EAAME,SAILH,EAzCf,SAAanD,GAAO,IAGV6H,EAAS7H,EAAT6H,KAMR,OAJAgJ,qBAAU,WACRhR,EAAO+V,KAAK,SAAU,CAAEvU,OAAQwG,EAAK1G,QACpC,CAAC0G,EAAK1G,MAGP,kBAAC,IAAD,KACE,6BACE,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,MAEE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOyZ,OAAK,EAAC3C,KAAK,IAAI4C,UAAWC,IACjC,kBAAC,IAAD,CAAO7C,KAAK,eAAe4C,UAAW3V,IACtC,kBAAC,IAAD,CAAO+S,KAAK,kBAAkB4C,UAAWE,KACzC,kBAAC,IAAD,CAAO9C,KAAK,gBAAgB4C,UAAWG,KACvC,kBAAC,IAAD,CAAO/C,KAAK,iBAAiB4C,UAAWI,KACxC,kBAAC,IAAD,CAAOhD,KAAK,kBAAkB4C,UAAW7D,KACzC,kBAAC,IAAD,CAAOiB,KAAK,cAAc4C,UAAWK,KACrC,kBAAC,IAAD,CAAOjD,KAAK,uBAAuB4C,UAAWM,KAC9C,kBAAC,IAAD,CAAOlD,KAAK,oBAAoB4C,UAAWM,KAC3C,kBAAC,IAAD,CAAOlD,KAAK,gBAAgB4C,UAAWJ,W,oBCnD7CW,GAAoB,CACxBja,IAAK,GACLe,SAAU,GACViD,MAAO,GACPoU,WAAW,GACXzQ,cAAe,GACf+I,QAAS,GACTwI,MAAO,IAwGMgB,GArGM,WAAwC,IAAvCjY,EAAsC,uDAA9BgY,GAAmBE,EAAW,uCAC1D,OAAQA,EAAO/U,MAEb,IAAK,gBACH,OAAOgV,OAAOC,OAAO,GAAIpY,EAAO,CAC9BjC,IAAKma,EAAOhT,QAAQnH,IACpBe,SAAUoZ,EAAOhT,QAAQpG,SACzBiD,MAAOmW,EAAOhT,QAAQnD,MACtBoU,WAAY+B,EAAOhT,QAAQrG,cAC3B6G,cAAewS,EAAOhT,QAAQQ,cAC9B+I,QAASyJ,EAAOhT,QAAQuJ,QACxBwI,MAAOiB,EAAOhT,QAAQ+R,QAI1B,IAAK,eACH,IAAM/V,EAAOlB,EAAMyO,QAAQpO,KAAI,SAAAgP,GAC3B,OAAGA,EAAOlF,KAAKpM,MAAQma,EAAOhT,QAAQnH,KACpCsR,EAAOzF,MAAM/G,KAAKqV,EAAOhT,QAAQ0E,OAC1ByF,GAGAA,KAIb,OAAO8I,OAAOC,OAAO,GAAGpY,EAAM,CAAEyO,QAASvN,IAG3C,IAAK,cACH,IAAMA,EAAOlB,EAAMyO,QAAQpO,KAAI,SAACgP,GAC9B,OAAIA,EAAOlF,KAAKpM,MAAQma,EAAOhT,QAAQnH,KACrCsR,EAAOzF,MAAM/G,KAAKqV,EAAOhT,QAAQ0E,OAC1ByF,GAEAA,KAGX,OAAO8I,OAAOC,OAAO,GAAIpY,EAAO,CAAEyO,QAASvN,IAG7C,IAAK,qBACH,OAAOiX,OAAOC,OAAO,GAAIpY,EAAO,CAAEyO,QAASyJ,EAAOhT,UAGpD,IAAK,wBACH,IAAMmT,EAAgBrY,EAAMyO,QAAQhE,QAAO,SAAA4E,GAAM,OAAIA,EAAOlF,KAAKpM,MAAQma,EAAOhT,QAAQnH,OACxF,OAAOoa,OAAOC,OAAO,GAAGpY,EAAM,CAAEyO,QAAS4J,IAG3C,IAAK,wBACH,IAAMnX,EAAOlB,EAAMyO,QAAQpO,KAAI,SAAAgP,GAC7B,OAAGA,EAAOlF,KAAKpM,MAAQma,EAAOhT,QAAQnH,KACpCsR,EAAOnH,OAASgQ,EAAOhT,QAAQgD,OAC/BmH,EAAOrH,SAAWkQ,EAAOhT,QAAQ8C,SAC1BqH,GAGAA,KAGX,OAAO8I,OAAOC,OAAO,GAAGpY,EAAM,CAAEyO,QAASvN,IAG3C,IAAK,wBACH,IAAMoX,EAAgBtY,EAAMyO,QAAQhE,QAAO,SAAA4E,GAAM,OAAIA,EAAOlF,KAAKpM,MAAQma,EAAOhT,QAAQnH,OACxF,OAAOoa,OAAOC,OAAO,GAAGpY,EAAM,CAAEyO,QAAS6J,IAG3C,IAAK,gBACH,IAAMC,EAAevY,EAAMyO,QAAQhE,QAAO,SAAA4E,GAAM,OAAIA,EAAOlF,KAAKpM,MAAQma,EAAOhT,QAAQnH,OACvF,OAAOoa,OAAOC,OAAO,GAAGpY,EAAM,CAAEyO,QAAS8J,IAG3C,IAAK,eACH,IAAMC,EAAe,CAACN,EAAOhT,SAASuT,OAAOzY,EAAMiX,OACnD,OAAOkB,OAAOC,OAAO,GAAIpY,EAAO,CAAEiX,MAAOuB,IAG3C,IAAK,cACH,IAAMA,EAAeN,EAAOhT,QAC5B,OAAOiT,OAAOC,OAAO,GAAIpY,EAAO,CAAEiX,MAAOuB,IAG3C,IAAK,kBACH,OAAOL,OAAOC,OAAO,GAAIpY,EAAO,CAC9BjC,IAAK,GACLe,SAAU,GACViD,MAAO,GACPoU,WAAW,GACXuC,aAAc,GACdjK,QAAQ,GACRwI,MAAO,KAGX,QACE,OAAO,gBAAKjX,KC7FH2Y,GAXa,WAAmC,IAAlC3Y,EAAiC,uDAFzC,KAE8BkY,EAAW,uCAC1D,OAAOA,EAAO/U,MACV,IAAK,cACD,OAAe+U,EAAOhT,QAE1B,QACI,OAAOlF,I,UCRb4Y,GAAsB,GA2DbC,GAzDO,WAA4C,IAA1C7Y,EAAyC,uDAAjC4Y,GAAqBV,EAAY,uCAC7D,OAAOA,EAAO/U,MACV,IAAK,oBACD,OAAa+U,EAAOhT,QAExB,IAAK,mBAUL,IAAK,qBAUL,IAAK,qBACD,OAAOlF,EAAMK,KAAI,SAAAoE,GACb,OAAGA,EAAK1G,MAAMma,EAAOhT,QAAQnH,IAClBoa,OAAOC,OAAO,GAAG3T,EAAMyT,EAAOhT,SAG9BiT,OAAOC,OAAO,GAAG3T,MAIpC,IAAK,qBACD,OAAOzE,EAAMyK,QAAO,SAAAhG,GAAI,OAAIA,EAAK1G,MAAQma,EAAOhT,QAAQnH,OAE5D,IAAK,oBACD,OAAOiC,EAAMK,KAAI,SAAAoE,GACb,OAAGA,EAAK1G,MAAMma,EAAOhT,QAAQnH,IAClBoa,OAAOC,OAAO,GAAG3T,EAAMyT,EAAOhT,SAG9BiT,OAAOC,OAAO,GAAG3T,MAIpC,IAAK,sBACD,MAAe,GAEnB,QACI,OAAO,aAAIzE,KCtDjB8Y,GAAmB,CACrB,eAAiB,KACjB,gBAAiB,MAiBNC,GAdK,WAAuC,IAAtC/Y,EAAqC,uDAA7B8Y,GAAkBZ,EAAW,uCACtD,OAAOA,EAAO/U,MACV,IAAK,iBACD,MAAO,CACH,qBAAsB+U,EAAOhT,QAAQhE,KAAKuN,QAAQtE,KAClD,sBAAuB+N,EAAOhT,QAAQhE,KAAKuN,QAAQ7E,OAG3D,QACI,OAAO,gBAAI5J,KCdjBgZ,GAAmB,CACrBnI,OAAQ,KACRoI,QAAQ,EACRrE,eAAe,EACflD,eAAe,GA+BJwH,GA5BK,WAAyC,IAAvClZ,EAAsC,uDAA9BgZ,GAAkBd,EAAY,uCACxD,OAAOA,EAAO/U,MACV,IAAK,cACD,OAAOgV,OAAOC,OAAO,GAAIpY,EAAO,CAAC6Q,OAAQqH,EAAOhT,UAEpD,IAAK,gBACD,OAAOiT,OAAOC,OAAO,GAAGpY,EAAO,CAACiZ,OAAQf,EAAOhT,UAEnD,IAAK,mBACD,OAAOiT,OAAOC,OAAO,GAAKpY,EAAO,CAACiZ,OAAQf,EAAOhT,QAASwM,cAAewG,EAAOhT,UAEpF,IAAK,kBACD,OAAOiT,OAAOC,OAAO,GAAIpY,EAAO,CAACiZ,OAAOf,EAAOhT,QAAS0P,cAAesD,EAAOhT,UAElF,IAAK,mBACD,OAAOiT,OAAOC,OAAO,GAAIpY,EAAO,CAC5B6Q,OAAQ,KACRoI,QAAQ,EACRrE,eAAe,EACflD,eAAe,IAGvB,QACI,OAAO1R,IC9BbmZ,GAAoB,GAgBXC,GAdK,WAAwC,IAAvCpZ,EAAsC,uDAA9BmZ,GAAmBjB,EAAW,uCACvD,OAAOA,EAAO/U,MACV,IAAK,mBACD,OAAa+U,EAAOhT,QAExB,IAAK,sBACD,MAAO,CAACgT,EAAOhT,SAASuT,OAAOzY,GAEnC,QACI,OAAO,aAAIA,KCYRqZ,GAZQ,WASnB,OARcC,aAAYC,aAAgB,CACtCrZ,MAAO+X,GACP1N,aAAcoO,GACdnQ,aAAcqQ,GACdtP,KAAMwP,GACNtJ,KAAMyJ,GACNjZ,YAAauZ,KACdC,aAAgBC,QCTjBC,I,OAAQN,MAEdM,GAAMhX,UbGI,SAACA,GACH9B,IAAMuO,IAAI,+BACLtO,MAAK,SAAAC,GACFC,QAAQC,IAAI,wBAAwBF,EAASG,MAC7C,IAAM0Y,EAAW7Y,EAASG,KAC1ByB,EATL,CAAEQ,KAAM,mBAAoB+B,QASC0U,OACzBhY,OAAM,SAAAC,GAAG,OAAIb,QAAQC,IAAIY,SaPpCrB,aAAaC,QAAQ,UACvBkZ,GAAMhX,U9C0DC,SAACA,GACN9B,IACGuO,IAAI,iBAAkB,CAAErK,QAAS,CAAE,SAAUxE,KAC7CO,MAAK,SAACC,GACLC,QAAQC,IAAI,sBAAuBF,EAASG,MAC5C,IAAMA,EAAOH,EAASG,KACnBA,EAAKC,eAAe,WACrBX,aAAaqE,WAAW,SACxBzD,MAAM,mBACNK,OAAOC,SAASoD,KAAO,gBAEvBnC,EAhBgB,SAACzB,GACzB,MAAO,CAAEiC,KAAM,gBAAiB+B,QAAShE,GAexB2Y,CAAW3Y,OAGvBU,OAAM,SAACC,GAAD,OAASb,QAAQC,IAAIY,S8CrElC8X,GAAMG,WAAU,WACd9Y,QAAQC,IAAI0Y,GAAMI,eAGpB,IAAMC,GACJ,kBAAC,IAAD,CAAUL,MAAOA,IACf,kBAAC,GAAD,OAIJM,IAASC,OAAOF,GAAKG,SAASC,eAAe,W","file":"static/js/main.e0b7aa04.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.f895a17f.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF42lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDggNzkuMTY0MDM2LCAyMDE5LzA4LzEzLTAxOjA2OjU3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMCAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIwLTA3LTIwVDEyOjUzOjM1KzA1OjMwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMC0wNy0yMFQxMzowMToyMCswNTozMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMC0wNy0yMFQxMzowMToyMCswNTozMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1YjFkMWUwOS0xZWEwLTM4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\"","module.exports = __webpack_public_path__ + \"static/media/imageUpload.73a9f061.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF42lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDggNzkuMTY0MDM2LCAyMDE5LzA4LzEzLTAxOjA2OjU3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMCAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIwLTA3LTIxVDIyOjQ3OjQ4KzA1OjMwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMC0wNy0yMVQyMzoxMDowOCswNTozMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMC0wNy0yMVQyMzoxMDowOCswNTozMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1Yzc5MzU4Ni1kMTc3LWM1NGQtYjUwZi1hMWEyMjg3MmNhYjQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ZjM1ZDI3NjgtYjgxZC01ODRlLWE0ZDEtMmNhMmM0M2Q4NjExIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ZjM1ZDI3NjgtYjgxZC01ODRlLWE0ZDEtMmNhMmM0M2Q4NjExIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpmMzVkMjc2OC1iODFkLTU4NGUtYTRkMS0yY2EyYzQzZDg2MTEiIHN0RXZ0OndoZW49IjIwMjAtMDctMjFUMjI6NDc6NDgrMDU6MzAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4wIChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NWM3OTM1ODYtZDE3Ny1jNTRkLWI1MGYtYTFhMjI4NzJjYWI0IiBzdEV2dDp3aGVuPSIyMDIwLTA3LTIxVDIzOjEwOjA4KzA1OjMwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjEuMCAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+4cNhygAACAZJREFUeJztnVFy4zgMBZGpvf+Vsx9b3FEcm5YsgngAug8wIwKvBVKx5a/v72+D5UQV9Svo/y3LP9EXUAClO8yza0GaGyDINZRkOAvS3ABB3pNRincc14QsExDkNxWFmPG4XoQ5gCD/0U2KGUyXA90FQYw5oz5tRekoCFJcp+1U6SQIYqyh1VTpIAhi+NBClMqCIMYeSotSURDEiKGkKJUEQQwNSonyJ/oCFoEcepToSfYJUqIJhUk/TbIKghi5SCtKxi0WcuQlXe8yTZB0xZ3w6Z20Qg1STZMsgmQMhkcA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\"","module.exports = __webpack_public_path__ + \"static/media/login-logo-blk.6421f490.png\";","module.exports = __webpack_public_path__ + \"static/media/calling.d2cab8e3.gif\";","import io from 'socket.io-client'\r\n//import { SOCKET_URL } from 'config'\r\n\r\n//let server = 'http://localhost:7303'\r\nlet server = '/'\r\nconst socket = io(server) \r\n\r\nexport default socket\r\n","import React from 'react'\r\nimport Popover from '@material-ui/core/Popover'\r\nimport { AiOutlineDelete } from 'react-icons/ai'\r\nimport './DeletePostPopUp.css'\r\n\r\nexport default function DeletePostPopUp(props) {\r\n  \r\n  const { anchorEl, handleClose, handleDeletePost, post} = props\r\n\r\n  const open = Boolean(anchorEl)\r\n  const id = open ? 'DeletePostPopUp' : undefined\r\n\r\n  return (\r\n    <div>\r\n      <Popover\r\n        id={id}\r\n        open={open}\r\n        anchorEl={anchorEl}\r\n        onClose={handleClose}\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'left',\r\n        }}\r\n        transformOrigin={{\r\n          vertical: 'top',\r\n          horizontal: 'right',\r\n        }}\r\n      >\r\n        <div id='postDelete-pop-container'>\r\n          <p>Are you sure ?</p>\r\n          <button onClick={\r\n            () => {\r\n                    let postId = null\r\n                    if(post.postType === 'Public'){\r\n                        postId = post.publicPostId\r\n                    }else{\r\n                        postId = post._id\r\n                    }\r\n                    handleDeletePost(postId,post.postType)\r\n                    handleClose()\r\n                  }\r\n          }><AiOutlineDelete/></button>\r\n        </div>\r\n      </Popover>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState, Fragment } from 'react'\r\nimport moment from 'moment'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport Select from '@material-ui/core/Select'\r\nimport { BsLockFill } from 'react-icons/bs'\r\nimport { FaUserFriends } from 'react-icons/fa'\r\nimport { MdPublic } from 'react-icons/md'\r\nimport { GrLike } from 'react-icons/gr'\r\nimport { GrDislike } from 'react-icons/gr'\r\nimport { GoCommentDiscussion } from 'react-icons/go'\r\nimport { FiEdit } from 'react-icons/fi'\r\nimport { AiOutlineDelete } from 'react-icons/ai'\r\nimport './PostCardItem.css'\r\nimport DeletePostPopUp from './DeletePostPopUp'\r\n\r\nfunction PostCardItem(props) {\r\n    const { post, userId, handleDeletePost } = props\r\n    const [openEdit, setOpenEdit] = useState(false)\r\n    const [anchorEl, setAnchorEl] = useState(null)\r\n\r\n    const deletePostPop = (e) => {\r\n        setAnchorEl(e.currentTarget)\r\n    }\r\n    const handleDelPostPopClose = () => {\r\n        setAnchorEl(null)\r\n    }\r\n    const handleEditPostModal= () => {\r\n        setOpenEdit(!openEdit)\r\n    }\r\n    let editPost = null \r\n    if(post?.createdBy._id === userId){\r\n        editPost = (\r\n            <Fragment>\r\n                <button id='postCardItem-edit' onClick={handleEditPostModal}><FiEdit/></button>\r\n                <button id='postCardItem-delete' onClick={\r\n                    (e) => {deletePostPop(e)}}><AiOutlineDelete/></button>\r\n                    {anchorEl && <DeletePostPopUp \r\n                            anchorEl={anchorEl} \r\n                            post= {post} \r\n                            handleDeletePost={handleDeletePost}\r\n                            handleClose= {handleDelPostPopClose}\r\n                        />}\r\n            </Fragment>\r\n        )\r\n    }\r\n    \r\n    return(\r\n        <div id='postCardItem-container'>\r\n            <div id='postCardItem-title'>\r\n                <Avatar id='postCardItem-avatar' src={post.createdBy.profilePicUrl} />\r\n                <div id='postCardItem-userDate'>\r\n                    <h4>{post.createdBy.username}</h4>\r\n                    <p>{moment(post.createdAt).format('LLL')}</p>\r\n                </div>\r\n                <div id='postCardItem-miniAct'>\r\n                    <FormControl id=\"postCardItem-control\">\r\n                        <Select\r\n                        disableUnderline={true}\r\n                        value={post.postType}\r\n                        readOnly\r\n                        displayEmpty\r\n                        >\r\n                            <MenuItem id='\"postCardItem-select' value={'Private'}><BsLockFill/></MenuItem>\r\n                            <MenuItem id='\"postCardItem-select' value={'Friends'}><FaUserFriends/></MenuItem>\r\n                            <MenuItem id='\"postCardItem-select' value={'Public'}><MdPublic/></MenuItem>\r\n                        </Select>\r\n                    </FormControl>\r\n                    {editPost}\r\n                </div>\r\n            </div>\r\n            <hr/>\r\n            <div id='postCardItem-post'>\r\n                {post.uploadPath && <img src={post.uploadPath} alt={post._id}/>}\r\n                <p>{post.post}</p>\r\n            </div>\r\n            <hr/>\r\n            <div id='postCardItem-action'>\r\n                <button ><GrLike/><span>{post.isLiked.length}</span></button>\r\n                <button><GrDislike/><span>{post.isDisliked.length}</span></button>\r\n                <button><GoCommentDiscussion/><span>{post.comments.length}</span></button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PostCardItem\r\n","import React from 'react'\r\nimport PostCardItem from '../reusables/PostCardItem'\r\nimport { connect } from 'react-redux'\r\n\r\nfunction Home(props) {\r\n    const { publicPosts, userId } = props\r\n    return (\r\n        <div>\r\n            <h1 style={{color: 'white'}}>Welcome to Giggle-DisBot</h1>\r\n            {publicPosts?.map(post => {\r\n                return <PostCardItem key={post._id} post={post} userId={userId}/>\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        publicPosts: state.publicPosts,\r\n        userId: state.login._id\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Home)","import axios from 'axios'\r\nconst getToken = localStorage.getItem('token')\r\n\r\n//------------------register\r\nexport const startRegister = (fd, redirect ,regEnable) => {\r\n  return () => {\r\n    axios\r\n      .post(`/users/register`, fd)\r\n      .then((response) => {\r\n        console.log('[PROMISE-login]', response.data)\r\n        const res = response.data\r\n        // if (res.hasOwnProperty('errors')) {\r\n        //   alert('invalid/format username or password')\r\n        // } else \r\n        if (res.hasOwnProperty('keyPattern')) {\r\n          if (res.keyPattern.email === 1) {\r\n            alert('email already exists')\r\n            regEnable()\r\n          } else {\r\n            alert('username already exists')\r\n            regEnable()\r\n          }\r\n        } else {\r\n          alert('Successfully registered')\r\n          regEnable()\r\n          redirect()\r\n        }\r\n      })\r\n      .catch((err) => console.log('ERROR-login', err))\r\n  }\r\n}\r\n\r\n//------------------------login\r\n\r\nexport const startLogin = (fd, redirect) => {\r\n  return () => {\r\n    axios\r\n      .post('/users/login', fd)\r\n      .then((response) => {\r\n        console.log('[PROMISE-token-login]', response.data)\r\n        if (response.data.hasOwnProperty('error')) {\r\n          alert(response.data.error)\r\n        } else {\r\n          const authToken = response.data.token\r\n          localStorage.setItem('token', authToken)\r\n          alert('Login Successful')\r\n          redirect()\r\n          window.location.reload()\r\n        }\r\n      })\r\n      .catch((err) => console.log(err))\r\n  }\r\n}\r\n\r\n//-----------------logout\r\nexport const clearUser = () => {\r\n  return { type: 'CLEAR_USER_DATA' }\r\n}\r\nexport const startLogout = () => {\r\n  return (dispatch) => {\r\n    localStorage.removeItem('token')\r\n    dispatch(clearUser())\r\n    window.location.href = '/'\r\n    //window.location.reload()\r\n  }\r\n}\r\n\r\n//-------------------account\r\nexport const setAccount = (data) => {\r\n  return { type: 'SET_USER_DATA', payload: data }\r\n}\r\n\r\nexport const startAccount = () => {\r\n  return (dispatch) => {\r\n    axios\r\n      .get('/users/account', { headers: { 'x-auth': getToken } })\r\n      .then((response) => {\r\n        console.log('[PROMISE-login-acc]', response.data)\r\n        const data = response.data\r\n        if(data.hasOwnProperty('errors')){\r\n          localStorage.removeItem('token')\r\n          alert('session expired')\r\n          window.location.href = '/users/login'\r\n        }else{\r\n          dispatch(setAccount(data))\r\n        }\r\n      })\r\n      .catch((err) => console.log(err))\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { startLogin } from '../../redux/actions/loginsAction'\r\nimport { Link } from 'react-router-dom'\r\nimport '../../styles/login.css'\r\nclass Login extends Component {\r\n  state = {\r\n    email: '',\r\n    password: '',\r\n    show: false,\r\n  }\r\n  handleChange = (e) => {\r\n    this.setState({ [e.target.name]: e.target.value })\r\n  }\r\n  handleShow = () => {\r\n    this.setState((prevState) => ({\r\n      show: !prevState.show,\r\n    }))\r\n  }\r\n  handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    const redirect = () => {\r\n      return this.props.history.push('/')\r\n    }\r\n    const { email, password } = this.state\r\n    const formData = {\r\n      email,\r\n      password,\r\n    }\r\n    console.log(formData)\r\n    this.props.dispatch(startLogin(formData,redirect))\r\n  }\r\n  render() {\r\n    return (\r\n      <div className='login-container'>\r\n        <div className='login-logo'>\r\n          <img className={'login-logo-img'} src={require('../../styles/icons/login-logo-blk.png')} alt='logo' />\r\n        </div>\r\n        <form className='login-form' onSubmit={this.handleSubmit}>\r\n          <div className='form-control'>\r\n            <label htmlFor='email'>Email</label>\r\n            <input\r\n              type='email'\r\n              name='email'\r\n              id='email'\r\n              value={this.state.email}\r\n              onChange={this.handleChange}\r\n              placeholder='Enter your email'\r\n            />\r\n          </div>\r\n\r\n          <div className='form-control'>\r\n            <label htmlFor='password'>Password</label>\r\n            <input\r\n              type={this.state.show ? 'text' : 'password'}\r\n              name='password'\r\n              id='password'\r\n              value={this.state.password}\r\n              onChange={this.handleChange}\r\n              placeholder='Password'\r\n            />\r\n          </div>\r\n\r\n          <div className='checkbox-control'>\r\n            <div>\r\n              <input\r\n                type='checkbox'\r\n                name='show'\r\n                id='show'\r\n                value={this.state.show}\r\n                onClick={this.handleShow}\r\n              />\r\n              <label htmlFor='show'>Show password</label>\r\n            </div>\r\n            <Link className='link' to='#'>\r\n              Forgot Password ?\r\n            </Link>\r\n          </div>\r\n\r\n          <input className='btn-login' type='submit' value='Sign In' />\r\n          <small>\r\n            Don't have an account?\r\n            <Link className='link' to='/users/register'>\r\n              Sign Up\r\n            </Link>\r\n          </small>\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default  connect()(Login)\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport function NavBar(props){\r\n    let navMoveToEnd = ''\r\n    if(!localStorage.getItem('token')){\r\n        navMoveToEnd = 'navMoveToEnd'\r\n    }\r\n    return (\r\n        <nav className='navbar'>\r\n            <ul className={`navbar-nav ${navMoveToEnd}`}> {props.children} </ul>\r\n        </nav>\r\n    )\r\n}\r\n\r\nexport function NavItem(props){\r\n    return (\r\n        <li className={`nav-item ${props.styleClassLi}`}>\r\n            <Link className={`link-item ${props.styleClass}`} to={props.to} onClick={props.onClick}>{props.name}</Link>\r\n        </li>\r\n    )\r\n}","import axios from 'axios'\r\nconst getToken = localStorage.getItem('token')\r\n\r\nexport const setSearchResult = (data) => {\r\n    return { type: 'SET_SEARCH_RESULT', payload: data}\r\n}\r\n\r\nexport const clearSearchResult = () => {\r\n    return { type: 'CLEAR_SEARCH_RESULT' }\r\n}\r\n\r\nexport const startGetSearch = (fd) => {\r\n    return(dispatch) => {\r\n        axios.post('/users/search',fd,{\r\n            headers: {\r\n                'x-auth':getToken\r\n            }\r\n        })\r\n            .then((response)=> {\r\n                console.log('[PROMISE-search]',response.data)\r\n                const getSearch = response.data\r\n                if(getSearch.hasOwnProperty('errors')){\r\n                    dispatch(clearSearchResult())\r\n                    alert(`${getSearch.message}`)\r\n                }else{\r\n                    dispatch(setSearchResult(getSearch))\r\n                }\r\n            })\r\n            .catch((err) => console.log(err))\r\n    }\r\n}\r\n\r\n//-----------------sent request\r\nexport const sendReq = (data) => {\r\n    return { type: 'SET_SENT_REQUEST', payload: data }\r\n}\r\n\r\nexport const startSendRequest = (id,fd) => {\r\n    return (dispatch) => {\r\n        axios.post(`/users/search/sendRequest/${id}`,fd,{\r\n            headers: { \r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then((response) => {\r\n                console.log('[PROMISE-search-send-request]', response.data)\r\n                const resData = response.data\r\n                if(resData.hasOwnProperty('errors')){\r\n                    alert(resData.message)\r\n                }\r\n                else{\r\n                    dispatch(sendReq(resData))\r\n                }\r\n            })\r\n        }\r\n}\r\n\r\n//------------------ cancel request\r\nexport const cancelReq = (data) => {\r\n    return { type: 'SET_CANCEL_REQUEST', payload: data }\r\n}\r\n\r\nexport const startCancelRequest = (id,fd) => {\r\n    return (dispatch) => {\r\n        axios.post(`/users/search/cancelRequest/${id}`,fd,{\r\n            headers: { \r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then((response) => {\r\n                console.log('[PROMISE-search-cancel-request]',response.data)\r\n                const resData = response.data\r\n                if(resData.hasOwnProperty('errors')){\r\n                    alert(resData.message)\r\n                }\r\n                else{\r\n                    dispatch(cancelReq(resData))\r\n                }\r\n            })\r\n        }\r\n}\r\n\r\n//accept request\r\nexport const acceptReq = (data) => {\r\n    return { type: 'SET_ACCEPT_REQUEST', payload: data }\r\n}\r\n\r\nexport const startAcceptRequest = (id,fd) => {\r\n    return (dispatch) => {\r\n        axios.post(`/users/search/acceptRequest/${id}`,fd,{\r\n            headers: { \r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then((response) => {\r\n                console.log('[PROMISE-search-accept-request]',response.data)\r\n                const resData = response.data\r\n                if(resData.hasOwnProperty('errors')){\r\n                    alert(resData.message)\r\n                }\r\n                else{\r\n                    dispatch(acceptReq(resData))\r\n                }\r\n            })\r\n        }\r\n}\r\n\r\n\r\n//reject request\r\nexport const rejectReq = (data) => {\r\n    return { type: 'SET_REJECT_REQUEST', payload: data }\r\n}\r\n\r\nexport const startRejectRequest = (id,fd) => {\r\n    return (dispatch) => {\r\n        axios.post(`/users/search/rejectRequest/${id}`,fd,{\r\n            headers: { \r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then((response) => {\r\n                console.log('[PROMISE-search-reject-request]',response.data)\r\n                const resData = response.data\r\n                if(resData.hasOwnProperty('errors')){\r\n                    alert(resData.message)\r\n                }\r\n                else{\r\n                    dispatch(rejectReq(resData))\r\n                }\r\n            })\r\n        }\r\n}\r\n\r\n\r\n//remove friend\r\nexport const removeFriend = (data) => {\r\n    return { type: 'SET_REMOVE_FRIEND', payload: data }\r\n}\r\n\r\nexport const startRemoveFriend = (id,fd) => {\r\n    return (dispatch) => {\r\n        axios.post(`/users/search/removeFriend/${id}`,fd,{\r\n            headers: { \r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then((response) => {\r\n                console.log('[PROMISE-search-remove-friend]',response.data)\r\n                const resData = response.data\r\n                if(resData.hasOwnProperty('errors')){\r\n                    alert(resData.message)\r\n                }\r\n                else{\r\n                    dispatch(removeFriend(resData))\r\n                }\r\n            })\r\n        }\r\n}","import React, { useState } from 'react'\r\nimport Drawer from '@material-ui/core/Drawer'\r\nimport Badge from '@material-ui/core/Badge'\r\nimport { BsSearch } from 'react-icons/bs'\r\nimport { FiMail } from 'react-icons/fi'\r\nimport { FaSignOutAlt } from 'react-icons/fa'\r\nimport { BsChatDots } from 'react-icons/bs'\r\nimport { FaUserFriends } from 'react-icons/fa'\r\nimport PostIcon from './_reuse/post.png'\r\nimport logo from './_reuse/logo.png'\r\nimport burger from './_reuse/burger.png'\r\nimport './AppBar.css'\r\nimport { NavItem } from './_reuse/NavComponents'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nfunction AppBar(props) {\r\n    const [state, setState] = useState(false)\r\n    const toggleDrawer = () => () => {\r\n        setState(!state)\r\n    }\r\n    const {handleLogout} = props\r\n    const history  = useHistory()\r\n    return (\r\n        <div className='app-bar-contain'>\r\n            <nav>\r\n                <img src={logo} alt='chatbot' className='logo-appbar' onClick={() => {\r\n                    history.push('/')\r\n                }}/>\r\n                <button><img src={burger} alt='menu' className='burger-menu' onClick={toggleDrawer(true)}/></button>\r\n                <Drawer anchor={'top'} open={state} onClose={toggleDrawer()} >\r\n                    <div className='appbar-drawer'>\r\n                        <NavItem \r\n                        to='/users/notifications' \r\n                        styleClass='badge'\r\n                        styleClassLi='badge-li appBarLi'\r\n                        name={\r\n                                <Badge badgeContent={0} color=\"secondary\">\r\n                                    <FiMail />\r\n                                </Badge>\r\n                            }\r\n                        onClick={toggleDrawer()}\r\n                        />\r\n                        <NavItem to='/users/posts' name={<img src={PostIcon} alt='postIcon'/>} styleClass='post-icon-nav' styleClassLi='appBarLi' onClick={toggleDrawer()}/>\r\n                        <NavItem to='/users/friends' name={<FaUserFriends/>}  styleClassLi='appBarLi' onClick={toggleDrawer()}/>\r\n                        <NavItem to='/users/chat' name={<BsChatDots/>} styleClassLi='appBarLi' onClick={toggleDrawer()}/>\r\n                        <NavItem to='#' name={<FaSignOutAlt/>} styleClass='sign-out' styleClassLi='appBarLi'\r\n                            onClick = {handleLogout} \r\n                            />\r\n                    </div>\r\n                </Drawer>\r\n            </nav>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AppBar\r\n","import React from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\n// ! https://stackoverflow.com/questions/54579730/react-hooks-with-react-router-v4-how-do-i-redirect-to-another-route\r\n\r\n// material-ui \r\nimport InputAdornment from '@material-ui/core/InputAdornment'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Badge from '@material-ui/core/Badge'\r\nimport { BsSearch } from 'react-icons/bs'\r\nimport { FiMail } from 'react-icons/fi'\r\nimport { FaSignOutAlt } from 'react-icons/fa'\r\nimport { BsChatDots } from 'react-icons/bs'\r\nimport { FaUserFriends } from 'react-icons/fa'\r\n\r\nimport { connect } from 'react-redux'\r\nimport { useState } from 'react'\r\nimport { startLogout } from '../../../redux/actions/loginsAction'\r\nimport { NavBar, NavItem } from './_reuse/NavComponents'\r\nimport './Navbar.css'\r\n\r\nimport logo from './_reuse/logo.png'\r\nimport { startGetSearch } from '../../../redux/actions/searchAction'\r\nimport PostIcon from './_reuse/post.png'\r\nimport AppBar from './AppBar'\r\n\r\n\r\nfunction Nav(props) {\r\n\r\n    const history = useHistory()\r\n    const change = localStorage.getItem('token')\r\n    \r\n    const [searchUser,setSearchUser] = useState('')\r\n    const handleChange = (e) =>{\r\n        setSearchUser(e.target.value)\r\n        // console.log('print',e.target.value)\r\n    }\r\n\r\n    const handleSearch = (e) => {\r\n        e.preventDefault()\r\n        const fd = { searchUser }\r\n        props.dispatch(startGetSearch(fd))\r\n        console.log('submit',searchUser)\r\n        history.push('/users/search')\r\n    }\r\n    \r\n    const handleLogout = () => {\r\n        props.dispatch(startLogout())\r\n    }\r\n    \r\n    console.log('nav----',change)\r\n    console.log('USER--------',props.user)\r\n\r\n    return (\r\n        <div className='nav-container'>\r\n            {change ? \r\n            (\r\n                <>\r\n                <div className='navHide'>\r\n                <NavBar >\r\n                    <img src={logo} alt='chatbot' className='logo' onClick={() => {history.push('/')}}/>\r\n                    <form className='search-bar' onSubmit={handleSearch}>\r\n                        <TextField\r\n                            className='search-input'\r\n                            variant='outlined'\r\n                            placeholder='Search...'\r\n                            onChange={handleChange}\r\n                            value={searchUser}\r\n                            InputProps={{\r\n                            startAdornment: (\r\n                                <InputAdornment position='start'>\r\n                                    <BsSearch />\r\n                                </InputAdornment>\r\n                            ),\r\n                            }}\r\n                        />\r\n                    </form>\r\n                    <NavItem \r\n                        to='/users/notifications' \r\n                        styleClass='badge'\r\n                        styleClassLi='badge-li'\r\n                        name={\r\n                                <Badge badgeContent={props.user.notifications.length} color=\"secondary\">\r\n                                    <FiMail />\r\n                                </Badge>\r\n                            }\r\n                    />\r\n                    <NavItem to='/users/posts' name={<img src={PostIcon} alt='postIcon'/>} styleClass='post-icon-nav'/>\r\n                    <NavItem to='/users/friends' name={<FaUserFriends/>} />\r\n                    <NavItem to='/users/chat' name={<BsChatDots/>}/>\r\n                    <NavItem to='#' name={<FaSignOutAlt/>} styleClass='sign-out' onClick = {handleLogout} />\r\n                </NavBar>\r\n                </div>\r\n                <AppBar onClick={handleLogout}/>\r\n                </>\r\n            ):(\r\n                <NavBar >\r\n                    <img src={logo} alt='chatbot' className='logo-out' onClick={() => {history.push('/')}}/>\r\n                    <NavItem to='/users/register' name='Register' styleClassLi='register' styleClass='register-link'/>\r\n                    <NavItem to='/users/login' name='Sign In' styleClassLi='sign-in' styleClass='sign-in-link'/>\r\n                </NavBar>\r\n            )\r\n            }\r\n            <br/><br/>\r\n            <p>{props.user._id && <span>{props.user.username} - {props.user.email}</span>}</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        user: state.login\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Nav)\r\n\r\n","import React, { Fragment, useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Formik, Form, Field } from 'formik'\r\nimport { object, string, ref } from 'yup'\r\nimport { MdVisibility, MdVisibilityOff } from 'react-icons/md'\r\nimport {\r\n  Button,\r\n  TextField,\r\n  Box,\r\n  FormGroup,\r\n  InputAdornment,\r\n  IconButton,\r\n} from '@material-ui/core'\r\n\r\nimport '../../styles/form.css'\r\nimport { startRegister } from '../../redux/actions/loginsAction'\r\n\r\nconst registerSchema = object().shape({\r\n  username: string().required().min(4, 'minimum 4 characters'),\r\n  email: string().email().required(),\r\n  password: string().required().min(6, 'minimum 6 characters'),\r\n  confirmPass: string().oneOf([ref('password')], 'password must match'),\r\n\r\n  //https://til.hashrocket.com/posts/vahuw4phan-check-the-password-confirmation-with-yup\r\n})\r\n\r\n// ! https://dev.to/finallynero/react-form-using-formik-material-ui-and-yup-2e8h\r\n// ! https://medium.com/@kmerandi25/react-form-validation-with-formik-material-ui-and-yup-1cd92eac887\r\n\r\nfunction Register(props) {\r\n  const [showPass, setShowPass] = useState(false)\r\n  const handleShowPass = () => {\r\n    console.log(showPass, 'showPass')\r\n    setShowPass(!showPass)\r\n  }\r\n  const redirect = () => {\r\n    props.history.push('/users/login')\r\n  }\r\n  return (\r\n    <div className='form-container'>\r\n      <Formik\r\n        initialValues={{\r\n          username: '',\r\n          password: '',\r\n          confirmPass: '',\r\n          email: ''\r\n        }}\r\n        validationSchema={registerSchema}\r\n        onSubmit={(values, { setSubmitting }) => {\r\n          const regEnable = () => {\r\n            setSubmitting(false)\r\n          }\r\n          const fd = {\r\n            ...values\r\n          }\r\n          //console.log(fd, setSubmitting)\r\n          props.dispatch(startRegister(fd,redirect,regEnable))\r\n        }}\r\n      >\r\n        {({ isSubmitting, values, errors, touched, isValid }) => (\r\n          <Fragment>\r\n            <div className='form-register'>\r\n              <h1>Register</h1>\r\n              <Form>\r\n                <Box marginBottom={2}>\r\n                  <FormGroup>\r\n                    <Field\r\n                      error={touched.username && Boolean(errors.username)}\r\n                      type='text'\r\n                      name='username'\r\n                      label='Username'\r\n                      variant='outlined'\r\n                      as={TextField}\r\n                      helperText={touched.username && errors.username}\r\n                    />\r\n                  </FormGroup>\r\n                </Box>\r\n                <Box marginBottom={2}>\r\n                  <FormGroup>\r\n                    <Field\r\n                      error={touched.email && Boolean(errors.email)}\r\n                      helperText={touched.email && errors.email}\r\n                      type='email'\r\n                      name='email'\r\n                      label='Email'\r\n                      variant='outlined'\r\n                      as={TextField}\r\n                    />\r\n                  </FormGroup>\r\n                </Box>\r\n                <Box marginBottom={2}>\r\n                  <FormGroup>\r\n                    <Field\r\n                      error={touched.password && Boolean(errors.password)}\r\n                      helperText={touched.password && errors.password}\r\n                      type={showPass ? 'text' : 'password'}\r\n                      name='password'\r\n                      label='Password'\r\n                      variant='outlined'\r\n                      as={TextField}\r\n                      InputProps={{\r\n                        endAdornment: (\r\n                          <InputAdornment position='end'>\r\n                            <IconButton onClick={handleShowPass} className='icon-svg'>\r\n                              {showPass ? (\r\n                                <MdVisibility />\r\n                              ) : (\r\n                                <MdVisibilityOff />\r\n                              )}\r\n                            </IconButton>\r\n                          </InputAdornment>\r\n                        ),\r\n                      }}\r\n                    />\r\n                  </FormGroup>\r\n                </Box>\r\n                <Box marginBottom={2}>\r\n                  <FormGroup>\r\n                    <Field\r\n                      error={touched.confirmPass && Boolean(errors.confirmPass)}\r\n                      helperText={touched.confirmPass && errors.confirmPass}\r\n                      type='password'\r\n                      name='confirmPass'\r\n                      label='Confirm Password'\r\n                      variant='outlined'\r\n                      as={TextField}\r\n                    />\r\n                  </FormGroup>\r\n                </Box>\r\n                <Button\r\n                  variant='contained'\r\n                  color='primary'\r\n                  type='submit'\r\n                  className='btn-register'\r\n                  disabled={isSubmitting || !isValid}\r\n                >\r\n                  SIGN UP\r\n                </Button>\r\n                {/* <pre>{JSON.stringify(values, null, 4)}</pre>\r\n                <pre>{JSON.stringify(isSubmitting, null, 4)}</pre>\r\n                <pre>{JSON.stringify(errors, null, 4)}</pre>\r\n                <pre>{JSON.stringify(isValid, null, 4)}</pre> */}\r\n              </Form>\r\n            </div>\r\n          </Fragment>\r\n        )}\r\n      </Formik>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect()(Register)\r\n","import React, { Fragment } from 'react'\r\nimport './Card.css'\r\n\r\nexport function Card(props) {\r\n    return (\r\n        <div className='card'>\r\n            <ul className='card-wrap'>\r\n                {props.children}\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport function CardList(props) {\r\n    const {\r\n        img,username,_id,isFriend,sendByMe,status, handleRequest, handleAccept, handleReject,handleRemove\r\n    } = props\r\n    return (\r\n        <div className='card-item-wrap'>\r\n            <img className='avatar' src={img} alt={username} />\r\n            <li className='card-item'>{props.username}</li>\r\n            {\r\n                isFriend ?\r\n                <Fragment>\r\n                    {(sendByMe && status==='Pending') ? \r\n                        <button className='btn btn-cancel-friend' onClick={() => {handleRequest(_id,isFriend,sendByMe,status)}}>Cancel Request</button> :\r\n                        <Fragment>\r\n                            {status === 'Accepted' ? \r\n                                <button className='btn btn-remove-friend' onClick={() => {handleRemove(_id)}}>Remove</button> : status=== 'Pending' &&\r\n                                <Fragment>\r\n                                    <button className='btn btn-accept-friend' onClick={() => {handleAccept(_id)}}>Accept</button>\r\n                                    <button className={'btn btn-reject-friend'} onClick={() => {handleReject(_id)}}>Reject</button>\r\n                                </Fragment>\r\n                        }\r\n                        </Fragment>\r\n                    }\r\n                </Fragment> \r\n                :\r\n                <button className='btn' onClick={() => {handleRequest(_id,isFriend)}}>Add Friend</button>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { Card, CardList } from '../reusables/Card'\r\nimport { startSendRequest, startCancelRequest, startAcceptRequest, startRejectRequest, startRemoveFriend } from '../../redux/actions/searchAction'\r\n\r\nfunction Search(props) {\r\n    const handleRequest = (id,isFriend,sendByMe,status) => {\r\n        if(!isFriend){\r\n            props.dispatch(startSendRequest(id))\r\n        }\r\n        else{\r\n            if(sendByMe && status === 'Pending'){\r\n                props.dispatch(startCancelRequest(id))\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleAcceptRequest = (id) => {\r\n        props.dispatch(startAcceptRequest(id))\r\n    }\r\n\r\n    const handleRejectRequest = (id) => {\r\n        props.dispatch(startRejectRequest(id))\r\n    }\r\n\r\n    const handleRemoveFriend = (id) => {\r\n        props.dispatch(startRemoveFriend(id))\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Card >\r\n                {props.results && props.results.map(user => {\r\n                    return <CardList \r\n                                key={user._id} \r\n                                username={user.username}\r\n                                img={user.profilePicUrl}\r\n                                isFriend={user.isFriend}\r\n                                status={user.status && user.status}\r\n                                handleRequest={handleRequest}\r\n                                _id={user._id}\r\n                                sendByMe={user.sendByMe}\r\n                                handleAccept={handleAcceptRequest}\r\n                                handleReject={handleRejectRequest}\r\n                                handleRemove={handleRemoveFriend}\r\n                            />\r\n                })}\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        results: state.searchResult\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Search)\r\n","import React from 'react'\r\n\r\nimport './ChatSearch.css'\r\n\r\nfunction ChatSearch(props) {\r\n    return (\r\n        <div id=\"search-container\">\r\n            <input type=\"text\" placeholder=\"Search\" />\r\n        </div>\r\n    )\r\n}\r\nexport default ChatSearch\r\n","import React from 'react'\r\n\r\nimport './NoChats.css'\r\n\r\nfunction NoChats(){\r\n  return (\r\n    <div id='no-chat-layout'>\r\n      <div id='no-chat-content'>\r\n        <h2>No Chats</h2>\r\n        <p>Currently you have no chats.</p>\r\n        <p>To start a new chat click the button below.</p>\r\n        <button onClick={null}>New Chat</button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default NoChats\r\n","import React from 'react'\r\nimport classNames from 'classnames'\r\nimport moment from 'moment'\r\n\r\nimport './ChatItem.css'\r\n\r\nfunction ChatItem(props) {\r\n\r\n    const { chat, isActive, onChatItemSelected } = props\r\n    // const [latestMsgDate, setLatestMsgDate] = useState('')\r\n    // const [latestMsg, setLatestMsg] = useState('')\r\n    \r\n    const className = classNames('chat',{\r\n        'active': isActive\r\n    })\r\n\r\n    let MsgObjSorted = chat?.inbox.slice(0).sort((a, b) => a.createdAt.localeCompare(b.createdAt))\r\n    let latestMsgObj = MsgObjSorted.slice(0).pop()\r\n\r\n    //console.log('[LATEST-CHAT-MSG]', latestMsgObj,'[CHAT]', chat)\r\n    let latestMsg, latestMsgDate\r\n    if(!latestMsgObj){\r\n        latestMsgDate = chat?.createdAt\r\n        latestMsg = ''\r\n    } else {\r\n        latestMsgDate = latestMsgObj.createdAt\r\n        if(latestMsgObj.type === 'text'){\r\n            latestMsg = latestMsgObj.message\r\n        }else{\r\n            latestMsg = ''\r\n        }\r\n    }\r\n    \r\n    return (\r\n        <div className={className} \r\n            onClick={() => {onChatItemSelected(chat)}}\r\n        >\r\n            <img src={chat.info.profilePicUrl} alt={chat.info.username} />\r\n            <div className=\"title-text\">{chat.info.username}</div>\r\n            <div className=\"created-date\">{moment(latestMsgDate).fromNow()}</div>\r\n            <div className=\"chat-message\">\r\n                {latestMsg}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChatItem\r\n","import React from 'react'\r\n\r\nimport ChatItem from '../chat-item/ChatItem'\r\nimport './ChatList.css'\r\n\r\nfunction ChatList(props) {\r\n\r\n    const { chats, selectedChat, onChatItemSelected } = props\r\n\r\n    const displayChat = chats.filter(chat => chat.status !== 'Pending')\r\n    const chatItems = chats && displayChat.map(chat => {\r\n        const chatIsActive = selectedChat && chat.info._id === selectedChat.info._id\r\n        return <ChatItem\r\n            key={chat.info._id}\r\n            onChatItemSelected={onChatItemSelected}\r\n            isActive={chatIsActive}\r\n            chat={chat}\r\n            />\r\n    })\r\n\r\n    return (\r\n        <div id=\"chat-list\">\r\n            {chatItems}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChatList\r\n","import React from 'react'\r\n\r\nimport './NewChat.css'\r\n\r\nfunction NewChat() {\r\n    return (\r\n        <div id='new-message-container'>\r\n            {/* <button>+</button> */}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default NewChat","import React, { Fragment } from 'react'\r\nimport { FiVideo } from 'react-icons/fi'\r\n\r\nimport './ChatTitle.css'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nfunction ChatTitle(props) {\r\n    const { selectedChat } = props\r\n    const connectToId = selectedChat?.info._id\r\n    let chatTitleContents = null\r\n\r\n    const history = useHistory()\r\n    \r\n    if(selectedChat){\r\n        chatTitleContents = (\r\n            <Fragment>\r\n                <span>{selectedChat.info.username}</span>\r\n                <button id='chatTitle-videoCall-btn' onClick={()=>{history.push(`/users/videocall/${connectToId}`)}}>\r\n                    <FiVideo />\r\n                    </button>\r\n            </Fragment>\r\n        )\r\n    }\r\n    return (\r\n        <div id=\"chat-title\">\r\n            { chatTitleContents }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChatTitle\r\n","import React, { useState } from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Modal from '@material-ui/core/Modal'\r\nimport Backdrop from '@material-ui/core/Backdrop'\r\nimport Fade from '@material-ui/core/Fade'\r\nimport './MessageModal.css'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\nmodal: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n},\r\npaper: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    boxShadow: theme.shadows[5]\r\n},\r\n}))\r\n\r\nexport default function MessageModal(props) {\r\n    const classes = useStyles()\r\n    const [open, setOpen] = React.useState(false)\r\n    const { message, modalStatus } = props\r\n\r\n    const handleOpen = () => {\r\n        setOpen(modalStatus)\r\n    }\r\n\r\n    useState(handleOpen,[])\r\n\r\n    const handleClose = () => {\r\n        setOpen(false)\r\n        props.handleModalStatus()\r\n    }\r\n\r\n    return (\r\n    <div>\r\n        <Modal\r\n        aria-labelledby='transition-modal-title'\r\n        aria-describedby='transition-modal-description'\r\n        className={classes.modal}\r\n        open={open}\r\n        onClose={handleClose}\r\n        closeAfterTransition\r\n        BackdropComponent={Backdrop}\r\n        BackdropProps={{\r\n            timeout: 500,\r\n        }}\r\n        >\r\n        <Fade in={open}>\r\n            <div className={classes.paper}>\r\n                <img className='modal-img' src={message.message} alt={message._id} />\r\n            </div>\r\n        </Fade>\r\n        </Modal>\r\n    </div>\r\n    )\r\n}\r\n","import React, { Fragment, useState } from 'react'\r\nimport classNames from 'classnames'\r\nimport moment from 'moment'\r\n\r\nimport './Message.css'\r\n\r\nimport MessageModal from '../../../reusables/MessageModal'\r\n\r\nfunction Message(props) {\r\n    const { isMyMessage, message, imageUrl, imageAlt } = props\r\n\r\n    const [open , setOpen] = useState(false)\r\n\r\n    const msgClass = classNames('message-row',{\r\n        'you-message': isMyMessage,\r\n        'other-message': !isMyMessage\r\n    })\r\n\r\n    const avatar = isMyMessage ? null : <img className='avatar' src={imageUrl} alt={imageAlt} />\r\n    //console.log(open, '[OPEN]')\r\n\r\n    const handleModalStatus = () => {\r\n        setOpen(!open)\r\n    }\r\n    \r\n    let msgType = null\r\n    if(message.type==='text'){\r\n        msgType = (\r\n            <div className={msgClass}>\r\n                <div className=\"message-content\">\r\n                    {avatar}\r\n                    <div className=\"message-text\">\r\n                        {message.message}\r\n                    </div>\r\n                    <div className=\"message-time\">{moment(message.createdAt).format('MMMM Do YYYY, h:mm:ss a')}</div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n    else if(message.type === 'image/video'){\r\n        msgType = (\r\n            <div className={msgClass}>\r\n                <div className=\"message-content\">\r\n                    {avatar}\r\n                    <img className=\"message-file\" src={message.message} alt={message._id} onClick={() => {handleModalStatus()}}/>\r\n                    {open && <MessageModal message={message} modalStatus={open} handleModalStatus={handleModalStatus}/>}\r\n                    <div className=\"message-time\">{moment(message.createdAt).format('MMMM Do YYYY, h:mm:ss a')}</div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n    return <Fragment>{msgType}</Fragment>\r\n}\r\n\r\nexport default Message\r\n","import React, { useEffect, useRef } from 'react'\r\n\r\nimport './MessageList.css'\r\nimport Message from './Message'\r\n\r\nfunction MessageList(props) {\r\n    \r\n    const { selectedChat } = props\r\n    let messageItems = null\r\n    //console.log('MESSAGE LIST',selectedChat)\r\n    \r\n    //! scrollToBottom ->   https://stackoverflow.com/questions/37620694/how-to-scroll-to-bottom-in-react\r\n    const messagesEndRef = useRef(null)\r\n    const scrollToBottom = () => {\r\n        messagesEndRef.current.scrollIntoView({ behavior: 'smooth' })\r\n    }\r\n    \r\n    if(selectedChat && selectedChat.inbox.length) {\r\n        messageItems = selectedChat.inbox.sort((a, b) => -a.createdAt.localeCompare(b.createdAt)).map((msg) => {\r\n            return <Message\r\n            key={msg._id}\r\n            isMyMessage={msg.isMyMessage}\r\n            message={msg} \r\n            imageUrl={selectedChat.info.profilePicUrl}\r\n            imageAlt={selectedChat.info.username}\r\n            />\r\n            \r\n        })\r\n    }\r\n    useEffect(scrollToBottom, [messageItems])\r\n    return (\r\n        <div id='chat-message-list'>\r\n            <div ref={messagesEndRef}></div>\r\n            {messageItems}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MessageList\r\n","import React, { Fragment, useState } from 'react'\r\nimport Dropzone from 'react-dropzone'\r\n\r\nimport { FiUpload } from 'react-icons/fi'\r\nimport './ChatForm.css'\r\n\r\nfunction ChatForm(props){\r\n\r\n    const { selectedChat, onMessageSubmitted, onFileUpload } = props\r\n    const [message, setMessage] = useState('')\r\n    let formContents = null\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault()\r\n        if (message.length > 0) {\r\n            onMessageSubmitted(message);\r\n            setMessage('');\r\n        }\r\n    }\r\n\r\n    const handleDrop = (file) => {\r\n        // console.log(file)\r\n        const fd = new FormData()\r\n        fd.append('file', file[0])\r\n        fd.append('type','image/video')\r\n        onFileUpload(fd)\r\n    }\r\n\r\n    if (selectedChat) {\r\n        formContents = (\r\n            <Fragment>\r\n                <input \r\n                    type=\"text\" \r\n                    placeholder=\"type a message\" \r\n                    value={message}\r\n                    onChange={ (e) => { setMessage(e.target.value) } } \r\n                />\r\n\r\n                {/*Add attachment icons*/\r\n                    <Dropzone onDrop={handleDrop}>\r\n                        {({ getRootProps, getInputProps }) => (\r\n                            <section>\r\n                            <div {...getRootProps()}>\r\n                                <input {...getInputProps()} />\r\n                                <button type='button' id='upload-btn'><FiUpload/></button>\r\n                            </div>\r\n                            </section>\r\n                        )}\r\n                    </Dropzone>\r\n                }\r\n                \r\n                <button type=\"submit\">Send</button>\r\n            </Fragment>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <form id=\"chat-form\" onSubmit={handleSubmit}>\r\n            {formContents}\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default ChatForm\r\n","import axios from 'axios'\r\n\r\nconst getToken = localStorage.getItem('token')\r\n\r\n\r\n//get chats inbox\r\n// export const setChatsInbox = (data) => {\r\n//     return { type: 'SET_CHAT_INBOX', payload: data}\r\n// }\r\n\r\n// export const startGetChatMsgs = (id) => {\r\n//     return(dispatch) => {\r\n//         axios.get(`/users/getChats/${id}`,{\r\n//             headers: {\r\n//                 'x-auth': getToken\r\n//             }\r\n//         })\r\n//             .then(response => {\r\n//                 console.log('[PROMISE-get-chats]',response.data)\r\n//                 const getData = response.data\r\n//                 if(getData.hasOwnProperty('errors')){\r\n//                     alert(getData.message)\r\n//                 }else{\r\n//                     dispatch(setChatsInbox(getData))\r\n//                 }\r\n//             })\r\n//             .catch(err=> console.log('[ERROR-get-chats]',err))\r\n//     }\r\n// }\r\n\r\n//sent message\r\nexport const setSendMsg = (data) => {\r\n    return {type: 'SET_SEND_MSG', payload:data}\r\n}\r\n\r\nexport const startSendMsg = (id,fd) => {\r\n    return(dispatch) => {\r\n        axios.post(`/users/sendMsg/${id}`,fd,{\r\n            headers: {\r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then(response => {\r\n                console.log('[PROMISE-send-msg]',response.data)\r\n                const getData = response.data\r\n                if(getData.hasOwnProperty('errors')){\r\n                    alert(getData.message)\r\n                }else{\r\n                    dispatch(setSendMsg(getData))\r\n                }\r\n            })\r\n            .catch(err=> console.log('[ERROR-send-msg]',err))\r\n    }\r\n}\r\n\r\n//upload file\r\nexport const uploadFile = (data) => {\r\n    return {type: 'UPLOAD_FILE', payload:data}\r\n}\r\n\r\nexport const startUploadFile = (id,fd) => {\r\n    return(dispatch) => {\r\n        axios.post(`/users/chats/upload/${id}`,fd,{\r\n            headers: {\r\n                'content-type': 'multipart/form-data',\r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then(response => {\r\n                console.log('[PROMISE-upload-file]',response.data)\r\n                const getData = response.data\r\n                if(getData.hasOwnProperty('errors')){\r\n                    alert(getData.message)\r\n                }else{\r\n                    dispatch(uploadFile(getData))\r\n                }\r\n            })\r\n            .catch(err=> console.log('[ERROR-upload-msg]',err))\r\n    }\r\n}","import React, { Fragment } from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport ChatSearch from '../grid-components/chats/chat-search/ChatSearch'\r\nimport NoChats from '../grid-components/chats/no-chat/NoChats'\r\nimport ChatList from '../grid-components/chats/chat-list/ChatList'\r\nimport NewChat from '../grid-components/chats/new-chat/NewChat'\r\nimport ChatTitle from '../grid-components/chat-title/ChatTitle'\r\nimport MessageList from '../grid-components/message/MessageList'\r\nimport ChatForm from '../grid-components/chat-form/ChatForm'\r\n\r\nimport './ChatShell.css'\r\nimport { startStoreSelectedId } from '../../../redux/actions/selectedChatAction'\r\nimport { startSendMsg, startUploadFile } from '../../../redux/actions/chatsAction'\r\n\r\nfunction ChatShell(props) {\r\n    const { chats, selectedChat } = props\r\n    let selectedId = selectedChat?.info._id\r\n    \r\n    console.log(chats,'chatshell')\r\n\r\n    let chatContent = (\r\n        <Fragment>\r\n            <NoChats/>\r\n        </Fragment>\r\n    )\r\n    if(chats.length > 0){\r\n        chatContent = (\r\n            <Fragment>\r\n                <MessageList selectedChat={selectedChat} />\r\n            </Fragment>\r\n        )\r\n    }\r\n    const chatChanged = (chat) => {\r\n        props.dispatch(startStoreSelectedId(chat))\r\n        console.log('selectedChat----->', chat._id)\r\n        //props.dispatch(startGetChatMsgs(chat._id))\r\n    }\r\n    const onMessageSubmitted = (msg) => {\r\n        const fd = {\r\n            message: msg\r\n        }\r\n        console.log('SEND MESSAGE -------->',selectedId,msg)\r\n        props.dispatch(startSendMsg(selectedId,fd))\r\n    }\r\n\r\n    const onFileUpload = (fd) => {\r\n        console.log(selectedId,fd,'file-upload')\r\n        props.dispatch(startUploadFile(selectedId,fd))\r\n    }\r\n\r\n    return (\r\n        <div id=\"chat-container\">\r\n            <ChatSearch chats={chats} />\r\n            <ChatList\r\n                onChatItemSelected={chatChanged}\r\n                chats={chats}\r\n                selectedChat={selectedChat} />\r\n            <NewChat />\r\n            <ChatTitle \r\n                selectedChat={selectedChat}\r\n            />\r\n            {chatContent}\r\n            <ChatForm \r\n                selectedChat={selectedChat}\r\n                onMessageSubmitted={onMessageSubmitted} \r\n                onFileUpload={onFileUpload}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        chats: state.login.friends,\r\n        selectedChat: state.selectedChat,\r\n        user: state.login\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ChatShell)\r\n","export const storeSelectedId = (data) => {\r\n    return { type: 'SELECTED_ID', payload: data}\r\n}\r\n\r\n\r\nexport const startStoreSelectedId = (data) => {\r\n    return(dispatch) => {\r\n        dispatch(storeSelectedId(data))\r\n    }\r\n}","import axios from 'axios'\r\nconst getToken = localStorage.getItem('token')\r\n\r\n//------------------get updated friends list\r\nexport const updateFriendList = (data) => {\r\n    return { type: 'UPDATE_FRIEND_LIST', payload: data }\r\n}\r\n\r\nexport const startGetFriendList = () => {\r\n    return (dispatch) => {\r\n        axios.get(`/users/friendList`,{\r\n            headers: { \r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then((response) => {\r\n                console.log('[PROMISE-update-friend-list]',response.data)\r\n                const resData = response.data\r\n                if(resData.hasOwnProperty('errors')){\r\n                    alert(resData.message)\r\n                }\r\n                else{\r\n                    dispatch(updateFriendList(resData))\r\n                }\r\n            })\r\n        }\r\n}\r\n\r\n//------------------ cancel request\r\nexport const cancelFriendReq = (data) => {\r\n    return { type: 'FRIEND_CANCEL_REQUEST', payload: data }\r\n}\r\n\r\nexport const startCancelFriendRequest = (id,fd) => {\r\n    return (dispatch) => {\r\n        axios.post(`/users/friends/cancelRequest/${id}`,fd,{\r\n            headers: { \r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then((response) => {\r\n                console.log('[PROMISE-friend-cancel-request]',response.data)\r\n                const resData = response.data\r\n                if(resData.hasOwnProperty('errors')){\r\n                    alert(resData.message)\r\n                }\r\n                else{\r\n                    dispatch(cancelFriendReq(resData))\r\n                }\r\n            })\r\n        }\r\n}\r\n\r\n//accept request\r\nexport const acceptFriendReq = (data) => {\r\n    return { type: 'FRIEND_ACCEPT_REQUEST', payload: data }\r\n}\r\n\r\nexport const startAcceptFriendRequest = (id,fd) => {\r\n    return (dispatch) => {\r\n        axios.post(`/users/friends/acceptRequest/${id}`,fd,{\r\n            headers: { \r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then((response) => {\r\n                console.log('[PROMISE-accept-request]',response.data)\r\n                const resData = response.data\r\n                if(resData.hasOwnProperty('errors')){\r\n                    alert(resData.message)\r\n                }\r\n                else{\r\n                    dispatch(acceptFriendReq(resData))\r\n                }\r\n            })\r\n        }\r\n}\r\n\r\n\r\n//reject request\r\nexport const rejectFriendReq = (data) => {\r\n    return { type: 'FRIEND_REJECT_REQUEST', payload: data }\r\n}\r\n\r\nexport const startRejectFriendRequest = (id,fd) => {\r\n    return (dispatch) => {\r\n        axios.post(`/users/friends/rejectRequest/${id}`,fd,{\r\n            headers: { \r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then((response) => {\r\n                console.log('[PROMISE-reject-request]',response.data)\r\n                const resData = response.data\r\n                if(resData.hasOwnProperty('errors')){\r\n                    alert(resData.message)\r\n                }\r\n                else{\r\n                    dispatch(rejectFriendReq(resData))\r\n                }\r\n            })\r\n        }\r\n}\r\n\r\n\r\n//remove friend\r\nexport const friendRemove = (data) => {\r\n    return { type: 'FRIEND_REMOVE', payload: data }\r\n}\r\n\r\nexport const startFriendRemove = (id,fd) => {\r\n    return (dispatch) => {\r\n        axios.post(`/users/friends/removeFriend/${id}`,fd,{\r\n            headers: { \r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then((response) => {\r\n                console.log('[PROMISE-remove-friend]',response.data)\r\n                const resData = response.data\r\n                if(resData.hasOwnProperty('errors')){\r\n                    alert(resData.message)\r\n                }\r\n                else{\r\n                    dispatch(friendRemove(resData))\r\n                }\r\n            })\r\n        }\r\n}","import React, { useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { Card, CardList } from '../reusables/Card'\r\nimport { startCancelFriendRequest, startAcceptFriendRequest, startRejectFriendRequest, startFriendRemove, startGetFriendList } from '../../redux/actions/friendsAction'\r\n\r\n\r\nfunction Friends(props) {\r\n    const handleRequest = (id,isFriend,sendByMe,status) => {\r\n        if(isFriend){\r\n            if(sendByMe && status === 'Pending'){\r\n                props.dispatch(startCancelFriendRequest(id))\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleAcceptRequest = (id) => {\r\n        props.dispatch(startAcceptFriendRequest(id))\r\n    }\r\n\r\n    const handleRejectRequest = (id) => {\r\n        props.dispatch(startRejectFriendRequest(id))\r\n    }\r\n\r\n    const handleRemoveFriend = (id) => {\r\n        props.dispatch(startFriendRemove(id))\r\n    }\r\n\r\n    const { friends } = props\r\n\r\n    useEffect(() => {\r\n        props.dispatch(startGetFriendList())\r\n        //console.log('Loaded friend List')\r\n    // eslint-disable-next-line\r\n    },[])\r\n\r\n    return (\r\n        <div>\r\n            <Card >\r\n                { friends && friends.map(friend => {\r\n                    return <CardList \r\n                                key={friend._id} \r\n                                username={friend.info.username}\r\n                                img={friend.info.profilePicUrl}\r\n                                isFriend={friend.isFriend}\r\n                                status={friend.status && friend.status}\r\n                                handleRequest={handleRequest}\r\n                                _id={friend.info._id}\r\n                                sendByMe={friend.sendByMe}\r\n                                handleAccept={handleAcceptRequest}\r\n                                handleReject={handleRejectRequest}\r\n                                handleRemove={handleRemoveFriend}\r\n                            />\r\n                })}\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        friends: state.login.friends\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Friends)\r\n","import React, { useState } from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Modal from '@material-ui/core/Modal'\r\nimport Backdrop from '@material-ui/core/Backdrop'\r\nimport Fade from '@material-ui/core/Fade'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nimport { RiCloudOffLine } from 'react-icons/ri'\r\nimport './CallAlertModal.css'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\nmodal: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n},\r\npaper: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    boxShadow: theme.shadows[5]\r\n},\r\n}))\r\n\r\nexport default function CallModal(props) {\r\n    const classes = useStyles()\r\n    const [open, setOpen] = React.useState(false)\r\n    const { view, modalStatus, message } = props\r\n    const history = useHistory()\r\n\r\n    const handleOpen = () => {\r\n        setOpen(view)\r\n    }\r\n\r\n    useState(handleOpen, [])\r\n\r\n    const handleClose = () => {\r\n        setOpen(false)\r\n    }\r\n    \r\n    const handleRedirect = () => {\r\n        history.push('/users/chat')\r\n    }\r\n\r\n    return (\r\n    <div>\r\n        <Modal\r\n        aria-labelledby='transition-modal-title'\r\n        aria-describedby='transition-modal-description'\r\n        className={classes.modal}\r\n        open={open}\r\n        onClose={handleClose}\r\n        closeAfterTransition\r\n        BackdropComponent={Backdrop}\r\n        BackdropProps={{\r\n            timeout: 500,\r\n        }}\r\n        >\r\n        <Fade in={open}>\r\n            <div id='call-alert-modal' className={classes.paper}>\r\n                <RiCloudOffLine id='offline-icon'/>\r\n                <h2>{message}</h2>\r\n                <button id='close-alert' onClick={\r\n                    () => {\r\n                        modalStatus()\r\n                        handleRedirect()\r\n                    }\r\n                }>Close</button>\r\n            </div>\r\n        </Fade>\r\n        </Modal>\r\n    </div>\r\n    )\r\n}\r\n","import React, { useEffect, useState, useRef } from 'react'\r\nimport Peer from 'simple-peer'\r\nimport { useHistory } from 'react-router-dom'\r\nimport socket from '../../services/socket'\r\nimport './VideoCall.css'\r\nimport { connect } from 'react-redux'\r\nimport queryString from 'query-string'\r\nimport { IoIosCall } from 'react-icons/io'\r\nimport CallAlertModal from '../reusables/CallAlertModal'\r\nimport { callStateClear, appStateInCallInitiate } from '../../redux/actions/callAction'\r\nimport classNames from 'classnames'\r\n\r\nfunction VideoCall(props) {\r\n  const userVideo = useRef()\r\n  const partnerVideo = useRef()\r\n  const history = useHistory()\r\n  let getStreamRef = null\r\n  let callEnd = useRef(false)\r\n  let callEngaged = useRef(false)\r\n\r\n  const [viewCall, setViewCall] = useState(true)\r\n  const [stream, setStream] = useState()\r\n  const [callAccepted, setCallAccepted] = useState(false)\r\n  const [callerSignal, setCallerSignal] = useState()\r\n  const [caller, setCaller] = useState('')\r\n\r\n  const [offline, setOffline] = useState(false)\r\n  const [offlineMsg, setOfflineMsg] = useState('')\r\n  //const [callEnd, setCallEnd] = useState(false)\r\n\r\n  const modalStatus = () => {\r\n    setViewCall(false)\r\n  }\r\n\r\n  const { user, callState } = props\r\n  const signal = callState.signal\r\n  //let receiverId = selectedChat?.info._id\r\n  let receiverId = props.match.params.id\r\n  console.log('params id -->', receiverId)\r\n  let userId = user?._id\r\n  const query = queryString.parse(props.location.search, {\r\n    parseBooleans: true,\r\n  })\r\n  console.log(query, 'incoming-call query')\r\n\r\n  const handleCallEndBtn = () => {\r\n    socket.emit('endCallByUser', {\r\n      user: user._id,\r\n    })\r\n    callEnd.current = true\r\n    //setCallEnd(true)\r\n    setTimeout(() => {\r\n      history.push('/users/chat')\r\n    }, 1500)\r\n  }\r\n\r\n  const videoCssEle = classNames('clientVideo', {\r\n    'clientVideo-accepted': callAccepted,\r\n  })\r\n\r\n  const isReceiving = callState?.callReceiving\r\n  //const isInitiator = callState?.callInitiator\r\n  function closeStream() {\r\n    console.log('streamVideo closed', getStreamRef)\r\n    if (getStreamRef) {\r\n      getStreamRef.getTracks().forEach((track) => {\r\n        if (track.readyState === 'live') {\r\n          track.stop()\r\n        }\r\n      })\r\n    }\r\n    console.log(\r\n      '[***INIT**]',\r\n      receiverId,\r\n      userId,\r\n      isReceiving,\r\n      '[CALL-END] -->',\r\n      callEnd.current\r\n    )\r\n\r\n    if (!callEngaged.current) {\r\n      if (!callEnd.current) {\r\n        if (receiverId) {\r\n          //console.log('INSIDE CLOSING CALL CONNECTION CHANNEL --> [receiver]')\r\n          socket.emit('connectionClosed', {\r\n            to: receiverId,\r\n            from: userId,\r\n          })\r\n        } else if (isReceiving) {\r\n          //console.log('INSIDE CLOSING CALL CONNECTION CHANNEL --> [caller]',signal.from)\r\n          socket.emit('connectionClosed', {\r\n            to: signal.from,\r\n            from: userId,\r\n          })\r\n        }\r\n      }\r\n    }\r\n\r\n    callEnd.current = false\r\n    callEngaged.current = false\r\n    props.dispatch(callStateClear())\r\n  }\r\n\r\n  useEffect(() => {\r\n    console.log(receiverId, '--->RID')\r\n\r\n    navigator.mediaDevices\r\n      .getUserMedia({ video: true, audio: true })\r\n      .then((stream) => {\r\n        setStream(stream) // eslint-disable-next-line\r\n        getStreamRef = stream\r\n        if (userVideo.current) {\r\n          userVideo.current.srcObject = stream\r\n        }\r\n        //  https://stackoverflow.com/questions/11642926stop-close-webcam-which-is-opened-by-navigator-getusermedia\r\n        //  https://developers.google.com/web/updates/2015/07/mediastream-deprecationshl=en#stop-ended-and-active\r\n        if (query.receiving) {\r\n          setCallerSignal(signal.signal)\r\n          setCaller(signal.from)\r\n          console.log('[EFFECT-SET-RECEIVING-CALL]', caller, callerSignal)\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err)\r\n        history.push('/users/chat')\r\n      })\r\n\r\n    return () => {\r\n      closeStream()\r\n      socket.off('connectionClosed')\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    console.log('++++++++++++++++++++++++++++++++++++CallPEER', receiverId)\r\n    if (receiverId) {\r\n      props.dispatch(appStateInCallInitiate(true))\r\n      function callPeer(id) {\r\n        const peer = new Peer({\r\n          initiator: true,\r\n          trickle: false,\r\n          stream: stream,\r\n        })\r\n\r\n        const serverEndCall = (data) => {\r\n          peer.destroy()\r\n          console.log('data fail', data)\r\n          setTimeout(() => {\r\n            setOfflineMsg(data.message)\r\n            setOffline(true)\r\n          }, 2000) // prev --> 5000\r\n        }\r\n\r\n        peer.on('signal', (data) => {\r\n          socket.emit('callUser', {\r\n            userToCall: receiverId,\r\n            signalData: data,\r\n            from: userId,\r\n          })\r\n        })\r\n\r\n        peer.on('stream', (stream) => {\r\n          if (partnerVideo.current) {\r\n            partnerVideo.current.srcObject = stream\r\n          }\r\n        })\r\n\r\n        socket.on('callAccepted', (signal) => {\r\n          setCallAccepted(true)\r\n          console.log('accepted signal', signal)\r\n          peer.signal(signal)\r\n        })\r\n\r\n        socket.on('not-reachable', serverEndCall)\r\n        socket.on('callRejected', serverEndCall)\r\n        socket.on('call-disconnected', serverEndCall)\r\n        socket.on('callChannelClosed', serverEndCall)\r\n        socket.on('callClosedByUser', serverEndCall)\r\n\r\n        socket.on('caller engaged', (data) => {\r\n          peer.destroy()\r\n          console.log('data fail', data)\r\n          setTimeout(() => {\r\n            setOfflineMsg(data.message)\r\n            setOffline(true)\r\n            callEngaged.current = true\r\n          }, 2000) // prev --> 5000\r\n        })\r\n      }\r\n      callPeer(receiverId)\r\n\r\n      return () => {\r\n        socket.off('callAccepted')\r\n        socket.off('callRejected')\r\n        socket.off('not-reachable')\r\n        socket.off('call-disconnected')\r\n        socket.off('callChannelClosed')\r\n        socket.off('callClosedByUser')\r\n        socket.off('caller engaged')\r\n      }\r\n    } // eslint-disable-next-line\r\n  }, [stream, userId, receiverId, query.connectId])\r\n\r\n  useEffect(() => {\r\n    if (query.attend && caller && query.connectId) {\r\n      function acceptCall() {\r\n        setCallAccepted(true)\r\n        const peer = new Peer({\r\n          initiator: false,\r\n          trickle: false,\r\n          stream: stream,\r\n        })\r\n\r\n        const serverEndCall = (data) => {\r\n          peer.destroy()\r\n          console.log('data fail', data)\r\n          setTimeout(() => {\r\n            setOfflineMsg(data.message)\r\n            setOffline(true)\r\n          }, 2000) // prev 5000\r\n        }\r\n\r\n        peer.on('signal', (data) => {\r\n          socket.emit('acceptCall', { signal: data, to: caller, from: userId })\r\n        })\r\n\r\n        peer.on('stream', (stream) => {\r\n          partnerVideo.current.srcObject = stream\r\n        })\r\n\r\n        peer.signal(callerSignal)\r\n\r\n        socket.on('callChannelClosed', serverEndCall)\r\n        socket.on('callClosedByUser', serverEndCall)\r\n      }\r\n      acceptCall()\r\n    }\r\n\r\n    return () => {\r\n      socket.off('callChannelClosed')\r\n      socket.off('callClosedByUser')\r\n    } // eslint-disable-next-line\r\n  }, [callerSignal, stream, caller, userId, query.connectId])\r\n\r\n  let ClientVideo\r\n  if (stream) {\r\n    ClientVideo = (\r\n      <video\r\n        className={videoCssEle}\r\n        playsInline\r\n        muted\r\n        ref={userVideo}\r\n        autoPlay\r\n      />\r\n    )\r\n  }\r\n\r\n  let PartnerVideo\r\n  if (callAccepted) {\r\n    PartnerVideo = (\r\n      <video controls id='partnerVideo' ref={partnerVideo} autoPlay />\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div id='v-call-container'>\r\n      {offline && (\r\n        <CallAlertModal\r\n          view={viewCall}\r\n          modalStatus={modalStatus}\r\n          message={offlineMsg}\r\n        />\r\n      )}\r\n      <div id='call-video-box'>\r\n        <div>{ClientVideo}</div>\r\n        <div>{PartnerVideo}</div>\r\n      </div>\r\n      <button\r\n        id='call-end'\r\n        onClick={() => {\r\n          handleCallEndBtn()\r\n        }}\r\n      >\r\n        <IoIosCall />\r\n      </button>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    user: state.login,\r\n    selectedChat: state.selectedChat,\r\n    callState: state.call,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(VideoCall)\r\n","export const saveSignal = (data) => {\r\n    return { type: 'SAVE_SIGNAL', payload:data}\r\n}\r\n\r\nexport const appStateInCall = (status) => {\r\n    return { type: 'INCALL_STATUS', payload: status}\r\n}\r\n\r\nexport const appStateInCallReceiving = (status) => {\r\n    return { type: 'INCALL_RECEIVING', payload: status}\r\n}\r\n\r\nexport const appStateInCallInitiate = (status) => {\r\n    return { type: 'INCALL_INITIATE', payload: status}\r\n}\r\n\r\nexport const callStateClear = () => {\r\n    return { type: 'CLEAR_CALL_STATE'}\r\n}","import React from 'react'\r\nimport VideoCall from '../video-call/VideoCall'\r\nimport ChatShell from '../chat-box/container-main/ChatShell'\r\n\r\nfunction InterCom(props) {\r\n    return (\r\n        <div>\r\n            <ChatShell />\r\n            <VideoCall />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default InterCom\r\n","import React, { useState } from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Modal from '@material-ui/core/Modal'\r\nimport Backdrop from '@material-ui/core/Backdrop'\r\nimport Fade from '@material-ui/core/Fade'\r\n\r\nimport './CallModal.css'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\nmodal: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n},\r\npaper: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    boxShadow: theme.shadows[5]\r\n},\r\n}))\r\n\r\nexport default function CallModal(props) {\r\n    const classes = useStyles()\r\n    const [open, setOpen] = React.useState(false)\r\n    const { view, modalStatus, name, pic, handleAttendCall, handleRejectCall } = props\r\n\r\n    const handleOpen = () => {\r\n        setOpen(view)\r\n    }\r\n\r\n    useState(handleOpen, [])\r\n\r\n    const handleClose = () => {\r\n        setOpen(false)\r\n    }\r\n\r\n    return (\r\n    <div>\r\n        <Modal\r\n        aria-labelledby='transition-modal-title'\r\n        aria-describedby='transition-modal-description'\r\n        className={classes.modal}\r\n        open={open}\r\n        onClose={handleClose}\r\n        closeAfterTransition\r\n        BackdropComponent={Backdrop}\r\n        BackdropProps={{\r\n            timeout: 500,\r\n        }}\r\n        >\r\n        <Fade in={open}>\r\n            <div id='call-modal' className={classes.paper}>\r\n                <img id='call-img' src={require('../../styles/assets/calling.gif')} alt='calling' />\r\n\r\n                <div id='caller'>\r\n                    <img id='caller-avatar' src={pic} alt='name' />\r\n                    <h3 id='caller-name'>{name}</h3>\r\n                </div>\r\n                <div id='call-btns'>\r\n                    <button id='acc-call' onClick={()=> {\r\n                        modalStatus()\r\n                        handleAttendCall()\r\n                        }}>Accept</button>\r\n                    <button id='rej-call' onClick={() => {\r\n                        handleRejectCall()\r\n                        modalStatus()\r\n                    }}>Reject</button>\r\n                </div>\r\n            </div>\r\n        </Fade>\r\n        </Modal>\r\n    </div>\r\n    )\r\n}\r\n","import React, { Fragment, useEffect, useState } from 'react'\r\nimport socket from '../../services/socket'\r\nimport CallModal from '../reusables/CallModal'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport { saveSignal, appStateInCallReceiving, callStateClear } from '../../redux/actions/callAction'\r\n\r\n\r\nfunction VideoListener(props) {\r\n\r\n    const [viewCall, setViewCall] = useState(false)\r\n    const [callerName, setCallerName] = useState('')\r\n    const [callerPic, setCallerPic] = useState('')\r\n    const [dataPack, setDataPack] = useState({})\r\n    const [attend, setAttend] = useState(false)\r\n    const [query, setQuery] = useState('')\r\n\r\n    const { callState } = props\r\n    const inCallReceiving = callState?.callReceiving\r\n\r\n    const modalStatus = () => {\r\n        setViewCall(false)\r\n    }\r\n\r\n    const handleAttendCall = () => {\r\n        setAttend(true)\r\n    }\r\n\r\n    const handleRejectCall = () => {\r\n        props.dispatch(callStateClear())\r\n        socket.emit('rejectCall', {\r\n            from: dataPack.from\r\n        })\r\n    }\r\n\r\n    const videoSignalData = (data) => {\r\n        console.log('[VIDEO-SIGNAL]', data)\r\n        const pack = {\r\n            from: data.from,\r\n            signal: data.signal,\r\n        }\r\n        props.dispatch(saveSignal(pack))\r\n        if(!callState.callInitiator){\r\n            props.dispatch(appStateInCallReceiving(true))\r\n            if(!inCallReceiving){\r\n                setViewCall(true)\r\n            }\r\n        }\r\n        setDataPack(pack)\r\n        setCallerName(data.username)\r\n        setCallerPic(data.profilePicUrl)\r\n\r\n        //if(attend){\r\n            const path = `/users/videoCall?from=${data.from}&connectId=${data.connect_id}&receiving=true&attend=true`\r\n            setQuery(path)\r\n        //}\r\n    }\r\n\r\n    const videoCallListener = () => {\r\n        console.log('VideoCall listener fn() loaded')\r\n        socket.on('call listener', videoSignalData)\r\n    }\r\n\r\n    useEffect(()=>{\r\n        videoCallListener()\r\n        return() => {\r\n            console.log('VideoCall listening closed')\r\n            socket.off('call listener',videoSignalData)\r\n            if(attend){\r\n                setAttend(false)\r\n                setViewCall(false)\r\n            }\r\n        }\r\n    })\r\n\r\n    return (\r\n        <div>\r\n            <Fragment>\r\n                { (viewCall && !attend) &&\r\n                    <CallModal \r\n                        modalStatus={modalStatus}\r\n                        view={viewCall} \r\n                        name={callerName} \r\n                        pic={callerPic}\r\n                        handleAttendCall={handleAttendCall}\r\n                        handleRejectCall={handleRejectCall}\r\n                    /> }\r\n                { attend && \r\n                    <Redirect to={query}/>\r\n                }\r\n            </Fragment>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        callState : state.call\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(VideoListener)\r\n","import { useEffect } from 'react'\r\nimport socket from '../../services/socket'\r\nimport { connect } from 'react-redux'\r\nimport { setSendMsg } from '../../redux/actions/chatsAction'\r\n\r\nfunction MessageListener(props) {\r\n    //! SOCKETS\r\n    //connecting client to server\r\n    //imported socket as an instance to avoid multiple component call to the server\r\n    //  https://dev.to/bravemaster619/how-to-prevent-multiple-socket-connections-and-events-in-react-531d\r\n\r\n    const msgFromServer = (msg) => {\r\n        console.log(msg,'[MESSAGE_SERVER]')\r\n        props.dispatch(setSendMsg(msg))\r\n    }\r\n    \r\n    const connectSocket = () => {\r\n        console.log('socketFnMessages() connected on load')\r\n        //to remove useEffect dependency warning -> by creating a socket instance in services folder\r\n        \r\n        //  https://stackoverflow.com/questions/9418697/how-to-unsubscribe-from-a-socket-io-subscription\r\n\r\n        socket.on('server message listening',msgFromServer)\r\n        // socket.on('server message listening',(msgFromServer)=>{\r\n        //     console.log(msgFromServer,'[MESSAGE_SERVER]')\r\n        //     // update the redux state\r\n        //     props.dispatch(setSendMsg(msgFromServer))\r\n        // })\r\n    }\r\n\r\n    useEffect(() => {\r\n        // https://daveceddia.com/useeffect-hook-examples/\r\n        // https://stackoverflow.com/questions/23092624/socket-io-removing-specific-listener\r\n        \r\n        //Mount\r\n        connectSocket()\r\n        return () => {\r\n            console.log('socket listening closed')\r\n            socket.off('server message listening', msgFromServer)\r\n            //socket.off('server message listening')\r\n        }\r\n        // eslint-disable-next-line\r\n    },[])\r\n    //! ----SOCKETS\r\n\r\n    return (null)\r\n}\r\n\r\nexport default connect()(MessageListener)\r\n","import React, { useState } from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Modal from '@material-ui/core/Modal'\r\nimport Backdrop from '@material-ui/core/Backdrop'\r\nimport Fade from '@material-ui/core/Fade'\r\nimport './PostModal.css'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\nmodal: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n}\r\n}))\r\n\r\nexport default function PostModal(props) {\r\n    const classes = useStyles()\r\n    const [open, setOpen] = React.useState(false)\r\n    const { modalStatus, addPost } = props\r\n\r\n    const handleOpen = () => {\r\n        setOpen(modalStatus)\r\n    }\r\n\r\n    useState(handleOpen,[])\r\n\r\n    const handleClose = () => {\r\n        setOpen(false)\r\n        props.handleModalStatus()\r\n    }\r\n\r\n    return (\r\n    <div>\r\n        <Modal\r\n        aria-labelledby='transition-modal-title'\r\n        aria-describedby='transition-modal-description'\r\n        className={classes.modal}\r\n        open={open}\r\n        onClose={handleClose}\r\n        closeAfterTransition\r\n        BackdropComponent={Backdrop}\r\n        BackdropProps={{\r\n            timeout: 500,\r\n        }}\r\n        >\r\n        <Fade in={open}>\r\n            <div id='post-paper'>\r\n                {addPost}\r\n            </div>\r\n        </Fade>\r\n        </Modal>\r\n    </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport Popover from '@material-ui/core/Popover'\r\nimport { Picker } from 'emoji-mart'\r\nimport 'emoji-mart/css/emoji-mart.css'\r\n\r\nexport default function EmojiPopUp(props) {\r\n  \r\n  const { anchorEl, handleClose, handleAddEmoji } = props\r\n\r\n  const open = Boolean(anchorEl)\r\n  const id = open ? 'EmojiPopUp' : undefined\r\n\r\n  return (\r\n    <div>\r\n      <Popover\r\n        id={id}\r\n        open={open}\r\n        anchorEl={anchorEl}\r\n        onClose={handleClose}\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'left',\r\n        }}\r\n        transformOrigin={{\r\n          vertical: 'top',\r\n          horizontal: 'left',\r\n        }}\r\n      >\r\n        <Picker title='Pick your emoji' emoji='point_up' onSelect={handleAddEmoji}/>\r\n      </Popover>\r\n    </div>\r\n  )\r\n}\r\n","import axios from 'axios'\r\nconst getToken = localStorage.getItem('token')\r\n\r\n// --------------> get latest public posts\r\n        //---> addPublic post listener\r\n\r\nexport const addNewPublicPost = (data) => {\r\n    return { type: 'ADD_NEW_PUBLIC_POST', payload: data }\r\n}\r\n\r\nexport const setPublicPosts = (data) => {\r\n    return { type: 'SET_PUBLIC_POSTS', payload: data }\r\n}\r\n\r\nexport const startGetPublicPosts = (fd) => {\r\n    return(dispatch) => {\r\n        axios.get('/users/getLatestPublicPosts')\r\n            .then(response => {\r\n                console.log('[PROMISE-publicPosts]',response.data)\r\n                const getPosts = response.data\r\n                dispatch(setPublicPosts(getPosts))\r\n            }).catch(err => console.log(err))\r\n    }\r\n}\r\n\r\n\r\n// ---------------> create post\r\nexport const addNewPost = (data) => {\r\n    return { type: 'ADD_NEW_POST', payload: data }\r\n}\r\n\r\nexport const startCreateNewPost = (fd) => {\r\n    return(dispatch) => {\r\n        axios.post('/users/posts/new',fd,{\r\n            headers: {\r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then(response => {\r\n                console.log('[PROMISE-postNew]',response.data)\r\n                const newPost = response.data\r\n                dispatch(addNewPost(newPost))\r\n            }).catch(err => console.log(err))\r\n    }\r\n}\r\n\r\n//-------------deletePost\r\n\r\nexport const deletePost = (data) => {\r\n    return { type: 'DELETE_POST', payload: data }\r\n}\r\n\r\nexport const startDeletePost = (id,type,fd) => {\r\n    return(dispatch) => {\r\n        axios.put(`/users/posts/${type}/${id}`,fd,{\r\n            headers: {\r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then(response => {\r\n                console.log('[PROMISE-postDelete]',response.data)\r\n                const retPost = response.data\r\n                dispatch(deletePost(retPost))\r\n            }).catch(err => console.log(err))\r\n    }\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Dropzone from 'react-dropzone'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport './PostCreate.css'\r\nimport PostModal from '../reusables/PostModal'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport Select from '@material-ui/core/Select'\r\nimport { BsLockFill } from 'react-icons/bs'\r\nimport { FaUserFriends } from 'react-icons/fa'\r\nimport { MdPublic } from 'react-icons/md'\r\nimport { GrEmoji } from 'react-icons/gr'\r\nimport EmojiPopUp from '../reusables/EmojiPopUp'\r\nimport { startCreateNewPost } from '../../redux/actions/postsAction'\r\n\r\nexport function AddPost(props){\r\n\r\n    const { user, handleDrop, fileUp, post, pType, handleClearFileUpload, handlePassPostData, handleSubmit } = props\r\n    \r\n    const [postType, setPostType] = useState('Private')\r\n    const [postText, setPostText] = useState('')\r\n    const [anchorEl, setAnchorEl] = useState(null)\r\n    const [lineHeight,setLineHeight] = useState('')\r\n\r\n\r\n    useEffect(() => {\r\n        if(post){\r\n            setPostType(pType)\r\n            setPostText(post)\r\n        }\r\n        // eslint-disable-next-line\r\n    },[])\r\n\r\n    console.log(!postText.length,!Boolean(fileUp),'check disabled')\r\n\r\n    const handleEmojiPopOpen = (e) => {\r\n        setAnchorEl(e.currentTarget)\r\n    }\r\n    const handleEmojiPopClose = (e) => {\r\n        setAnchorEl(null)\r\n    }\r\n\r\n    const handleAddEmoji = (e) => {\r\n        setPostText(postText+e.native)\r\n    }\r\n\r\n    const handlePostTextChange = (e) => {\r\n        setPostText(e.target.value)\r\n        console.log(e.target)\r\n        setLineHeight(e.target.scrollHeight)\r\n    }\r\n\r\n    useEffect(\r\n        () => {\r\n            handlePassPostData(postText,postType)\r\n            // eslint-disable-next-line\r\n        },[postText,postType])\r\n\r\n    return(\r\n        <div id='add-post-container'>\r\n            <h1>Create post</h1>\r\n            <hr/>\r\n            <div id='add-ava-user'>\r\n                <Avatar id='post-avatar' src={user.profileImg} />\r\n                <div id='add-post-type'>\r\n                    <h4>{user.username}</h4>\r\n                    <FormControl >\r\n                        <Select\r\n                        id=\"select-post-type\"\r\n                        value={postType}\r\n                        onChange={(e)=>{setPostType(e.target.value)}}\r\n                        displayEmpty\r\n                        >\r\n                            <MenuItem value={'Private'}><BsLockFill/>Only me</MenuItem>\r\n                            <MenuItem value={'Friends'}><FaUserFriends/>Friends</MenuItem>\r\n                            <MenuItem value={'Public'}><MdPublic/>Public</MenuItem>\r\n                        </Select>\r\n                    </FormControl>\r\n                </div>\r\n            </div>\r\n            {fileUp && (\r\n                <div id='add-file-up'>\r\n                    <img  src={URL.createObjectURL(fileUp)} alt='fileUp'/>\r\n                    <button id='add-file-up-close' onClick={handleClearFileUpload}>X</button>\r\n                </div>\r\n            ) }\r\n            <div id='add-post-wrapper'>\r\n                <textarea\r\n                    id='add-post-text'\r\n                    style={{height:`${lineHeight}px`}} \r\n                    type=\"text\" \r\n                    value={postText}\r\n                    placeholder={`Whats on your mind,${user.username} ?`}\r\n                    onChange={handlePostTextChange}\r\n                    />\r\n                <GrEmoji id='add-input-emoji' onClick={(e) => {handleEmojiPopOpen(e)}}/>\r\n                {anchorEl && \r\n                    <EmojiPopUp \r\n                        anchorEl={anchorEl} \r\n                        handleClose={handleEmojiPopClose} \r\n                        handleAddEmoji={handleAddEmoji} \r\n                    />}\r\n            </div>\r\n                \r\n            <hr/>\r\n            <div id='add-post-action'>\r\n                <Dropzone onDrop={handleDrop}>\r\n                        {({ getRootProps, getInputProps }) => (\r\n                            <section>\r\n                            <div {...getRootProps()}>\r\n                                <input {...getInputProps()} />\r\n                                <div id='img-up-btn'>\r\n                                    <img src={require('../../resources/icons/imageUpload.png')} alt='imgUpIcon' />\r\n                                </div>\r\n                            </div>\r\n                            </section>\r\n                        )}\r\n                </Dropzone>\r\n                <button id='add-post-btn' onClick={handleSubmit} disabled={!postText.length && !Boolean(fileUp)}>Post</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction PostCreate(props) {\r\n\r\n    const { user } = props\r\n\r\n    const [modalView, setModalView] = useState(false)\r\n    const [file, setFile] = useState(null)\r\n    const [post, setPost] = useState('')\r\n    const [postType, setPostType] = useState('Private')\r\n    \r\n\r\n    const handlePostSubmit = () => {\r\n        console.log('[SUBMIT]',post,postType,file)\r\n        const fd = new FormData()\r\n        fd.append('file', file)\r\n        fd.append('post',post)\r\n        fd.append('postType',postType)\r\n        props.dispatch(startCreateNewPost(fd))\r\n        handlePostModal()\r\n        setFile(null)\r\n        setPost('')\r\n        setPostType('Private')\r\n    }\r\n\r\n    const handleClearFileUpload = () => {\r\n        setFile(null)\r\n    }\r\n\r\n    const handlePassPostData = (post,type) => {\r\n        setPost(post)\r\n        setPostType(type)\r\n    }\r\n\r\n    const handleDrop = (file) => {\r\n        // const fd = new FormData()\r\n        // fd.append('file', file[0])\r\n        // fd.append('type','image/video')\r\n        setFile(file[0])\r\n        if(!modalView){\r\n            setModalView(!modalView)\r\n        }\r\n    }\r\n\r\n    const handlePostModal = () => {\r\n        setModalView(!modalView)\r\n    }\r\n\r\n    return (\r\n        <div id='create-post-container'>\r\n            {modalView && <PostModal \r\n                modalStatus={modalView}\r\n                handleModalStatus={handlePostModal}\r\n                addPost={\r\n                    <AddPost \r\n                        handleDrop={handleDrop} \r\n                        user={user} \r\n                        fileUp={file}\r\n                        post={post}\r\n                        pType={postType}\r\n                        handleClearFileUpload={handleClearFileUpload}\r\n                        handlePassPostData={handlePassPostData}\r\n                        handleSubmit={handlePostSubmit}\r\n                    />}\r\n                />}\r\n            <div id='ava-input'>\r\n                <Avatar id='post-avatar' src={user.profileImg} />\r\n                <input id='input-post' type=\"text\" placeholder={`Whats on your mind,${user.username} ?`} readOnly onClick={handlePostModal}/>\r\n            </div>\r\n            <hr/>\r\n            <div id='post-action'>\r\n                <Dropzone onDrop={handleDrop}>\r\n                        {({ getRootProps, getInputProps }) => (\r\n                            <section>\r\n                            <div {...getRootProps()}>\r\n                                <input {...getInputProps()} />\r\n                                <div id='img-up-btn'>\r\n                                <img src={require('../../resources/icons/imageUpload.png')} alt='imgUpIcon' />\r\n                                Image</div>\r\n                            </div>\r\n                            </section>\r\n                        )}\r\n            </Dropzone>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.login\r\n    }\r\n}\r\nexport default connect(mapStateToProps)(PostCreate)\r\n","import React from 'react'\r\nimport { connect } from  'react-redux'\r\nimport PostCardItem from '../reusables/PostCardItem'\r\nimport { startDeletePost } from '../../redux/actions/postsAction'\r\n\r\n\r\nfunction PostList(props) {\r\n    const { posts, userId } = props\r\n    console.log(posts,'-----> posts')\r\n    const handleDeletePost = (id, type) => {\r\n        console.log('deletePost',id,type)\r\n        props.dispatch(startDeletePost(id,type))\r\n    }\r\n    return(\r\n        <div>\r\n            {posts?.map(post => {\r\n                return <PostCardItem \r\n                    key={post._id} \r\n                    post={post} \r\n                    userId={userId} \r\n                    handleDeletePost={handleDeletePost}\r\n                />\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        posts: state.login.posts,\r\n        userId: state.login._id\r\n    }\r\n}\r\nexport default connect(mapStateToProps)(PostList)\r\n\r\n","import React from 'react'\r\nimport PostCreate from './PostCreate'\r\nimport PostList from './PostList'\r\n\r\nfunction PostManager() {\r\n    return (\r\n        <div>\r\n            <PostCreate/>\r\n            <PostList />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PostManager\r\n","import { useEffect } from 'react'\r\nimport socket from '../../services/socket'\r\nimport { connect } from 'react-redux'\r\nimport { addNewPublicPost, addNewPost } from '../../redux/actions/postsAction'\r\n\r\nfunction PostListener(props) {\r\n    //! SOCKETS\r\n    const publicPostFromServer = (post) => {\r\n        console.log(post,'[POST_SERVER-PUBLIC]')\r\n        props.dispatch(addNewPublicPost(post))\r\n    }\r\n\r\n    const friendPostFromServer = (post) => {\r\n        console.log(post,'[POST_SERVER-FRIEND]')\r\n        props.dispatch(addNewPost(post))\r\n    }\r\n    \r\n    const connectSocket = () => {\r\n        console.log('socketFnPosts() connected on load')\r\n\r\n        socket.on('publicPost',publicPostFromServer)\r\n        socket.on('addNewFriendPost',friendPostFromServer)\r\n    }\r\n\r\n    useEffect(() => {\r\n        connectSocket()\r\n        return () => {\r\n            console.log('socket listening closed')\r\n            socket.off('publicPost', publicPostFromServer)\r\n            socket.off('addNewFriendPost', friendPostFromServer)\r\n        }\r\n        // eslint-disable-next-line\r\n    },[])\r\n    //! ----SOCKETS\r\n\r\n    return (null)\r\n}\r\n\r\nexport default connect()(PostListener)\r\n","import React, { useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport socket from '../../services/socket'\r\n//import './App.css'\r\nimport { BrowserRouter, Switch, Route } from 'react-router-dom'\r\n\r\n//material-ui\r\nimport { Container } from '@material-ui/core'\r\n\r\n\r\nimport Home from './Home';\r\nimport Login from '../register-login/Login';\r\nimport Navbar from './nav-bar/Navbar';\r\nimport Register from '../register-login/Register'\r\nimport Search from '../search/Search';\r\nimport ChatShell from '../chat-box/container-main/ChatShell';\r\nimport Friends from './Friends';\r\nimport VideoCall from '../video-call/VideoCall'\r\nimport InterCom from './InterCom'\r\nimport VideoListener from '../socket-listeners/VideoListener'\r\nimport MessageListener from '../socket-listeners/MessageListener'\r\nimport PostManager from '../posts/PostManager'\r\nimport PostListener from '../socket-listeners/PostListener'\r\n\r\nfunction App(props) {\r\n\r\n  //! storing session via socket generated id\r\n  const { user } = props\r\n\r\n  useEffect(() => {\r\n    socket.emit('userId', { userId: user._id })\r\n  }, [user._id])  // only changes when there is change in account info, or will remain consistent\r\n  //!-------------sockets\r\n  return (\r\n    <BrowserRouter>\r\n      <div>\r\n        <Navbar />\r\n        <VideoListener />\r\n        <MessageListener />\r\n        <PostListener />\r\n        {/* <Container> */}\r\n          <Switch>\r\n            <Route exact path='/' component={Home} />\r\n            <Route path='/users/login' component={Login} />\r\n            <Route path='/users/register' component={Register} />\r\n            <Route path='/users/search' component={Search} />\r\n            <Route path='/users/friends' component={Friends} />\r\n            <Route path='/users/intercom' component={InterCom} />\r\n            <Route path='/users/chat' component={ChatShell} />\r\n            <Route path='/users/videocall/:id' component={VideoCall} />\r\n            <Route path='/users/videocall/' component={VideoCall} />\r\n            <Route path='/users/posts/' component={PostManager} />\r\n          </Switch>\r\n        {/* </Container> */}\r\n      </div>\r\n    </BrowserRouter>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.login\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(App)","const initialStateLogin = {\r\n  _id: '',\r\n  username: '',\r\n  email: '',\r\n  profileImg:'',\r\n  notifications: [],\r\n  friends: [],\r\n  posts: []\r\n}\r\n\r\nconst loginReducer = (state = initialStateLogin, action) => {\r\n  switch (action.type) {\r\n\r\n    case 'SET_USER_DATA': {\r\n      return Object.assign({}, state, {\r\n        _id: action.payload._id,\r\n        username: action.payload.username,\r\n        email: action.payload.email,\r\n        profileImg: action.payload.profilePicUrl,\r\n        notifications: action.payload.notifications,\r\n        friends: action.payload.friends,\r\n        posts: action.payload.posts\r\n      })\r\n    }\r\n\r\n    case 'SET_SEND_MSG': {\r\n      const data = state.friends.map(friend => {\r\n          if(friend.info._id === action.payload._id){\r\n            friend.inbox.push(action.payload.inbox)\r\n            return friend\r\n          }\r\n          else {\r\n            return friend\r\n          }\r\n      })\r\n      //console.log('DATA-LOGIN-REDUCER',data)\r\n      return Object.assign({},state,{ friends: data })\r\n    }\r\n\r\n    case 'UPLOAD_FILE': {\r\n      const data = state.friends.map((friend) => {\r\n        if (friend.info._id === action.payload._id) {\r\n          friend.inbox.push(action.payload.inbox)\r\n          return friend\r\n        } else {\r\n          return friend\r\n        }\r\n      })\r\n      return Object.assign({}, state, { friends: data })\r\n    }\r\n\r\n    case 'UPDATE_FRIEND_LIST': {\r\n      return Object.assign({}, state, { friends: action.payload })\r\n    }\r\n\r\n    case 'FRIEND_CANCEL_REQUEST': {\r\n      const deleteRequest = state.friends.filter(friend => friend.info._id !== action.payload._id)\r\n      return Object.assign({},state,{ friends: deleteRequest })\r\n    }\r\n\r\n    case 'FRIEND_ACCEPT_REQUEST': {\r\n      const data = state.friends.map(friend => {\r\n        if(friend.info._id === action.payload._id){\r\n          friend.status = action.payload.status\r\n          friend.isFriend = action.payload.isFriend\r\n          return friend\r\n        }\r\n        else {\r\n          return friend\r\n        }\r\n      })\r\n      return Object.assign({},state,{ friends: data })\r\n    }\r\n\r\n    case 'FRIEND_REJECT_REQUEST': {\r\n      const rejectRequest = state.friends.filter(friend => friend.info._id !== action.payload._id)\r\n      return Object.assign({},state,{ friends: rejectRequest })\r\n    }\r\n\r\n    case 'FRIEND_REMOVE': {\r\n      const removeFriend = state.friends.filter(friend => friend.info._id !== action.payload._id)\r\n      return Object.assign({},state,{ friends: removeFriend })\r\n    }\r\n\r\n    case 'ADD_NEW_POST': {\r\n      const newPostArray = [action.payload].concat(state.posts)\r\n      return Object.assign({}, state, { posts: newPostArray })\r\n    }\r\n\r\n    case 'DELETE_POST': {\r\n      const newPostArray = action.payload\r\n      return Object.assign({}, state, { posts: newPostArray })\r\n    }\r\n\r\n    case 'CLEAR_USER_DATA': {\r\n      return Object.assign({}, state, {\r\n        _id: '',\r\n        username: '',\r\n        email: '',\r\n        profileImg:'',\r\n        notification: [],\r\n        friends:[],\r\n        posts: [],\r\n      })\r\n    }\r\n    default: {\r\n      return { ...state }\r\n    }\r\n  }\r\n}\r\n\r\nexport default loginReducer\r\n","const initialState = null\r\n\r\nconst selectedChatReducer = (state = initialState, action) => {\r\n    switch(action.type){\r\n        case 'SELECTED_ID': {\r\n            return state = action.payload\r\n        }\r\n        default: {\r\n            return state\r\n        }\r\n    }\r\n}\r\n\r\nexport default selectedChatReducer","const initialSearchResult = []\r\n\r\nconst searchReducer = ( state = initialSearchResult, action ) => {\r\n    switch(action.type){\r\n        case 'SET_SEARCH_RESULT': {\r\n            return state=action.payload\r\n        }\r\n        case 'SET_SENT_REQUEST': {\r\n            return state.map(user => {\r\n                if(user._id===action.payload._id){\r\n                    return Object.assign({},user, action.payload)\r\n                }\r\n                else{\r\n                    return Object.assign({},user)\r\n                }\r\n            })\r\n        }\r\n        case 'SET_CANCEL_REQUEST': {\r\n            return state.map(user => {\r\n                if(user._id===action.payload._id){\r\n                    return Object.assign({},user, action.payload)\r\n                }\r\n                else{\r\n                    return Object.assign({},user)\r\n                }\r\n            })\r\n        }\r\n        case 'SET_ACCEPT_REQUEST': {\r\n            return state.map(user => {\r\n                if(user._id===action.payload._id){\r\n                    return Object.assign({},user, action.payload)\r\n                }\r\n                else{\r\n                    return Object.assign({},user)\r\n                }\r\n            })\r\n        }\r\n        case 'SET_REJECT_REQUEST': {\r\n            return state.filter(user => user._id !== action.payload._id)\r\n        }\r\n        case 'SET_REMOVE_FRIEND': {\r\n            return state.map(user => {\r\n                if(user._id===action.payload._id){\r\n                    return Object.assign({},user, action.payload)\r\n                }\r\n                else{\r\n                    return Object.assign({},user)\r\n                }\r\n            })\r\n        }\r\n        case 'CLEAR_SEARCH_RESULT': {\r\n            return state = []\r\n        }\r\n        default: {\r\n            return [...state]\r\n        }\r\n    }\r\n}\r\n\r\nexport default searchReducer","const initialChatState = {\r\n    'friends.info' : null,\r\n    'friends.inbox': null\r\n}\r\n\r\nconst chatReducer = (state = initialChatState, action) => {\r\n    switch(action.type){\r\n        case 'SET_CHAT_INBOX': {\r\n            return {\r\n                'state.friends.info': action.payload.data.friends.info,\r\n                'state.friends.inbox': action.payload.data.friends.inbox\r\n            }\r\n        }\r\n        default: {\r\n            return {...state}\r\n        }\r\n    }\r\n}\r\n\r\nexport default chatReducer","const initialCallState = {\r\n    signal: null,\r\n    inCall: false,\r\n    callInitiator: false,\r\n    callReceiving: false\r\n}\r\n\r\nconst callReducer = ( state = initialCallState, action ) => {\r\n    switch(action.type){\r\n        case 'SAVE_SIGNAL': {\r\n            return Object.assign({}, state, {signal: action.payload})\r\n        }\r\n        case 'INCALL_STATUS': {\r\n            return Object.assign({},state, {inCall: action.payload})\r\n        }\r\n        case 'INCALL_RECEIVING': {\r\n            return Object.assign({} , state, {inCall: action.payload, callReceiving: action.payload})\r\n        }\r\n        case 'INCALL_INITIATE': {\r\n            return Object.assign({}, state, {inCall:action.payload, callInitiator: action.payload})\r\n        }\r\n        case 'CLEAR_CALL_STATE': {\r\n            return Object.assign({}, state, {\r\n                signal: null,\r\n                inCall: false,\r\n                callInitiator: false,\r\n                callReceiving: false,\r\n            })\r\n        }\r\n        default: {\r\n            return state\r\n        }\r\n    }\r\n}\r\n\r\nexport default callReducer","const initialPostsState = []\r\n\r\nconst postReducer = (state = initialPostsState, action) => {\r\n    switch(action.type){\r\n        case 'SET_PUBLIC_POSTS': {\r\n            return state=action.payload\r\n        }\r\n        case 'ADD_NEW_PUBLIC_POST': {\r\n            return [action.payload].concat(state)\r\n        }\r\n        default: {\r\n            return [...state]\r\n        }\r\n    }\r\n}\r\n\r\nexport default postReducer","import { createStore, applyMiddleware, combineReducers } from 'redux'\r\nimport thunk from 'redux-thunk'\r\n\r\nimport loginReducer from '../reducers/loginReducer'\r\nimport selectedChatReducer from '../reducers/selectedChatReducer'\r\nimport searchReducer from '../reducers/searchReducer'\r\nimport chatReducer from '../reducers/chatReducer'\r\nimport callReducer from '../reducers/callReducer'\r\nimport publicPostReducer from '../reducers/publicPostReducer'\r\n\r\n\r\nconst configureStore = () => {\r\n    const store = createStore(combineReducers({\r\n        login: loginReducer,\r\n        selectedChat: selectedChatReducer,\r\n        searchResult: searchReducer,\r\n        chat: chatReducer,\r\n        call: callReducer,\r\n        publicPosts: publicPostReducer\r\n    }),applyMiddleware(thunk))\r\n    return store\r\n}\r\n\r\nexport default configureStore","import ReactDOM from 'react-dom'\r\nimport React from 'react'\r\nimport { Provider } from 'react-redux'\r\nimport App from './components/general/App'\r\nimport configureStore from './redux/store/configureStore'\r\nimport { startAccount } from './redux/actions/loginsAction'\r\n\r\nimport './styles/index.css'\r\nimport { startGetPublicPosts } from './redux/actions/postsAction'\r\n\r\nconst store = configureStore()\r\n\r\nstore.dispatch(startGetPublicPosts())\r\n\r\nif (localStorage.getItem('token')) {\r\n  store.dispatch(startAccount())\r\n}\r\n\r\nstore.subscribe(() => {\r\n  console.log(store.getState())\r\n})\r\n\r\nconst jsx = (\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>\r\n)\r\n\r\nReactDOM.render(jsx, document.getElementById('root'))\r\n"],"sourceRoot":""}