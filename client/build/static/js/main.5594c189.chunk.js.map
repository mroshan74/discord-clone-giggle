{"version":3,"sources":["styles/icons/logo.png","resources/icons/imageUpload.png","resources/icons/post.png","styles/icons/login-logo-blk.png","styles/assets/calling.gif","services/socket.js","components/reusables/DeletePostPopUp.js","components/reusables/PostCardItem.js","components/general/Home.js","redux/actions/loginsAction.js","components/register-login/Login.js","redux/actions/searchAction.js","components/general/Nav.js","components/register-login/Register.js","components/reusables/Card.js","components/search/Search.js","components/chat-box/grid-components/chats/chat-search/ChatSearch.js","components/chat-box/grid-components/chats/no-chat/NoChats.js","components/chat-box/grid-components/chats/chat-item/ChatItem.js","components/chat-box/grid-components/chats/chat-list/ChatList.js","components/chat-box/grid-components/chats/new-chat/NewChat.js","components/chat-box/grid-components/chat-title/ChatTitle.js","components/reusables/MessageModal.js","components/chat-box/grid-components/message/Message.js","components/chat-box/grid-components/message/MessageList.js","components/chat-box/grid-components/chat-form/ChatForm.js","redux/actions/chatsAction.js","components/chat-box/container-main/ChatShell.js","redux/actions/selectedChatAction.js","redux/actions/friendsAction.js","components/general/Friends.js","components/reusables/CallAlertModal.js","components/video-call/VideoCall.js","redux/actions/callAction.js","components/general/InterCom.js","components/reusables/CallModal.js","components/socket-listeners/VideoListener.js","components/socket-listeners/MessageListener.js","components/reusables/PostModal.js","components/reusables/EmojiPopUp.js","redux/actions/postsAction.js","components/posts/PostCreate.js","components/posts/PostList.js","components/posts/PostManager.js","components/socket-listeners/PostListener.js","components/general/App.js","redux/reducers/loginReducer.js","redux/reducers/selectedChatReducer.js","redux/reducers/searchReducer.js","redux/reducers/chatReducer.js","redux/reducers/callReducer.js","redux/reducers/publicPostReducer.js","redux/store/configureStore.js","index.js"],"names":["module","exports","socket","io","DeletePostPopUp","props","anchorEl","handleClose","handleDeletePost","post","open","Boolean","id","undefined","Popover","onClose","anchorOrigin","vertical","horizontal","transformOrigin","onClick","postId","postType","publicPostId","_id","PostCardItem","userId","useState","openEdit","setOpenEdit","setAnchorEl","editPost","createdBy","e","currentTarget","deletePostPop","Avatar","src","profilePicUrl","username","moment","createdAt","format","FormControl","Select","disableUnderline","value","readOnly","displayEmpty","MenuItem","uploadPath","alt","isLiked","length","isDisliked","comments","connect","state","publicPosts","login","style","color","map","key","getToken","localStorage","getItem","startLogin","fd","redirect","axios","then","response","console","log","data","hasOwnProperty","alert","error","authToken","token","setItem","window","location","reload","catch","err","Login","email","password","show","handleChange","setState","target","name","handleShow","prevState","handleSubmit","preventDefault","formData","dispatch","history","push","className","require","onSubmit","this","htmlFor","type","onChange","placeholder","to","Component","NavBar","children","NavItem","styleClassLi","styleClass","user","useHistory","change","searchUser","setSearchUser","logo","headers","getSearch","message","payload","startGetSearch","TextField","variant","InputProps","startAdornment","InputAdornment","position","Badge","badgeContent","notifications","PostIcon","removeItem","href","registerSchema","object","shape","string","required","min","confirmPass","oneOf","ref","showPass","setShowPass","handleShowPass","initialValues","validationSchema","values","setSubmitting","regEnable","res","keyPattern","startRegister","isSubmitting","errors","touched","isValid","Box","marginBottom","FormGroup","label","as","helperText","endAdornment","IconButton","Button","disabled","Card","CardList","img","isFriend","sendByMe","status","handleRequest","handleAccept","handleReject","handleRemove","results","searchResult","resData","startCancelRequest","startSendRequest","handleAcceptRequest","startAcceptRequest","handleRejectRequest","startRejectRequest","handleRemoveFriend","startRemoveFriend","ChatSearch","NoChats","ChatItem","latestMsg","latestMsgDate","chat","isActive","onChatItemSelected","classNames","latestMsgObj","inbox","slice","sort","a","b","localeCompare","pop","info","fromNow","ChatList","chats","selectedChat","displayChat","filter","chatItems","chatIsActive","NewChat","ChatTitle","connectToId","chatTitleContents","useStyles","makeStyles","theme","modal","display","alignItems","justifyContent","paper","backgroundColor","palette","background","boxShadow","shadows","MessageModal","classes","React","setOpen","modalStatus","Modal","aria-labelledby","aria-describedby","handleModalStatus","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","timeout","Fade","in","Message","isMyMessage","imageUrl","imageAlt","msgClass","avatar","msgType","MessageList","messageItems","messagesEndRef","useRef","msg","useEffect","current","scrollIntoView","behavior","ChatForm","onMessageSubmitted","onFileUpload","setMessage","formContents","onDrop","file","FormData","append","getRootProps","getInputProps","setSendMsg","friends","selectedId","chatContent","storeSelectedId","getData","startSendMsg","startUploadFile","startCancelFriendRequest","startAcceptFriendRequest","startRejectFriendRequest","startFriendRemove","get","friend","CallModal","view","callState","call","userVideo","partnerVideo","getStreamRef","callEnd","callEngaged","viewCall","setViewCall","stream","setStream","callAccepted","setCallAccepted","callerSignal","setCallerSignal","caller","setCaller","offline","setOffline","offlineMsg","setOfflineMsg","signal","receiverId","match","params","query","queryString","parse","search","parseBooleans","ClientVideo","PartnerVideo","videoCssEle","isReceiving","callReceiving","navigator","mediaDevices","getUserMedia","video","audio","srcObject","receiving","from","getTracks","forEach","track","readyState","stop","emit","off","peer","Peer","initiator","trickle","serverEndCall","destroy","setTimeout","on","userToCall","signalData","callPeer","connectId","attend","acceptCall","playsInline","muted","autoPlay","controls","InterCom","pic","handleAttendCall","handleRejectCall","callerName","setCallerName","callerPic","setCallerPic","dataPack","setDataPack","setAttend","setQuery","inCallReceiving","videoSignalData","pack","saveSignal","callInitiator","path","connect_id","msgFromServer","PostModal","addPost","EmojiPopUp","handleAddEmoji","title","emoji","onSelect","addNewPost","AddPost","handleDrop","fileUp","pType","handleClearFileUpload","handlePassPostData","setPostType","postText","setPostText","lineHeight","setLineHeight","profileImg","URL","createObjectURL","height","scrollHeight","handleEmojiPopOpen","native","modalView","setModalView","setFile","setPost","handlePostModal","newPost","startCreateNewPost","posts","put","retPost","startDeletePost","PostManager","publicPostFromServer","friendPostFromServer","Container","exact","component","Home","Register","Search","Friends","ChatShell","VideoCall","initialStateLogin","loginReducer","action","Object","assign","deleteRequest","rejectRequest","removeFriend","newPostArray","concat","notification","selectedChatReducer","initialSearchResult","searchReducer","initialChatState","chatReducer","initialCallState","inCall","callReducer","initialPostsState","postReducer","configureStore","createStore","combineReducers","publicPostReducer","applyMiddleware","thunk","store","getPosts","setAccount","subscribe","getState","jsx","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5594c189.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.f895a17f.png\";","module.exports = __webpack_public_path__ + \"static/media/imageUpload.73a9f061.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF42lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDggNzkuMTY0MDM2LCAyMDE5LzA4LzEzLTAxOjA2OjU3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMCAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIwLTA3LTIwVDEyOjUzOjM1KzA1OjMwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMC0wNy0yMFQxMzowMToyMCswNTozMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMC0wNy0yMFQxMzowMToyMCswNTozMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1YjFkMWUwOS0xZWEwLTM4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\"","module.exports = __webpack_public_path__ + \"static/media/login-logo-blk.6421f490.png\";","module.exports = __webpack_public_path__ + \"static/media/calling.d2cab8e3.gif\";","import io from 'socket.io-client'\r\n//import { SOCKET_URL } from 'config'\r\n\r\nlet server = 'http://localhost:7303'\r\nconst socket = io(server) \r\n\r\nexport default socket\r\n","import React from 'react'\r\nimport Popover from '@material-ui/core/Popover'\r\nimport { AiOutlineDelete } from 'react-icons/ai'\r\nimport './DeletePostPopUp.css'\r\n\r\nexport default function DeletePostPopUp(props) {\r\n  \r\n  const { anchorEl, handleClose, handleDeletePost, post} = props\r\n\r\n  const open = Boolean(anchorEl)\r\n  const id = open ? 'DeletePostPopUp' : undefined\r\n\r\n  return (\r\n    <div>\r\n      <Popover\r\n        id={id}\r\n        open={open}\r\n        anchorEl={anchorEl}\r\n        onClose={handleClose}\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'left',\r\n        }}\r\n        transformOrigin={{\r\n          vertical: 'top',\r\n          horizontal: 'right',\r\n        }}\r\n      >\r\n        <div id='postDelete-pop-container'>\r\n          <p>Are you sure ?</p>\r\n          <button onClick={\r\n            () => {\r\n                    let postId = null\r\n                    if(post.postType === 'Public'){\r\n                        postId = post.publicPostId\r\n                    }else{\r\n                        postId = post._id\r\n                    }\r\n                    handleDeletePost(postId,post.postType)\r\n                    handleClose()\r\n                  }\r\n          }><AiOutlineDelete/></button>\r\n        </div>\r\n      </Popover>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState, Fragment } from 'react'\r\nimport moment from 'moment'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport Select from '@material-ui/core/Select'\r\nimport { BsLockFill } from 'react-icons/bs'\r\nimport { FaUserFriends } from 'react-icons/fa'\r\nimport { MdPublic } from 'react-icons/md'\r\nimport { GrLike } from 'react-icons/gr'\r\nimport { GrDislike } from 'react-icons/gr'\r\nimport { GoCommentDiscussion } from 'react-icons/go'\r\nimport { FiEdit } from 'react-icons/fi'\r\nimport { AiOutlineDelete } from 'react-icons/ai'\r\nimport './PostCardItem.css'\r\nimport DeletePostPopUp from './DeletePostPopUp'\r\n\r\nfunction PostCardItem(props) {\r\n    const { post, userId, handleDeletePost } = props\r\n    const [openEdit, setOpenEdit] = useState(false)\r\n    const [anchorEl, setAnchorEl] = useState(null)\r\n\r\n    const deletePostPop = (e) => {\r\n        setAnchorEl(e.currentTarget)\r\n    }\r\n    const handleDelPostPopClose = () => {\r\n        setAnchorEl(null)\r\n    }\r\n    const handleEditPostModal= () => {\r\n        setOpenEdit(!openEdit)\r\n    }\r\n    let editPost = null \r\n    if(post?.createdBy._id === userId){\r\n        editPost = (\r\n            <Fragment>\r\n                <button id='postCardItem-edit' onClick={handleEditPostModal}><FiEdit/></button>\r\n                <button id='postCardItem-delete' onClick={\r\n                    (e) => {deletePostPop(e)}}><AiOutlineDelete/></button>\r\n                    {anchorEl && <DeletePostPopUp \r\n                            anchorEl={anchorEl} \r\n                            post= {post} \r\n                            handleDeletePost={handleDeletePost}\r\n                            handleClose= {handleDelPostPopClose}\r\n                        />}\r\n            </Fragment>\r\n        )\r\n    }\r\n    \r\n    return(\r\n        <div id='postCardItem-container'>\r\n            <div id='postCardItem-title'>\r\n                <Avatar id='postCardItem-avatar' src={post.createdBy.profilePicUrl} />\r\n                <div id='postCardItem-userDate'>\r\n                    <h4>{post.createdBy.username}</h4>\r\n                    <p>{moment(post.createdAt).format('LLL')}</p>\r\n                </div>\r\n                <div id='postCardItem-miniAct'>\r\n                    <FormControl id=\"postCardItem-control\">\r\n                        <Select\r\n                        disableUnderline={true}\r\n                        value={post.postType}\r\n                        readOnly\r\n                        displayEmpty\r\n                        >\r\n                            <MenuItem id='\"postCardItem-select' value={'Private'}><BsLockFill/></MenuItem>\r\n                            <MenuItem id='\"postCardItem-select' value={'Friends'}><FaUserFriends/></MenuItem>\r\n                            <MenuItem id='\"postCardItem-select' value={'Public'}><MdPublic/></MenuItem>\r\n                        </Select>\r\n                    </FormControl>\r\n                    {editPost}\r\n                </div>\r\n            </div>\r\n            <hr/>\r\n            <div id='postCardItem-post'>\r\n                {post.uploadPath && <img src={post.uploadPath} alt={post._id}/>}\r\n                <p>{post.post}</p>\r\n            </div>\r\n            <hr/>\r\n            <div id='postCardItem-action'>\r\n                <button ><GrLike/><span>{post.isLiked.length}</span></button>\r\n                <button><GrDislike/><span>{post.isDisliked.length}</span></button>\r\n                <button><GoCommentDiscussion/><span>{post.comments.length}</span></button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PostCardItem\r\n","import React from 'react'\r\nimport PostCardItem from '../reusables/PostCardItem'\r\nimport { connect } from 'react-redux'\r\n\r\nfunction Home(props) {\r\n    const { publicPosts, userId } = props\r\n    return (\r\n        <div>\r\n            <h1 style={{color: 'white'}}>Welcome to Giggle-DisBot</h1>\r\n            {publicPosts?.map(post => {\r\n                return <PostCardItem key={post._id} post={post} userId={userId}/>\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        publicPosts: state.publicPosts,\r\n        userId: state.login._id\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Home)","import axios from 'axios'\r\nconst getToken = localStorage.getItem('token')\r\n\r\n//------------------register\r\nexport const startRegister = (fd, redirect ,regEnable) => {\r\n  return () => {\r\n    axios\r\n      .post(`/users/register`, fd)\r\n      .then((response) => {\r\n        console.log('[PROMISE-login]', response.data)\r\n        const res = response.data\r\n        // if (res.hasOwnProperty('errors')) {\r\n        //   alert('invalid/format username or password')\r\n        // } else \r\n        if (res.hasOwnProperty('keyPattern')) {\r\n          if (res.keyPattern.email === 1) {\r\n            alert('email already exists')\r\n            regEnable()\r\n          } else {\r\n            alert('username already exists')\r\n            regEnable()\r\n          }\r\n        } else {\r\n          alert('Successfully registered')\r\n          regEnable()\r\n          redirect()\r\n        }\r\n      })\r\n      .catch((err) => console.log('ERROR-login', err))\r\n  }\r\n}\r\n\r\n//------------------------login\r\n\r\nexport const startLogin = (fd, redirect) => {\r\n  return () => {\r\n    axios\r\n      .post('/users/login', fd)\r\n      .then((response) => {\r\n        console.log('[PROMISE-token-login]', response.data)\r\n        if (response.data.hasOwnProperty('error')) {\r\n          alert(response.data.error)\r\n        } else {\r\n          const authToken = response.data.token\r\n          localStorage.setItem('token', authToken)\r\n          alert('Login Successful')\r\n          redirect()\r\n          window.location.reload()\r\n        }\r\n      })\r\n      .catch((err) => console.log(err))\r\n  }\r\n}\r\n\r\n//-----------------logout\r\nexport const clearUser = () => {\r\n  return { type: 'CLEAR_USER_DATA' }\r\n}\r\nexport const startLogout = () => {\r\n  return (dispatch) => {\r\n    localStorage.removeItem('token')\r\n    dispatch(clearUser())\r\n    window.location.href = '/'\r\n    //window.location.reload()\r\n  }\r\n}\r\n\r\n//-------------------account\r\nexport const setAccount = (data) => {\r\n  return { type: 'SET_USER_DATA', payload: data }\r\n}\r\n\r\nexport const startAccount = () => {\r\n  return (dispatch) => {\r\n    axios\r\n      .get('/users/account', { headers: { 'x-auth': getToken } })\r\n      .then((response) => {\r\n        console.log('[PROMISE-login-acc]', response.data)\r\n        const data = response.data\r\n        if(data.hasOwnProperty('errors')){\r\n          localStorage.removeItem('token')\r\n          alert('session expired')\r\n          window.location.href = '/users/login'\r\n        }else{\r\n          dispatch(setAccount(data))\r\n        }\r\n      })\r\n      .catch((err) => console.log(err))\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { startLogin } from '../../redux/actions/loginsAction'\r\nimport { Link } from 'react-router-dom'\r\nimport '../../styles/login.css'\r\nclass Login extends Component {\r\n  state = {\r\n    email: '',\r\n    password: '',\r\n    show: false,\r\n  }\r\n  handleChange = (e) => {\r\n    this.setState({ [e.target.name]: e.target.value })\r\n  }\r\n  handleShow = () => {\r\n    this.setState((prevState) => ({\r\n      show: !prevState.show,\r\n    }))\r\n  }\r\n  handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    const redirect = () => {\r\n      return this.props.history.push('/')\r\n    }\r\n    const { email, password } = this.state\r\n    const formData = {\r\n      email,\r\n      password,\r\n    }\r\n    console.log(formData)\r\n    this.props.dispatch(startLogin(formData,redirect))\r\n  }\r\n  render() {\r\n    return (\r\n      <div className='login-container'>\r\n        <div className='login-logo'>\r\n          <img className={'login-logo-img'} src={require('../../styles/icons/login-logo-blk.png')} alt='logo' />\r\n        </div>\r\n        <form className='login-form' onSubmit={this.handleSubmit}>\r\n          <div className='form-control'>\r\n            <label htmlFor='email'>Email</label>\r\n            <input\r\n              type='email'\r\n              name='email'\r\n              id='email'\r\n              value={this.state.email}\r\n              onChange={this.handleChange}\r\n              placeholder='Enter your email'\r\n            />\r\n          </div>\r\n\r\n          <div className='form-control'>\r\n            <label htmlFor='password'>Password</label>\r\n            <input\r\n              type={this.state.show ? 'text' : 'password'}\r\n              name='password'\r\n              id='password'\r\n              value={this.state.password}\r\n              onChange={this.handleChange}\r\n              placeholder='Password'\r\n            />\r\n          </div>\r\n\r\n          <div className='checkbox-control'>\r\n            <div>\r\n              <input\r\n                type='checkbox'\r\n                name='show'\r\n                id='show'\r\n                value={this.state.show}\r\n                onClick={this.handleShow}\r\n              />\r\n              <label htmlFor='show'>Show password</label>\r\n            </div>\r\n            <Link className='link' to='#'>\r\n              Forgot Password ?\r\n            </Link>\r\n          </div>\r\n\r\n          <input className='btn-login' type='submit' value='Sign In' />\r\n          <small>\r\n            Don't have an account?\r\n            <Link className='link' to='/users/register'>\r\n              Sign Up\r\n            </Link>\r\n          </small>\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default  connect()(Login)\r\n","import axios from 'axios'\r\nconst getToken = localStorage.getItem('token')\r\n\r\nexport const setSearchResult = (data) => {\r\n    return { type: 'SET_SEARCH_RESULT', payload: data}\r\n}\r\n\r\nexport const clearSearchResult = () => {\r\n    return { type: 'CLEAR_SEARCH_RESULT' }\r\n}\r\n\r\nexport const startGetSearch = (fd) => {\r\n    return(dispatch) => {\r\n        axios.post('/users/search',fd,{\r\n            headers: {\r\n                'x-auth':getToken\r\n            }\r\n        })\r\n            .then((response)=> {\r\n                console.log('[PROMISE-search]',response.data)\r\n                const getSearch = response.data\r\n                if(getSearch.hasOwnProperty('errors')){\r\n                    dispatch(clearSearchResult())\r\n                    alert(`${getSearch.message}`)\r\n                }else{\r\n                    dispatch(setSearchResult(getSearch))\r\n                }\r\n            })\r\n            .catch((err) => console.log(err))\r\n    }\r\n}\r\n\r\n//-----------------sent request\r\nexport const sendReq = (data) => {\r\n    return { type: 'SET_SENT_REQUEST', payload: data }\r\n}\r\n\r\nexport const startSendRequest = (id,fd) => {\r\n    return (dispatch) => {\r\n        axios.post(`/users/search/sendRequest/${id}`,fd,{\r\n            headers: { \r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then((response) => {\r\n                console.log('[PROMISE-search-send-request]', response.data)\r\n                const resData = response.data\r\n                if(resData.hasOwnProperty('errors')){\r\n                    alert(resData.message)\r\n                }\r\n                else{\r\n                    dispatch(sendReq(resData))\r\n                }\r\n            })\r\n        }\r\n}\r\n\r\n//------------------ cancel request\r\nexport const cancelReq = (data) => {\r\n    return { type: 'SET_CANCEL_REQUEST', payload: data }\r\n}\r\n\r\nexport const startCancelRequest = (id,fd) => {\r\n    return (dispatch) => {\r\n        axios.post(`/users/search/cancelRequest/${id}`,fd,{\r\n            headers: { \r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then((response) => {\r\n                console.log('[PROMISE-search-cancel-request]',response.data)\r\n                const resData = response.data\r\n                if(resData.hasOwnProperty('errors')){\r\n                    alert(resData.message)\r\n                }\r\n                else{\r\n                    dispatch(cancelReq(resData))\r\n                }\r\n            })\r\n        }\r\n}\r\n\r\n//accept request\r\nexport const acceptReq = (data) => {\r\n    return { type: 'SET_ACCEPT_REQUEST', payload: data }\r\n}\r\n\r\nexport const startAcceptRequest = (id,fd) => {\r\n    return (dispatch) => {\r\n        axios.post(`/users/search/acceptRequest/${id}`,fd,{\r\n            headers: { \r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then((response) => {\r\n                console.log('[PROMISE-search-accept-request]',response.data)\r\n                const resData = response.data\r\n                if(resData.hasOwnProperty('errors')){\r\n                    alert(resData.message)\r\n                }\r\n                else{\r\n                    dispatch(acceptReq(resData))\r\n                }\r\n            })\r\n        }\r\n}\r\n\r\n\r\n//reject request\r\nexport const rejectReq = (data) => {\r\n    return { type: 'SET_REJECT_REQUEST', payload: data }\r\n}\r\n\r\nexport const startRejectRequest = (id,fd) => {\r\n    return (dispatch) => {\r\n        axios.post(`/users/search/rejectRequest/${id}`,fd,{\r\n            headers: { \r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then((response) => {\r\n                console.log('[PROMISE-search-reject-request]',response.data)\r\n                const resData = response.data\r\n                if(resData.hasOwnProperty('errors')){\r\n                    alert(resData.message)\r\n                }\r\n                else{\r\n                    dispatch(rejectReq(resData))\r\n                }\r\n            })\r\n        }\r\n}\r\n\r\n\r\n//remove friend\r\nexport const removeFriend = (data) => {\r\n    return { type: 'SET_REMOVE_FRIEND', payload: data }\r\n}\r\n\r\nexport const startRemoveFriend = (id,fd) => {\r\n    return (dispatch) => {\r\n        axios.post(`/users/search/removeFriend/${id}`,fd,{\r\n            headers: { \r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then((response) => {\r\n                console.log('[PROMISE-search-remove-friend]',response.data)\r\n                const resData = response.data\r\n                if(resData.hasOwnProperty('errors')){\r\n                    alert(resData.message)\r\n                }\r\n                else{\r\n                    dispatch(removeFriend(resData))\r\n                }\r\n            })\r\n        }\r\n}","import React from 'react'\r\nimport { Link , useHistory } from 'react-router-dom'\r\n// ! https://stackoverflow.com/questions/54579730/react-hooks-with-react-router-v4-how-do-i-redirect-to-another-route\r\n\r\n// material-ui \r\nimport InputAdornment from '@material-ui/core/InputAdornment'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Badge from '@material-ui/core/Badge'\r\nimport { BsSearch } from 'react-icons/bs'\r\nimport { FiMail } from 'react-icons/fi'\r\nimport { FaSignOutAlt } from 'react-icons/fa'\r\nimport { BsChatDots } from 'react-icons/bs'\r\nimport { FaUserFriends } from 'react-icons/fa'\r\n\r\nimport { connect } from 'react-redux'\r\nimport { useState } from 'react'\r\nimport { startLogout } from '../../redux/actions/loginsAction'\r\nimport '../../styles/nav.css'\r\n\r\nimport logo from '../../styles/icons/logo.png'\r\nimport { startGetSearch } from '../../redux/actions/searchAction'\r\nimport PostIcon from '../../resources/icons/post.png'\r\n\r\n\r\nfunction Nav(props) {\r\n\r\n    const history = useHistory()\r\n    const change = localStorage.getItem('token')\r\n    \r\n    const [searchUser,setSearchUser] = useState('')\r\n    const handleChange = (e) =>{\r\n        setSearchUser(e.target.value)\r\n        // console.log('print',e.target.value)\r\n    }\r\n\r\n    const handleSearch = (e) => {\r\n        e.preventDefault()\r\n        const fd = { searchUser }\r\n        props.dispatch(startGetSearch(fd))\r\n        console.log('submit',searchUser)\r\n        history.push('/users/search')\r\n    }\r\n    \r\n    const handleLogout = () => {\r\n        props.dispatch(startLogout())\r\n    }\r\n    \r\n    console.log('nav----',change)\r\n    console.log('USER--------',props.user)\r\n\r\n    return (\r\n        <div>\r\n            {change ? \r\n            (\r\n                <NavBar >\r\n                    <img src={logo} alt='chatbot' className='logo' onClick={() => {history.push('/')}}/>\r\n                    <form className='search-bar' onSubmit={handleSearch}>\r\n                        <TextField\r\n                            className='search-input'\r\n                            variant='outlined'\r\n                            placeholder='Search...'\r\n                            onChange={handleChange}\r\n                            value={searchUser}\r\n                            InputProps={{\r\n                            startAdornment: (\r\n                                <InputAdornment position='start'>\r\n                                    <BsSearch />\r\n                                </InputAdornment>\r\n                            ),\r\n                            }}\r\n                        />\r\n                    </form>\r\n                    <NavItem \r\n                        to='/users/notifications' \r\n                        styleClass='badge'\r\n                        styleClassLi='badge-li'\r\n                        name={\r\n                                <Badge badgeContent={props.user.notifications.length} color=\"secondary\">\r\n                                    <FiMail />\r\n                                </Badge>\r\n                            }\r\n                    />\r\n                    <NavItem to='/users/posts' name={<img src={PostIcon} alt='postIcon'/>} styleClass='post-icon-nav'/>\r\n                    <NavItem to='/users/friends' name={<FaUserFriends/>} />\r\n                    <NavItem to='/users/chat' name={<BsChatDots/>}/>\r\n                    <NavItem to='#' name={<FaSignOutAlt/>} styleClass='sign-out' onClick = {handleLogout} />\r\n                </NavBar>\r\n            ):(\r\n                <NavBar >\r\n                    <img src={logo} alt='chatbot' className='logo' onClick={() => {history.push('/')}}/>\r\n                    <NavItem to='/users/register' name='Register' styleClassLi='register' styleClass='register-link'/>\r\n                    <NavItem to='/users/login' name='Sign In' styleClassLi='sign-in' styleClass='sign-in-link'/>\r\n                </NavBar>\r\n            )\r\n            }\r\n            <br/><br/>\r\n            <p>{props.user._id && <span>{props.user.username} - {props.user.email}</span>}</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction NavBar(props){\r\n    return (\r\n        <nav className='navbar'>\r\n            <ul className='navbar-nav'> {props.children} </ul>\r\n        </nav>\r\n    )\r\n}\r\nfunction NavItem(props){\r\n    return (\r\n        <li className={`nav-item ${props.styleClassLi}`}>\r\n            <Link className={`link-item ${props.styleClass}`} to={props.to} onClick={props.onClick}>{props.name}</Link>\r\n        </li>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        user: state.login\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Nav)\r\n\r\n","import React, { Fragment, useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Formik, Form, Field } from 'formik'\r\nimport { object, string, ref } from 'yup'\r\nimport { MdVisibility, MdVisibilityOff } from 'react-icons/md'\r\nimport {\r\n  Button,\r\n  TextField,\r\n  Box,\r\n  FormGroup,\r\n  InputAdornment,\r\n  IconButton,\r\n} from '@material-ui/core'\r\n\r\nimport '../../styles/form.css'\r\nimport { startRegister } from '../../redux/actions/loginsAction'\r\n\r\nconst registerSchema = object().shape({\r\n  username: string().required().min(4, 'minimum 4 characters'),\r\n  email: string().email().required(),\r\n  password: string().required().min(6, 'minimum 6 characters'),\r\n  confirmPass: string().oneOf([ref('password')], 'password must match'),\r\n\r\n  //🧾https://til.hashrocket.com/posts/vahuw4phan-check-the-password-confirmation-with-yup\r\n})\r\n\r\n// ! https://dev.to/finallynero/react-form-using-formik-material-ui-and-yup-2e8h\r\n// ! https://medium.com/@kmerandi25/react-form-validation-with-formik-material-ui-and-yup-1cd92eac887\r\n\r\nfunction Register(props) {\r\n  const [showPass, setShowPass] = useState(false)\r\n  const handleShowPass = () => {\r\n    console.log(showPass, 'showPass')\r\n    setShowPass(!showPass)\r\n  }\r\n  const redirect = () => {\r\n    props.history.push('/users/login')\r\n  }\r\n  return (\r\n    <div className='form-container'>\r\n      <Formik\r\n        initialValues={{\r\n          username: '',\r\n          password: '',\r\n          confirmPass: '',\r\n          email: ''\r\n        }}\r\n        validationSchema={registerSchema}\r\n        onSubmit={(values, { setSubmitting }) => {\r\n          const regEnable = () => {\r\n            setSubmitting(false)\r\n          }\r\n          const fd = {\r\n            ...values\r\n          }\r\n          //console.log(fd, setSubmitting)\r\n          props.dispatch(startRegister(fd,redirect,regEnable))\r\n        }}\r\n      >\r\n        {({ isSubmitting, values, errors, touched, isValid }) => (\r\n          <Fragment>\r\n            <div className='form-register'>\r\n              <h1>Register</h1>\r\n              <Form>\r\n                <Box marginBottom={2}>\r\n                  <FormGroup>\r\n                    <Field\r\n                      error={touched.username && Boolean(errors.username)}\r\n                      type='text'\r\n                      name='username'\r\n                      label='Username'\r\n                      variant='outlined'\r\n                      as={TextField}\r\n                      helperText={touched.username && errors.username}\r\n                    />\r\n                  </FormGroup>\r\n                </Box>\r\n                <Box marginBottom={2}>\r\n                  <FormGroup>\r\n                    <Field\r\n                      error={touched.email && Boolean(errors.email)}\r\n                      helperText={touched.email && errors.email}\r\n                      type='email'\r\n                      name='email'\r\n                      label='Email'\r\n                      variant='outlined'\r\n                      as={TextField}\r\n                    />\r\n                  </FormGroup>\r\n                </Box>\r\n                <Box marginBottom={2}>\r\n                  <FormGroup>\r\n                    <Field\r\n                      error={touched.password && Boolean(errors.password)}\r\n                      helperText={touched.password && errors.password}\r\n                      type={showPass ? 'text' : 'password'}\r\n                      name='password'\r\n                      label='Password'\r\n                      variant='outlined'\r\n                      as={TextField}\r\n                      InputProps={{\r\n                        endAdornment: (\r\n                          <InputAdornment position='end'>\r\n                            <IconButton onClick={handleShowPass} className='icon-svg'>\r\n                              {showPass ? (\r\n                                <MdVisibility />\r\n                              ) : (\r\n                                <MdVisibilityOff />\r\n                              )}\r\n                            </IconButton>\r\n                          </InputAdornment>\r\n                        ),\r\n                      }}\r\n                    />\r\n                  </FormGroup>\r\n                </Box>\r\n                <Box marginBottom={2}>\r\n                  <FormGroup>\r\n                    <Field\r\n                      error={touched.confirmPass && Boolean(errors.confirmPass)}\r\n                      helperText={touched.confirmPass && errors.confirmPass}\r\n                      type='password'\r\n                      name='confirmPass'\r\n                      label='Confirm Password'\r\n                      variant='outlined'\r\n                      as={TextField}\r\n                    />\r\n                  </FormGroup>\r\n                </Box>\r\n                <Button\r\n                  variant='contained'\r\n                  color='primary'\r\n                  type='submit'\r\n                  className='btn-register'\r\n                  disabled={isSubmitting || !isValid}\r\n                >\r\n                  SIGN UP\r\n                </Button>\r\n                {/* <pre>{JSON.stringify(values, null, 4)}</pre>\r\n                <pre>{JSON.stringify(isSubmitting, null, 4)}</pre>\r\n                <pre>{JSON.stringify(errors, null, 4)}</pre>\r\n                <pre>{JSON.stringify(isValid, null, 4)}</pre> */}\r\n              </Form>\r\n            </div>\r\n          </Fragment>\r\n        )}\r\n      </Formik>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect()(Register)\r\n","import React, { Fragment } from 'react'\r\nimport './Card.css'\r\n\r\nexport function Card(props) {\r\n    return (\r\n        <div className='card'>\r\n            <ul className='card-wrap'>\r\n                {props.children}\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport function CardList(props) {\r\n    const {\r\n        img,username,_id,isFriend,sendByMe,status, handleRequest, handleAccept, handleReject,handleRemove\r\n    } = props\r\n    return (\r\n        <div className='card-item-wrap'>\r\n            <img className='avatar' src={img} alt={username} />\r\n            <li className='card-item'>{props.username}</li>\r\n            {\r\n                isFriend ?\r\n                <Fragment>\r\n                    {(sendByMe && status==='Pending') ? \r\n                        <button className='btn btn-cancel-friend' onClick={() => {handleRequest(_id,isFriend,sendByMe,status)}}>Cancel Request</button> :\r\n                        <Fragment>\r\n                            {status === 'Accepted' ? \r\n                                <button className='btn btn-remove-friend' onClick={() => {handleRemove(_id)}}>Remove Friend</button> : status=== 'Pending' &&\r\n                                <Fragment>\r\n                                    <button className='btn btn-accept-friend' onClick={() => {handleAccept(_id)}}>Accept</button>\r\n                                    <button className={'btn btn-reject-friend'} onClick={() => {handleReject(_id)}}>Reject</button>\r\n                                </Fragment>\r\n                        }\r\n                        </Fragment>\r\n                    }\r\n                </Fragment> \r\n                :\r\n                <button className='btn' onClick={() => {handleRequest(_id,isFriend)}}>Add Friend</button>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { Card, CardList } from '../reusables/Card'\r\nimport { startSendRequest, startCancelRequest, startAcceptRequest, startRejectRequest, startRemoveFriend } from '../../redux/actions/searchAction'\r\n\r\nfunction Search(props) {\r\n    const handleRequest = (id,isFriend,sendByMe,status) => {\r\n        if(!isFriend){\r\n            props.dispatch(startSendRequest(id))\r\n        }\r\n        else{\r\n            if(sendByMe && status === 'Pending'){\r\n                props.dispatch(startCancelRequest(id))\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleAcceptRequest = (id) => {\r\n        props.dispatch(startAcceptRequest(id))\r\n    }\r\n\r\n    const handleRejectRequest = (id) => {\r\n        props.dispatch(startRejectRequest(id))\r\n    }\r\n\r\n    const handleRemoveFriend = (id) => {\r\n        props.dispatch(startRemoveFriend(id))\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Card >\r\n                {props.results && props.results.map(user => {\r\n                    return <CardList \r\n                                key={user._id} \r\n                                username={user.username}\r\n                                img={user.profilePicUrl}\r\n                                isFriend={user.isFriend}\r\n                                status={user.status && user.status}\r\n                                handleRequest={handleRequest}\r\n                                _id={user._id}\r\n                                sendByMe={user.sendByMe}\r\n                                handleAccept={handleAcceptRequest}\r\n                                handleReject={handleRejectRequest}\r\n                                handleRemove={handleRemoveFriend}\r\n                            />\r\n                })}\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        results: state.searchResult\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Search)\r\n","import React from 'react'\r\n\r\nimport './ChatSearch.css'\r\n\r\nfunction ChatSearch(props) {\r\n    return (\r\n        <div id=\"search-container\">\r\n            <input type=\"text\" placeholder=\"Search\" />\r\n        </div>\r\n    )\r\n}\r\nexport default ChatSearch\r\n","import React from 'react'\r\n\r\nimport './NoChats.css'\r\n\r\nfunction NoChats(){\r\n  return (\r\n    <div id='no-chat-layout'>\r\n      <div id='no-chat-content'>\r\n        <h2>No Chats</h2>\r\n        <p>Currently you have no chats.</p>\r\n        <p>To start a new chat click the button below.</p>\r\n        <button onClick={null}>New Chat</button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default NoChats\r\n","import React from 'react'\r\nimport classNames from 'classnames'\r\nimport moment from 'moment'\r\n\r\nimport './ChatItem.css'\r\n\r\nfunction ChatItem(props) {\r\n\r\n    const { chat, isActive, onChatItemSelected } = props\r\n    // const [latestMsgDate, setLatestMsgDate] = useState('')\r\n    // const [latestMsg, setLatestMsg] = useState('')\r\n    \r\n    const className = classNames('chat',{\r\n        'active': isActive\r\n    })\r\n\r\n    let MsgObjSorted = chat?.inbox.slice(0).sort((a, b) => a.createdAt.localeCompare(b.createdAt))\r\n    let latestMsgObj = MsgObjSorted.slice(0).pop()\r\n\r\n    //console.log('[LATEST-CHAT-MSG]', latestMsgObj,'[CHAT]', chat)\r\n    let latestMsg, latestMsgDate\r\n    if(!latestMsgObj){\r\n        latestMsgDate = chat?.createdAt\r\n        latestMsg = ''\r\n    } else {\r\n        latestMsgDate = latestMsgObj.createdAt\r\n        if(latestMsgObj.type === 'text'){\r\n            latestMsg = latestMsgObj.message\r\n        }else{\r\n            latestMsg = ''\r\n        }\r\n    }\r\n    \r\n    return (\r\n        <div className={className} \r\n            onClick={() => {onChatItemSelected(chat)}}\r\n        >\r\n            <img src={chat.info.profilePicUrl} alt={chat.info.username} />\r\n            <div className=\"title-text\">{chat.info.username}</div>\r\n            <div className=\"created-date\">{moment(latestMsgDate).fromNow()}</div>\r\n            <div className=\"chat-message\">\r\n                {latestMsg}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChatItem\r\n","import React from 'react'\r\n\r\nimport ChatItem from '../chat-item/ChatItem'\r\nimport './ChatList.css'\r\n\r\nfunction ChatList(props) {\r\n\r\n    const { chats, selectedChat, onChatItemSelected } = props\r\n\r\n    const displayChat = chats.filter(chat => chat.status !== 'Pending')\r\n    const chatItems = chats && displayChat.map(chat => {\r\n        const chatIsActive = selectedChat && chat.info._id === selectedChat.info._id\r\n        return <ChatItem\r\n            key={chat.info._id}\r\n            onChatItemSelected={onChatItemSelected}\r\n            isActive={chatIsActive}\r\n            chat={chat}\r\n            />\r\n    })\r\n\r\n    return (\r\n        <div id=\"chat-list\">\r\n            {chatItems}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChatList\r\n","import React from 'react'\r\n\r\nimport './NewChat.css'\r\n\r\nfunction NewChat() {\r\n    return (\r\n        <div id='new-message-container'>\r\n            {/* <button>+</button> */}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default NewChat","import React, { Fragment } from 'react'\r\nimport { FiVideo } from 'react-icons/fi'\r\n\r\nimport './ChatTitle.css'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nfunction ChatTitle(props) {\r\n    const { selectedChat } = props\r\n    const connectToId = selectedChat?.info._id\r\n    let chatTitleContents = null\r\n\r\n    const history = useHistory()\r\n    \r\n    if(selectedChat){\r\n        chatTitleContents = (\r\n            <Fragment>\r\n                <span>{selectedChat.info.username}</span>\r\n                <button id='chatTitle-videoCall-btn' onClick={()=>{history.push(`/users/videocall/${connectToId}`)}}>\r\n                    <FiVideo />\r\n                    </button>\r\n            </Fragment>\r\n        )\r\n    }\r\n    return (\r\n        <div id=\"chat-title\">\r\n            { chatTitleContents }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChatTitle\r\n","import React, { useState } from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Modal from '@material-ui/core/Modal'\r\nimport Backdrop from '@material-ui/core/Backdrop'\r\nimport Fade from '@material-ui/core/Fade'\r\nimport './MessageModal.css'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\nmodal: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n},\r\npaper: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    boxShadow: theme.shadows[5]\r\n},\r\n}))\r\n\r\nexport default function MessageModal(props) {\r\n    const classes = useStyles()\r\n    const [open, setOpen] = React.useState(false)\r\n    const { message, modalStatus } = props\r\n\r\n    const handleOpen = () => {\r\n        setOpen(modalStatus)\r\n    }\r\n\r\n    useState(handleOpen,[])\r\n\r\n    const handleClose = () => {\r\n        setOpen(false)\r\n        props.handleModalStatus()\r\n    }\r\n\r\n    return (\r\n    <div>\r\n        <Modal\r\n        aria-labelledby='transition-modal-title'\r\n        aria-describedby='transition-modal-description'\r\n        className={classes.modal}\r\n        open={open}\r\n        onClose={handleClose}\r\n        closeAfterTransition\r\n        BackdropComponent={Backdrop}\r\n        BackdropProps={{\r\n            timeout: 500,\r\n        }}\r\n        >\r\n        <Fade in={open}>\r\n            <div className={classes.paper}>\r\n                <img className='modal-img' src={message.message} alt={message._id} />\r\n            </div>\r\n        </Fade>\r\n        </Modal>\r\n    </div>\r\n    )\r\n}\r\n","import React, { Fragment, useState } from 'react'\r\nimport classNames from 'classnames'\r\nimport moment from 'moment'\r\n\r\nimport './Message.css'\r\n\r\nimport MessageModal from '../../../reusables/MessageModal'\r\n\r\nfunction Message(props) {\r\n    const { isMyMessage, message, imageUrl, imageAlt } = props\r\n\r\n    const [open , setOpen] = useState(false)\r\n\r\n    const msgClass = classNames('message-row',{\r\n        'you-message': isMyMessage,\r\n        'other-message': !isMyMessage\r\n    })\r\n\r\n    const avatar = isMyMessage ? null : <img className='avatar' src={imageUrl} alt={imageAlt} />\r\n    //console.log(open, '[OPEN]')\r\n\r\n    const handleModalStatus = () => {\r\n        setOpen(!open)\r\n    }\r\n    \r\n    let msgType = null\r\n    if(message.type==='text'){\r\n        msgType = (\r\n            <div className={msgClass}>\r\n                <div className=\"message-content\">\r\n                    {avatar}\r\n                    <div className=\"message-text\">\r\n                        {message.message}\r\n                    </div>\r\n                    <div className=\"message-time\">{moment(message.createdAt).format('MMMM Do YYYY, h:mm:ss a')}</div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n    else if(message.type === 'image/video'){\r\n        msgType = (\r\n            <div className={msgClass}>\r\n                <div className=\"message-content\">\r\n                    {avatar}\r\n                    <img className=\"message-file\" src={message.message} alt={message._id} onClick={() => {handleModalStatus()}}/>\r\n                    {open && <MessageModal message={message} modalStatus={open} handleModalStatus={handleModalStatus}/>}\r\n                    <div className=\"message-time\">{moment(message.createdAt).format('MMMM Do YYYY, h:mm:ss a')}</div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n    return <Fragment>{msgType}</Fragment>\r\n}\r\n\r\nexport default Message\r\n","import React, { useEffect, useRef } from 'react'\r\n\r\nimport './MessageList.css'\r\nimport Message from './Message'\r\n\r\nfunction MessageList(props) {\r\n    \r\n    const { selectedChat } = props\r\n    let messageItems = null\r\n    //console.log('MESSAGE LIST',selectedChat)\r\n    \r\n    //! scrollToBottom -> 🔥  https://stackoverflow.com/questions/37620694/how-to-scroll-to-bottom-in-react\r\n    const messagesEndRef = useRef(null)\r\n    const scrollToBottom = () => {\r\n        messagesEndRef.current.scrollIntoView({ behavior: 'smooth' })\r\n    }\r\n    \r\n    if(selectedChat && selectedChat.inbox.length) {\r\n        messageItems = selectedChat.inbox.sort((a, b) => -a.createdAt.localeCompare(b.createdAt)).map((msg) => {\r\n            return <Message\r\n            key={msg._id}\r\n            isMyMessage={msg.isMyMessage}\r\n            message={msg} \r\n            imageUrl={selectedChat.info.profilePicUrl}\r\n            imageAlt={selectedChat.info.username}\r\n            />\r\n            \r\n        })\r\n    }\r\n    useEffect(scrollToBottom, [messageItems])\r\n    return (\r\n        <div id='chat-message-list'>\r\n            <div ref={messagesEndRef}></div>\r\n            {messageItems}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MessageList\r\n","import React, { Fragment, useState } from 'react'\r\nimport Dropzone from 'react-dropzone'\r\n\r\nimport { FiUpload } from 'react-icons/fi'\r\nimport './ChatForm.css'\r\n\r\nfunction ChatForm(props){\r\n\r\n    const { selectedChat, onMessageSubmitted, onFileUpload } = props\r\n    const [message, setMessage] = useState('')\r\n    let formContents = null\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault()\r\n        if (message.length > 0) {\r\n            onMessageSubmitted(message);\r\n            setMessage('');\r\n        }\r\n    }\r\n\r\n    const handleDrop = (file) => {\r\n        // console.log(file)\r\n        const fd = new FormData()\r\n        fd.append('file', file[0])\r\n        fd.append('type','image/video')\r\n        onFileUpload(fd)\r\n    }\r\n\r\n    if (selectedChat) {\r\n        formContents = (\r\n            <Fragment>\r\n                <input \r\n                    type=\"text\" \r\n                    placeholder=\"type a message\" \r\n                    value={message}\r\n                    onChange={ (e) => { setMessage(e.target.value) } } \r\n                />\r\n\r\n                {/*Add attachment icons*/\r\n                    <Dropzone onDrop={handleDrop}>\r\n                        {({ getRootProps, getInputProps }) => (\r\n                            <section>\r\n                            <div {...getRootProps()}>\r\n                                <input {...getInputProps()} />\r\n                                <button type='button' id='upload-btn'><FiUpload/></button>\r\n                            </div>\r\n                            </section>\r\n                        )}\r\n                    </Dropzone>\r\n                }\r\n                \r\n                <button type=\"submit\">Send</button>\r\n            </Fragment>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <form id=\"chat-form\" onSubmit={handleSubmit}>\r\n            {formContents}\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default ChatForm\r\n","import axios from 'axios'\r\n\r\nconst getToken = localStorage.getItem('token')\r\n\r\n\r\n//get chats inbox\r\n// export const setChatsInbox = (data) => {\r\n//     return { type: 'SET_CHAT_INBOX', payload: data}\r\n// }\r\n\r\n// export const startGetChatMsgs = (id) => {\r\n//     return(dispatch) => {\r\n//         axios.get(`/users/getChats/${id}`,{\r\n//             headers: {\r\n//                 'x-auth': getToken\r\n//             }\r\n//         })\r\n//             .then(response => {\r\n//                 console.log('[PROMISE-get-chats]',response.data)\r\n//                 const getData = response.data\r\n//                 if(getData.hasOwnProperty('errors')){\r\n//                     alert(getData.message)\r\n//                 }else{\r\n//                     dispatch(setChatsInbox(getData))\r\n//                 }\r\n//             })\r\n//             .catch(err=> console.log('[ERROR-get-chats]',err))\r\n//     }\r\n// }\r\n\r\n//sent message\r\nexport const setSendMsg = (data) => {\r\n    return {type: 'SET_SEND_MSG', payload:data}\r\n}\r\n\r\nexport const startSendMsg = (id,fd) => {\r\n    return(dispatch) => {\r\n        axios.post(`/users/sendMsg/${id}`,fd,{\r\n            headers: {\r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then(response => {\r\n                console.log('[PROMISE-send-msg]',response.data)\r\n                const getData = response.data\r\n                if(getData.hasOwnProperty('errors')){\r\n                    alert(getData.message)\r\n                }else{\r\n                    dispatch(setSendMsg(getData))\r\n                }\r\n            })\r\n            .catch(err=> console.log('[ERROR-send-msg]',err))\r\n    }\r\n}\r\n\r\n//upload file\r\nexport const uploadFile = (data) => {\r\n    return {type: 'UPLOAD_FILE', payload:data}\r\n}\r\n\r\nexport const startUploadFile = (id,fd) => {\r\n    return(dispatch) => {\r\n        axios.post(`/users/chats/upload/${id}`,fd,{\r\n            headers: {\r\n                'content-type': 'multipart/form-data',\r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then(response => {\r\n                console.log('[PROMISE-upload-file]',response.data)\r\n                const getData = response.data\r\n                if(getData.hasOwnProperty('errors')){\r\n                    alert(getData.message)\r\n                }else{\r\n                    dispatch(uploadFile(getData))\r\n                }\r\n            })\r\n            .catch(err=> console.log('[ERROR-upload-msg]',err))\r\n    }\r\n}","import React, { Fragment } from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport ChatSearch from '../grid-components/chats/chat-search/ChatSearch'\r\nimport NoChats from '../grid-components/chats/no-chat/NoChats'\r\nimport ChatList from '../grid-components/chats/chat-list/ChatList'\r\nimport NewChat from '../grid-components/chats/new-chat/NewChat'\r\nimport ChatTitle from '../grid-components/chat-title/ChatTitle'\r\nimport MessageList from '../grid-components/message/MessageList'\r\nimport ChatForm from '../grid-components/chat-form/ChatForm'\r\n\r\nimport './ChatShell.css'\r\nimport { startStoreSelectedId } from '../../../redux/actions/selectedChatAction'\r\nimport { startSendMsg, startUploadFile } from '../../../redux/actions/chatsAction'\r\n\r\nfunction ChatShell(props) {\r\n    const { chats, selectedChat } = props\r\n    let selectedId = selectedChat?.info._id\r\n    \r\n    console.log(chats,'chatshell')\r\n\r\n    let chatContent = (\r\n        <Fragment>\r\n            <NoChats/>\r\n        </Fragment>\r\n    )\r\n    if(chats.length > 0){\r\n        chatContent = (\r\n            <Fragment>\r\n                <MessageList selectedChat={selectedChat} />\r\n            </Fragment>\r\n        )\r\n    }\r\n    const chatChanged = (chat) => {\r\n        props.dispatch(startStoreSelectedId(chat))\r\n        console.log('selectedChat----->', chat._id)\r\n        //props.dispatch(startGetChatMsgs(chat._id))\r\n    }\r\n    const onMessageSubmitted = (msg) => {\r\n        const fd = {\r\n            message: msg\r\n        }\r\n        console.log('SEND MESSAGE -------->',selectedId,msg)\r\n        props.dispatch(startSendMsg(selectedId,fd))\r\n    }\r\n\r\n    const onFileUpload = (fd) => {\r\n        console.log(selectedId,fd,'file-upload')\r\n        props.dispatch(startUploadFile(selectedId,fd))\r\n    }\r\n\r\n    return (\r\n        <div id=\"chat-container\">\r\n            <ChatSearch chats={chats} />\r\n            <ChatList\r\n                onChatItemSelected={chatChanged}\r\n                chats={chats}\r\n                selectedChat={selectedChat} />\r\n            <NewChat />\r\n            <ChatTitle \r\n                selectedChat={selectedChat}\r\n            />\r\n            {chatContent}\r\n            <ChatForm \r\n                selectedChat={selectedChat}\r\n                onMessageSubmitted={onMessageSubmitted} \r\n                onFileUpload={onFileUpload}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        chats: state.login.friends,\r\n        selectedChat: state.selectedChat,\r\n        user: state.login\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ChatShell)\r\n","export const storeSelectedId = (data) => {\r\n    return { type: 'SELECTED_ID', payload: data}\r\n}\r\n\r\n\r\nexport const startStoreSelectedId = (data) => {\r\n    return(dispatch) => {\r\n        dispatch(storeSelectedId(data))\r\n    }\r\n}","import axios from 'axios'\r\nconst getToken = localStorage.getItem('token')\r\n\r\n//------------------get updated friends list\r\nexport const updateFriendList = (data) => {\r\n    return { type: 'UPDATE_FRIEND_LIST', payload: data }\r\n}\r\n\r\nexport const startGetFriendList = () => {\r\n    return (dispatch) => {\r\n        axios.get(`/users/friendList`,{\r\n            headers: { \r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then((response) => {\r\n                console.log('[PROMISE-update-friend-list]',response.data)\r\n                const resData = response.data\r\n                if(resData.hasOwnProperty('errors')){\r\n                    alert(resData.message)\r\n                }\r\n                else{\r\n                    dispatch(updateFriendList(resData))\r\n                }\r\n            })\r\n        }\r\n}\r\n\r\n//------------------ cancel request\r\nexport const cancelFriendReq = (data) => {\r\n    return { type: 'FRIEND_CANCEL_REQUEST', payload: data }\r\n}\r\n\r\nexport const startCancelFriendRequest = (id,fd) => {\r\n    return (dispatch) => {\r\n        axios.post(`/users/friends/cancelRequest/${id}`,fd,{\r\n            headers: { \r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then((response) => {\r\n                console.log('[PROMISE-friend-cancel-request]',response.data)\r\n                const resData = response.data\r\n                if(resData.hasOwnProperty('errors')){\r\n                    alert(resData.message)\r\n                }\r\n                else{\r\n                    dispatch(cancelFriendReq(resData))\r\n                }\r\n            })\r\n        }\r\n}\r\n\r\n//accept request\r\nexport const acceptFriendReq = (data) => {\r\n    return { type: 'FRIEND_ACCEPT_REQUEST', payload: data }\r\n}\r\n\r\nexport const startAcceptFriendRequest = (id,fd) => {\r\n    return (dispatch) => {\r\n        axios.post(`/users/friends/acceptRequest/${id}`,fd,{\r\n            headers: { \r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then((response) => {\r\n                console.log('[PROMISE-accept-request]',response.data)\r\n                const resData = response.data\r\n                if(resData.hasOwnProperty('errors')){\r\n                    alert(resData.message)\r\n                }\r\n                else{\r\n                    dispatch(acceptFriendReq(resData))\r\n                }\r\n            })\r\n        }\r\n}\r\n\r\n\r\n//reject request\r\nexport const rejectFriendReq = (data) => {\r\n    return { type: 'FRIEND_REJECT_REQUEST', payload: data }\r\n}\r\n\r\nexport const startRejectFriendRequest = (id,fd) => {\r\n    return (dispatch) => {\r\n        axios.post(`/users/friends/rejectRequest/${id}`,fd,{\r\n            headers: { \r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then((response) => {\r\n                console.log('[PROMISE-reject-request]',response.data)\r\n                const resData = response.data\r\n                if(resData.hasOwnProperty('errors')){\r\n                    alert(resData.message)\r\n                }\r\n                else{\r\n                    dispatch(rejectFriendReq(resData))\r\n                }\r\n            })\r\n        }\r\n}\r\n\r\n\r\n//remove friend\r\nexport const friendRemove = (data) => {\r\n    return { type: 'FRIEND_REMOVE', payload: data }\r\n}\r\n\r\nexport const startFriendRemove = (id,fd) => {\r\n    return (dispatch) => {\r\n        axios.post(`/users/friends/removeFriend/${id}`,fd,{\r\n            headers: { \r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then((response) => {\r\n                console.log('[PROMISE-remove-friend]',response.data)\r\n                const resData = response.data\r\n                if(resData.hasOwnProperty('errors')){\r\n                    alert(resData.message)\r\n                }\r\n                else{\r\n                    dispatch(friendRemove(resData))\r\n                }\r\n            })\r\n        }\r\n}","import React, { useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { Card, CardList } from '../reusables/Card'\r\nimport { startCancelFriendRequest, startAcceptFriendRequest, startRejectFriendRequest, startFriendRemove, startGetFriendList } from '../../redux/actions/friendsAction'\r\n\r\n\r\nfunction Friends(props) {\r\n    const handleRequest = (id,isFriend,sendByMe,status) => {\r\n        if(isFriend){\r\n            if(sendByMe && status === 'Pending'){\r\n                props.dispatch(startCancelFriendRequest(id))\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleAcceptRequest = (id) => {\r\n        props.dispatch(startAcceptFriendRequest(id))\r\n    }\r\n\r\n    const handleRejectRequest = (id) => {\r\n        props.dispatch(startRejectFriendRequest(id))\r\n    }\r\n\r\n    const handleRemoveFriend = (id) => {\r\n        props.dispatch(startFriendRemove(id))\r\n    }\r\n\r\n    const { friends } = props\r\n\r\n    useEffect(() => {\r\n        props.dispatch(startGetFriendList())\r\n        //console.log('Loaded friend List')\r\n    // eslint-disable-next-line\r\n    },[])\r\n\r\n    return (\r\n        <div>\r\n            <Card >\r\n                { friends && friends.map(friend => {\r\n                    return <CardList \r\n                                key={friend._id} \r\n                                username={friend.info.username}\r\n                                img={friend.info.profilePicUrl}\r\n                                isFriend={friend.isFriend}\r\n                                status={friend.status && friend.status}\r\n                                handleRequest={handleRequest}\r\n                                _id={friend.info._id}\r\n                                sendByMe={friend.sendByMe}\r\n                                handleAccept={handleAcceptRequest}\r\n                                handleReject={handleRejectRequest}\r\n                                handleRemove={handleRemoveFriend}\r\n                            />\r\n                })}\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        friends: state.login.friends\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Friends)\r\n","import React, { useState } from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Modal from '@material-ui/core/Modal'\r\nimport Backdrop from '@material-ui/core/Backdrop'\r\nimport Fade from '@material-ui/core/Fade'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nimport { RiCloudOffLine } from 'react-icons/ri'\r\nimport './CallAlertModal.css'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\nmodal: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n},\r\npaper: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    boxShadow: theme.shadows[5]\r\n},\r\n}))\r\n\r\nexport default function CallModal(props) {\r\n    const classes = useStyles()\r\n    const [open, setOpen] = React.useState(false)\r\n    const { view, modalStatus, message } = props\r\n    const history = useHistory()\r\n\r\n    const handleOpen = () => {\r\n        setOpen(view)\r\n    }\r\n\r\n    useState(handleOpen, [])\r\n\r\n    const handleClose = () => {\r\n        setOpen(false)\r\n    }\r\n    \r\n    const handleRedirect = () => {\r\n        history.push('/users/chat')\r\n    }\r\n\r\n    return (\r\n    <div>\r\n        <Modal\r\n        aria-labelledby='transition-modal-title'\r\n        aria-describedby='transition-modal-description'\r\n        className={classes.modal}\r\n        open={open}\r\n        onClose={handleClose}\r\n        closeAfterTransition\r\n        BackdropComponent={Backdrop}\r\n        BackdropProps={{\r\n            timeout: 500,\r\n        }}\r\n        >\r\n        <Fade in={open}>\r\n            <div id='call-alert-modal' className={classes.paper}>\r\n                <RiCloudOffLine id='offline-icon'/>\r\n                <h2>{message}</h2>\r\n                <button id='close-alert' onClick={\r\n                    () => {\r\n                        modalStatus()\r\n                        handleRedirect()\r\n                    }\r\n                }>Close</button>\r\n            </div>\r\n        </Fade>\r\n        </Modal>\r\n    </div>\r\n    )\r\n}\r\n","import React, { useEffect, useState, useRef } from 'react'\r\nimport Peer from 'simple-peer'\r\nimport { useHistory } from 'react-router-dom'\r\nimport socket from '../../services/socket'\r\nimport './VideoCall.css'\r\nimport { connect } from 'react-redux'\r\nimport queryString from 'query-string'\r\nimport { IoIosCall } from 'react-icons/io'\r\nimport CallAlertModal from '../reusables/CallAlertModal'\r\nimport { callStateClear, appStateInCallInitiate } from '../../redux/actions/callAction'\r\nimport classNames from 'classnames'\r\n\r\nfunction VideoCall(props) {\r\n  const userVideo = useRef()\r\n  const partnerVideo = useRef()\r\n  const history = useHistory()\r\n  let getStreamRef = null\r\n  let callEnd = useRef(false)\r\n  let callEngaged = useRef(false)\r\n\r\n  const [viewCall, setViewCall] = useState(true)\r\n  const [stream, setStream] = useState()\r\n  const [callAccepted, setCallAccepted] = useState(false)\r\n  const [callerSignal, setCallerSignal] = useState()\r\n  const [caller, setCaller] = useState('')\r\n\r\n  const [offline, setOffline] = useState(false)\r\n  const [offlineMsg, setOfflineMsg] = useState('')\r\n  //const [callEnd, setCallEnd] = useState(false)\r\n\r\n  const modalStatus = () => {\r\n    setViewCall(false)\r\n  }\r\n\r\n  const { user, callState } = props\r\n  const signal = callState.signal\r\n  //let receiverId = selectedChat?.info._id\r\n  let receiverId = props.match.params.id\r\n  console.log('params id -->', receiverId)\r\n  let userId = user?._id\r\n  const query = queryString.parse(props.location.search, {\r\n    parseBooleans: true,\r\n  })\r\n  console.log(query, 'incoming-call query')\r\n\r\n  const handleCallEndBtn = () => {\r\n    socket.emit('endCallByUser', {\r\n      user: user._id,\r\n    })\r\n    callEnd.current = true\r\n    //setCallEnd(true)\r\n    setTimeout(() => {\r\n      history.push('/users/chat')\r\n    }, 1500)\r\n  }\r\n\r\n  const videoCssEle = classNames('clientVideo', {\r\n    'clientVideo-accepted': callAccepted,\r\n  })\r\n\r\n  const isReceiving = callState?.callReceiving\r\n  //const isInitiator = callState?.callInitiator\r\n  function closeStream() {\r\n    console.log('streamVideo closed', getStreamRef)\r\n    if (getStreamRef) {\r\n      getStreamRef.getTracks().forEach((track) => {\r\n        if (track.readyState === 'live') {\r\n          track.stop()\r\n        }\r\n      })\r\n    }\r\n    console.log(\r\n      '[***INIT**]',\r\n      receiverId,\r\n      userId,\r\n      isReceiving,\r\n      '[CALL-END] -->',\r\n      callEnd.current\r\n    )\r\n\r\n    if (!callEngaged.current) {\r\n      if (!callEnd.current) {\r\n        if (receiverId) {\r\n          //console.log('INSIDE CLOSING CALL CONNECTION CHANNEL --> [receiver]')\r\n          socket.emit('connectionClosed', {\r\n            to: receiverId,\r\n            from: userId,\r\n          })\r\n        } else if (isReceiving) {\r\n          //console.log('INSIDE CLOSING CALL CONNECTION CHANNEL --> [caller]',signal.from)\r\n          socket.emit('connectionClosed', {\r\n            to: signal.from,\r\n            from: userId,\r\n          })\r\n        }\r\n      }\r\n    }\r\n\r\n    callEnd.current = false\r\n    callEngaged.current = false\r\n    props.dispatch(callStateClear())\r\n  }\r\n\r\n  useEffect(() => {\r\n    console.log(receiverId, '--->RID')\r\n\r\n    navigator.mediaDevices\r\n      .getUserMedia({ video: true, audio: true })\r\n      .then((stream) => {\r\n        setStream(stream)\r\n        // eslint-disable-next-line\r\n        getStreamRef = stream\r\n        if (userVideo.current) {\r\n          userVideo.current.srcObject = stream\r\n        }\r\n        // 🔥 https://stackoverflow.com/questions/11642926stop-close-webcam-which-is-opened-by-navigator-getusermedia\r\n        // 🔥 https://developers.google.com/web/updates/2015/07/mediastream-deprecationshl=en#stop-ended-and-active\r\n        if (query.receiving) {\r\n          setCallerSignal(signal.signal)\r\n          setCaller(signal.from)\r\n          console.log('[EFFECT-SET-RECEIVING-CALL]', caller, callerSignal)\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err)\r\n        history.push('/users/chat')\r\n      })\r\n\r\n    return () => {\r\n      closeStream()\r\n      socket.off('connectionClosed')\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    console.log('++++++++++++++++++++++++++++++++++++CallPEER', receiverId)\r\n    if (receiverId) {\r\n      props.dispatch(appStateInCallInitiate(true))\r\n      function callPeer(id) {\r\n        const peer = new Peer({\r\n          initiator: true,\r\n          trickle: false,\r\n          stream: stream,\r\n        })\r\n\r\n        const serverEndCall = (data) => {\r\n          peer.destroy()\r\n          console.log('data fail', data)\r\n          setTimeout(() => {\r\n            setOfflineMsg(data.message)\r\n            setOffline(true)\r\n          }, 2000) // prev --> 5000\r\n        }\r\n\r\n        peer.on('signal', (data) => {\r\n          socket.emit('callUser', {\r\n            userToCall: receiverId,\r\n            signalData: data,\r\n            from: userId,\r\n          })\r\n        })\r\n\r\n        peer.on('stream', (stream) => {\r\n          if (partnerVideo.current) {\r\n            partnerVideo.current.srcObject = stream\r\n          }\r\n        })\r\n\r\n        socket.on('callAccepted', (signal) => {\r\n          setCallAccepted(true)\r\n          console.log('accepted signal', signal)\r\n          peer.signal(signal)\r\n        })\r\n\r\n        socket.on('not-reachable', serverEndCall)\r\n        socket.on('callRejected', serverEndCall)\r\n        socket.on('call-disconnected', serverEndCall)\r\n        socket.on('callChannelClosed', serverEndCall)\r\n        socket.on('callClosedByUser', serverEndCall)\r\n\r\n        socket.on('caller engaged', (data) => {\r\n          peer.destroy()\r\n          console.log('data fail', data)\r\n          setTimeout(() => {\r\n            setOfflineMsg(data.message)\r\n            setOffline(true)\r\n            callEngaged.current = true\r\n          }, 2000) // prev --> 5000\r\n        })\r\n      }\r\n      callPeer(receiverId)\r\n\r\n      return () => {\r\n        socket.off('callAccepted')\r\n        socket.off('callRejected')\r\n        socket.off('not-reachable')\r\n        socket.off('call-disconnected')\r\n        socket.off('callChannelClosed')\r\n        socket.off('callClosedByUser')\r\n        socket.off('caller engaged')\r\n      }\r\n    } // eslint-disable-next-line\r\n  }, [stream, userId, receiverId, query.connectId])\r\n\r\n  useEffect(() => {\r\n    if (query.attend && caller && query.connectId) {\r\n      function acceptCall() {\r\n        setCallAccepted(true)\r\n        const peer = new Peer({\r\n          initiator: false,\r\n          trickle: false,\r\n          stream: stream,\r\n        })\r\n\r\n        const serverEndCall = (data) => {\r\n          peer.destroy()\r\n          console.log('data fail', data)\r\n          setTimeout(() => {\r\n            setOfflineMsg(data.message)\r\n            setOffline(true)\r\n          }, 2000) // prev 5000\r\n        }\r\n\r\n        peer.on('signal', (data) => {\r\n          socket.emit('acceptCall', { signal: data, to: caller, from: userId })\r\n        })\r\n\r\n        peer.on('stream', (stream) => {\r\n          partnerVideo.current.srcObject = stream\r\n        })\r\n\r\n        peer.signal(callerSignal)\r\n\r\n        socket.on('callChannelClosed', serverEndCall)\r\n        socket.on('callClosedByUser', serverEndCall)\r\n      }\r\n      acceptCall()\r\n    }\r\n\r\n    return () => {\r\n      socket.off('callChannelClosed')\r\n      socket.off('callClosedByUser')\r\n    } // eslint-disable-next-line\r\n  }, [callerSignal, stream, caller, userId, query.connectId])\r\n\r\n  let ClientVideo\r\n  if (stream) {\r\n    ClientVideo = (\r\n      <video\r\n        className={videoCssEle}\r\n        playsInline\r\n        muted\r\n        ref={userVideo}\r\n        autoPlay\r\n      />\r\n    )\r\n  }\r\n\r\n  let PartnerVideo\r\n  if (callAccepted) {\r\n    PartnerVideo = (\r\n      <video controls id='partnerVideo' ref={partnerVideo} autoPlay />\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div id='v-call-container'>\r\n      {offline && (\r\n        <CallAlertModal\r\n          view={viewCall}\r\n          modalStatus={modalStatus}\r\n          message={offlineMsg}\r\n        />\r\n      )}\r\n      <div id='call-video-box'>\r\n        <div>{ClientVideo}</div>\r\n        <div>{PartnerVideo}</div>\r\n      </div>\r\n      <button\r\n        id='call-end'\r\n        onClick={() => {\r\n          handleCallEndBtn()\r\n        }}\r\n      >\r\n        <IoIosCall />\r\n      </button>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    user: state.login,\r\n    selectedChat: state.selectedChat,\r\n    callState: state.call,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(VideoCall)\r\n","export const saveSignal = (data) => {\r\n    return { type: 'SAVE_SIGNAL', payload:data}\r\n}\r\n\r\nexport const appStateInCall = (status) => {\r\n    return { type: 'INCALL_STATUS', payload: status}\r\n}\r\n\r\nexport const appStateInCallReceiving = (status) => {\r\n    return { type: 'INCALL_RECEIVING', payload: status}\r\n}\r\n\r\nexport const appStateInCallInitiate = (status) => {\r\n    return { type: 'INCALL_INITIATE', payload: status}\r\n}\r\n\r\nexport const callStateClear = () => {\r\n    return { type: 'CLEAR_CALL_STATE'}\r\n}","import React from 'react'\r\nimport VideoCall from '../video-call/VideoCall'\r\nimport ChatShell from '../chat-box/container-main/ChatShell'\r\n\r\nfunction InterCom(props) {\r\n    return (\r\n        <div>\r\n            <ChatShell />\r\n            <VideoCall />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default InterCom\r\n","import React, { useState } from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Modal from '@material-ui/core/Modal'\r\nimport Backdrop from '@material-ui/core/Backdrop'\r\nimport Fade from '@material-ui/core/Fade'\r\n\r\nimport './CallModal.css'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\nmodal: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n},\r\npaper: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    boxShadow: theme.shadows[5]\r\n},\r\n}))\r\n\r\nexport default function CallModal(props) {\r\n    const classes = useStyles()\r\n    const [open, setOpen] = React.useState(false)\r\n    const { view, modalStatus, name, pic, handleAttendCall, handleRejectCall } = props\r\n\r\n    const handleOpen = () => {\r\n        setOpen(view)\r\n    }\r\n\r\n    useState(handleOpen, [])\r\n\r\n    const handleClose = () => {\r\n        setOpen(false)\r\n    }\r\n\r\n    return (\r\n    <div>\r\n        <Modal\r\n        aria-labelledby='transition-modal-title'\r\n        aria-describedby='transition-modal-description'\r\n        className={classes.modal}\r\n        open={open}\r\n        onClose={handleClose}\r\n        closeAfterTransition\r\n        BackdropComponent={Backdrop}\r\n        BackdropProps={{\r\n            timeout: 500,\r\n        }}\r\n        >\r\n        <Fade in={open}>\r\n            <div id='call-modal' className={classes.paper}>\r\n                <img id='call-img' src={require('../../styles/assets/calling.gif')} alt='calling' />\r\n\r\n                <div id='caller'>\r\n                    <img id='caller-avatar' src={pic} alt='name' />\r\n                    <h3 id='caller-name'>{name}</h3>\r\n                </div>\r\n                <div id='call-btns'>\r\n                    <button id='acc-call' onClick={()=> {\r\n                        modalStatus()\r\n                        handleAttendCall()\r\n                        }}>Accept</button>\r\n                    <button id='rej-call' onClick={() => {\r\n                        handleRejectCall()\r\n                        modalStatus()\r\n                    }}>Reject</button>\r\n                </div>\r\n            </div>\r\n        </Fade>\r\n        </Modal>\r\n    </div>\r\n    )\r\n}\r\n","import React, { Fragment, useEffect, useState } from 'react'\r\nimport socket from '../../services/socket'\r\nimport CallModal from '../reusables/CallModal'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport { saveSignal, appStateInCallReceiving, callStateClear } from '../../redux/actions/callAction'\r\n\r\n\r\nfunction VideoListener(props) {\r\n\r\n    const [viewCall, setViewCall] = useState(false)\r\n    const [callerName, setCallerName] = useState('')\r\n    const [callerPic, setCallerPic] = useState('')\r\n    const [dataPack, setDataPack] = useState({})\r\n    const [attend, setAttend] = useState(false)\r\n    const [query, setQuery] = useState('')\r\n\r\n    const { callState } = props\r\n    const inCallReceiving = callState?.callReceiving\r\n\r\n    const modalStatus = () => {\r\n        setViewCall(false)\r\n    }\r\n\r\n    const handleAttendCall = () => {\r\n        setAttend(true)\r\n    }\r\n\r\n    const handleRejectCall = () => {\r\n        props.dispatch(callStateClear())\r\n        socket.emit('rejectCall', {\r\n            from: dataPack.from\r\n        })\r\n    }\r\n\r\n    const videoSignalData = (data) => {\r\n        console.log('[VIDEO-SIGNAL]', data)\r\n        const pack = {\r\n            from: data.from,\r\n            signal: data.signal,\r\n        }\r\n        props.dispatch(saveSignal(pack))\r\n        if(!callState.callInitiator){\r\n            props.dispatch(appStateInCallReceiving(true))\r\n            if(!inCallReceiving){\r\n                setViewCall(true)\r\n            }\r\n        }\r\n        setDataPack(pack)\r\n        setCallerName(data.username)\r\n        setCallerPic(data.profilePicUrl)\r\n\r\n        //if(attend){\r\n            const path = `/users/videoCall?from=${data.from}&connectId=${data.connect_id}&receiving=true&attend=true`\r\n            setQuery(path)\r\n        //}\r\n    }\r\n\r\n    const videoCallListener = () => {\r\n        console.log('VideoCall listener fn() loaded')\r\n        socket.on('call listener', videoSignalData)\r\n    }\r\n\r\n    useEffect(()=>{\r\n        videoCallListener()\r\n        return() => {\r\n            console.log('VideoCall listening closed')\r\n            socket.off('call listener',videoSignalData)\r\n            if(attend){\r\n                setAttend(false)\r\n                setViewCall(false)\r\n            }\r\n        }\r\n    })\r\n\r\n    return (\r\n        <div>\r\n            <Fragment>\r\n                { (viewCall && !attend) &&\r\n                    <CallModal \r\n                        modalStatus={modalStatus}\r\n                        view={viewCall} \r\n                        name={callerName} \r\n                        pic={callerPic}\r\n                        handleAttendCall={handleAttendCall}\r\n                        handleRejectCall={handleRejectCall}\r\n                    /> }\r\n                { attend && \r\n                    <Redirect to={query}/>\r\n                }\r\n            </Fragment>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        callState : state.call\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(VideoListener)\r\n","import { useEffect } from 'react'\r\nimport socket from '../../services/socket'\r\nimport { connect } from 'react-redux'\r\nimport { setSendMsg } from '../../redux/actions/chatsAction'\r\n\r\nfunction MessageListener(props) {\r\n    //! SOCKETS\r\n    //connecting client to server\r\n    //imported socket as an instance to avoid multiple component call to the server\r\n    //🔥  https://dev.to/bravemaster619/how-to-prevent-multiple-socket-connections-and-events-in-react-531d\r\n\r\n    const msgFromServer = (msg) => {\r\n        console.log(msg,'[MESSAGE_SERVER]')\r\n        props.dispatch(setSendMsg(msg))\r\n    }\r\n    \r\n    const connectSocket = () => {\r\n        console.log('socketFnMessages() connected on load')\r\n        //to remove useEffect dependency warning -> by creating a socket instance in services folder\r\n        \r\n        // 🧾 https://stackoverflow.com/questions/9418697/how-to-unsubscribe-from-a-socket-io-subscription\r\n\r\n        socket.on('server message listening',msgFromServer)\r\n        // socket.on('server message listening',(msgFromServer)=>{\r\n        //     console.log(msgFromServer,'[MESSAGE_SERVER]')\r\n        //     // update the redux state\r\n        //     props.dispatch(setSendMsg(msgFromServer))\r\n        // })\r\n    }\r\n\r\n    useEffect(() => {\r\n        // https://daveceddia.com/useeffect-hook-examples/\r\n        // https://stackoverflow.com/questions/23092624/socket-io-removing-specific-listener\r\n        \r\n        //Mount\r\n        connectSocket()\r\n        return () => {\r\n            console.log('socket listening closed')\r\n            socket.off('server message listening', msgFromServer)\r\n            //socket.off('server message listening')\r\n        }\r\n        // eslint-disable-next-line\r\n    },[])\r\n    //! ----SOCKETS\r\n\r\n    return (null)\r\n}\r\n\r\nexport default connect()(MessageListener)\r\n","import React, { useState } from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Modal from '@material-ui/core/Modal'\r\nimport Backdrop from '@material-ui/core/Backdrop'\r\nimport Fade from '@material-ui/core/Fade'\r\nimport './PostModal.css'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\nmodal: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n}\r\n}))\r\n\r\nexport default function PostModal(props) {\r\n    const classes = useStyles()\r\n    const [open, setOpen] = React.useState(false)\r\n    const { modalStatus, addPost } = props\r\n\r\n    const handleOpen = () => {\r\n        setOpen(modalStatus)\r\n    }\r\n\r\n    useState(handleOpen,[])\r\n\r\n    const handleClose = () => {\r\n        setOpen(false)\r\n        props.handleModalStatus()\r\n    }\r\n\r\n    return (\r\n    <div>\r\n        <Modal\r\n        aria-labelledby='transition-modal-title'\r\n        aria-describedby='transition-modal-description'\r\n        className={classes.modal}\r\n        open={open}\r\n        onClose={handleClose}\r\n        closeAfterTransition\r\n        BackdropComponent={Backdrop}\r\n        BackdropProps={{\r\n            timeout: 500,\r\n        }}\r\n        >\r\n        <Fade in={open}>\r\n            <div id='post-paper'>\r\n                {addPost}\r\n            </div>\r\n        </Fade>\r\n        </Modal>\r\n    </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport Popover from '@material-ui/core/Popover'\r\nimport { Picker } from 'emoji-mart'\r\nimport 'emoji-mart/css/emoji-mart.css'\r\n\r\nexport default function EmojiPopUp(props) {\r\n  \r\n  const { anchorEl, handleClose, handleAddEmoji } = props\r\n\r\n  const open = Boolean(anchorEl)\r\n  const id = open ? 'EmojiPopUp' : undefined\r\n\r\n  return (\r\n    <div>\r\n      <Popover\r\n        id={id}\r\n        open={open}\r\n        anchorEl={anchorEl}\r\n        onClose={handleClose}\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'left',\r\n        }}\r\n        transformOrigin={{\r\n          vertical: 'top',\r\n          horizontal: 'left',\r\n        }}\r\n      >\r\n        <Picker title='Pick your emoji…' emoji='point_up' onSelect={handleAddEmoji}/>\r\n      </Popover>\r\n    </div>\r\n  )\r\n}\r\n","import axios from 'axios'\r\nconst getToken = localStorage.getItem('token')\r\n\r\n// --------------> get latest public posts\r\n        //---> addPublic post listener\r\n\r\nexport const addNewPublicPost = (data) => {\r\n    return { type: 'ADD_NEW_PUBLIC_POST', payload: data }\r\n}\r\n\r\nexport const setPublicPosts = (data) => {\r\n    return { type: 'SET_PUBLIC_POSTS', payload: data }\r\n}\r\n\r\nexport const startGetPublicPosts = (fd) => {\r\n    return(dispatch) => {\r\n        axios.get('/users/getLatestPublicPosts')\r\n            .then(response => {\r\n                console.log('[PROMISE-publicPosts]',response.data)\r\n                const getPosts = response.data\r\n                dispatch(setPublicPosts(getPosts))\r\n            }).catch(err => console.log(err))\r\n    }\r\n}\r\n\r\n\r\n// ---------------> create post\r\nexport const addNewPost = (data) => {\r\n    return { type: 'ADD_NEW_POST', payload: data }\r\n}\r\n\r\nexport const startCreateNewPost = (fd) => {\r\n    return(dispatch) => {\r\n        axios.post('/users/posts/new',fd,{\r\n            headers: {\r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then(response => {\r\n                console.log('[PROMISE-postNew]',response.data)\r\n                const newPost = response.data\r\n                dispatch(addNewPost(newPost))\r\n            }).catch(err => console.log(err))\r\n    }\r\n}\r\n\r\n//-------------deletePost\r\n\r\nexport const deletePost = (data) => {\r\n    return { type: 'DELETE_POST', payload: data }\r\n}\r\n\r\nexport const startDeletePost = (id,type,fd) => {\r\n    return(dispatch) => {\r\n        axios.put(`/users/posts/${type}/${id}`,fd,{\r\n            headers: {\r\n                'x-auth': getToken\r\n            }\r\n        })\r\n            .then(response => {\r\n                console.log('[PROMISE-postDelete]',response.data)\r\n                const retPost = response.data\r\n                dispatch(deletePost(retPost))\r\n            }).catch(err => console.log(err))\r\n    }\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Dropzone from 'react-dropzone'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport './PostCreate.css'\r\nimport PostModal from '../reusables/PostModal'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport Select from '@material-ui/core/Select'\r\nimport { BsLockFill } from 'react-icons/bs'\r\nimport { FaUserFriends } from 'react-icons/fa'\r\nimport { MdPublic } from 'react-icons/md'\r\nimport { GrEmoji } from 'react-icons/gr'\r\nimport EmojiPopUp from '../reusables/EmojiPopUp'\r\nimport { startCreateNewPost } from '../../redux/actions/postsAction'\r\n\r\nexport function AddPost(props){\r\n\r\n    const { user, handleDrop, fileUp, post, pType, handleClearFileUpload, handlePassPostData, handleSubmit } = props\r\n    \r\n    const [postType, setPostType] = useState('Private')\r\n    const [postText, setPostText] = useState('')\r\n    const [anchorEl, setAnchorEl] = useState(null)\r\n    const [lineHeight,setLineHeight] = useState('')\r\n\r\n\r\n    useEffect(() => {\r\n        if(post){\r\n            setPostType(pType)\r\n            setPostText(post)\r\n        }\r\n        // eslint-disable-next-line\r\n    },[])\r\n\r\n    console.log(!postText.length,!Boolean(fileUp),'check disabled')\r\n\r\n    const handleEmojiPopOpen = (e) => {\r\n        setAnchorEl(e.currentTarget)\r\n    }\r\n    const handleEmojiPopClose = (e) => {\r\n        setAnchorEl(null)\r\n    }\r\n\r\n    const handleAddEmoji = (e) => {\r\n        setPostText(postText+e.native)\r\n    }\r\n\r\n    const handlePostTextChange = (e) => {\r\n        setPostText(e.target.value)\r\n        console.log(e.target)\r\n        setLineHeight(e.target.scrollHeight)\r\n    }\r\n\r\n    useEffect(\r\n        () => {\r\n            handlePassPostData(postText,postType)\r\n            // eslint-disable-next-line\r\n        },[postText,postType])\r\n\r\n    return(\r\n        <div id='add-post-container'>\r\n            <h1>Create post</h1>\r\n            <hr/>\r\n            <div id='add-ava-user'>\r\n                <Avatar id='post-avatar' src={user.profileImg} />\r\n                <div id='add-post-type'>\r\n                    <h4>{user.username}</h4>\r\n                    <FormControl >\r\n                        <Select\r\n                        id=\"select-post-type\"\r\n                        value={postType}\r\n                        onChange={(e)=>{setPostType(e.target.value)}}\r\n                        displayEmpty\r\n                        >\r\n                            <MenuItem value={'Private'}><BsLockFill/>Only me</MenuItem>\r\n                            <MenuItem value={'Friends'}><FaUserFriends/>Friends</MenuItem>\r\n                            <MenuItem value={'Public'}><MdPublic/>Public</MenuItem>\r\n                        </Select>\r\n                    </FormControl>\r\n                </div>\r\n            </div>\r\n            {fileUp && (\r\n                <div id='add-file-up'>\r\n                    <img  src={URL.createObjectURL(fileUp)} alt='fileUp'/>\r\n                    <button id='add-file-up-close' onClick={handleClearFileUpload}>X</button>\r\n                </div>\r\n            ) }\r\n            <div id='add-post-wrapper'>\r\n                <textarea\r\n                    id='add-post-text'\r\n                    style={{height:`${lineHeight}px`}} \r\n                    type=\"text\" \r\n                    value={postText}\r\n                    placeholder={`Whats on your mind,${user.username} ?`}\r\n                    onChange={handlePostTextChange}\r\n                    />\r\n                <GrEmoji id='add-input-emoji' onClick={(e) => {handleEmojiPopOpen(e)}}/>\r\n                {anchorEl && \r\n                    <EmojiPopUp \r\n                        anchorEl={anchorEl} \r\n                        handleClose={handleEmojiPopClose} \r\n                        handleAddEmoji={handleAddEmoji} \r\n                    />}\r\n            </div>\r\n                \r\n            <hr/>\r\n            <div id='add-post-action'>\r\n                <Dropzone onDrop={handleDrop}>\r\n                        {({ getRootProps, getInputProps }) => (\r\n                            <section>\r\n                            <div {...getRootProps()}>\r\n                                <input {...getInputProps()} />\r\n                                <div id='img-up-btn'>\r\n                                    <img src={require('../../resources/icons/imageUpload.png')} alt='imgUpIcon' />\r\n                                </div>\r\n                            </div>\r\n                            </section>\r\n                        )}\r\n                </Dropzone>\r\n                <button id='add-post-btn' onClick={handleSubmit} disabled={!postText.length && !Boolean(fileUp)}>Post</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction PostCreate(props) {\r\n\r\n    const { user } = props\r\n\r\n    const [modalView, setModalView] = useState(false)\r\n    const [file, setFile] = useState(null)\r\n    const [post, setPost] = useState('')\r\n    const [postType, setPostType] = useState('Private')\r\n    \r\n\r\n    const handlePostSubmit = () => {\r\n        console.log('[SUBMIT]',post,postType,file)\r\n        const fd = new FormData()\r\n        fd.append('file', file)\r\n        fd.append('post',post)\r\n        fd.append('postType',postType)\r\n        props.dispatch(startCreateNewPost(fd))\r\n        handlePostModal()\r\n        setFile(null)\r\n        setPost('')\r\n        setPostType('Private')\r\n    }\r\n\r\n    const handleClearFileUpload = () => {\r\n        setFile(null)\r\n    }\r\n\r\n    const handlePassPostData = (post,type) => {\r\n        setPost(post)\r\n        setPostType(type)\r\n    }\r\n\r\n    const handleDrop = (file) => {\r\n        // const fd = new FormData()\r\n        // fd.append('file', file[0])\r\n        // fd.append('type','image/video')\r\n        setFile(file[0])\r\n        if(!modalView){\r\n            setModalView(!modalView)\r\n        }\r\n    }\r\n\r\n    const handlePostModal = () => {\r\n        setModalView(!modalView)\r\n    }\r\n\r\n    return (\r\n        <div id='create-post-container'>\r\n            {modalView && <PostModal \r\n                modalStatus={modalView}\r\n                handleModalStatus={handlePostModal}\r\n                addPost={\r\n                    <AddPost \r\n                        handleDrop={handleDrop} \r\n                        user={user} \r\n                        fileUp={file}\r\n                        post={post}\r\n                        pType={postType}\r\n                        handleClearFileUpload={handleClearFileUpload}\r\n                        handlePassPostData={handlePassPostData}\r\n                        handleSubmit={handlePostSubmit}\r\n                    />}\r\n                />}\r\n            <div id='ava-input'>\r\n                <Avatar id='post-avatar' src={user.profileImg} />\r\n                <input id='input-post' type=\"text\" placeholder={`Whats on your mind,${user.username} ?`} readOnly onClick={handlePostModal}/>\r\n            </div>\r\n            <hr/>\r\n            <div id='post-action'>\r\n                <Dropzone onDrop={handleDrop}>\r\n                        {({ getRootProps, getInputProps }) => (\r\n                            <section>\r\n                            <div {...getRootProps()}>\r\n                                <input {...getInputProps()} />\r\n                                <div id='img-up-btn'>\r\n                                <img src={require('../../resources/icons/imageUpload.png')} alt='imgUpIcon' />\r\n                                Image</div>\r\n                            </div>\r\n                            </section>\r\n                        )}\r\n            </Dropzone>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.login\r\n    }\r\n}\r\nexport default connect(mapStateToProps)(PostCreate)\r\n","import React from 'react'\r\nimport { connect } from  'react-redux'\r\nimport PostCardItem from '../reusables/PostCardItem'\r\nimport { startDeletePost } from '../../redux/actions/postsAction'\r\n\r\n\r\nfunction PostList(props) {\r\n    const { posts, userId } = props\r\n    console.log(posts,'-----> posts')\r\n    const handleDeletePost = (id, type) => {\r\n        console.log('deletePost',id,type)\r\n        props.dispatch(startDeletePost(id,type))\r\n    }\r\n    return(\r\n        <div>\r\n            {posts?.map(post => {\r\n                return <PostCardItem \r\n                    key={post._id} \r\n                    post={post} \r\n                    userId={userId} \r\n                    handleDeletePost={handleDeletePost}\r\n                />\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        posts: state.login.posts,\r\n        userId: state.login._id\r\n    }\r\n}\r\nexport default connect(mapStateToProps)(PostList)\r\n\r\n","import React from 'react'\r\nimport PostCreate from './PostCreate'\r\nimport PostList from './PostList'\r\n\r\nfunction PostManager() {\r\n    return (\r\n        <div>\r\n            <PostCreate/>\r\n            <PostList />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PostManager\r\n","import { useEffect } from 'react'\r\nimport socket from '../../services/socket'\r\nimport { connect } from 'react-redux'\r\nimport { addNewPublicPost, addNewPost } from '../../redux/actions/postsAction'\r\n\r\nfunction PostListener(props) {\r\n    //! SOCKETS\r\n    const publicPostFromServer = (post) => {\r\n        console.log(post,'[POST_SERVER-PUBLIC]')\r\n        props.dispatch(addNewPublicPost(post))\r\n    }\r\n\r\n    const friendPostFromServer = (post) => {\r\n        console.log(post,'[POST_SERVER-FRIEND]')\r\n        props.dispatch(addNewPost(post))\r\n    }\r\n    \r\n    const connectSocket = () => {\r\n        console.log('socketFnPosts() connected on load')\r\n\r\n        socket.on('publicPost',publicPostFromServer)\r\n        socket.on('addNewFriendPost',friendPostFromServer)\r\n    }\r\n\r\n    useEffect(() => {\r\n        connectSocket()\r\n        return () => {\r\n            console.log('socket listening closed')\r\n            socket.off('publicPost', publicPostFromServer)\r\n            socket.off('addNewFriendPost', friendPostFromServer)\r\n        }\r\n        // eslint-disable-next-line\r\n    },[])\r\n    //! ----SOCKETS\r\n\r\n    return (null)\r\n}\r\n\r\nexport default connect()(PostListener)\r\n","import React, { useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport socket from '../../services/socket'\r\n//import './App.css'\r\nimport { BrowserRouter, Switch, Route } from 'react-router-dom'\r\n\r\n//material-ui\r\nimport { Container } from '@material-ui/core'\r\n\r\n\r\nimport Home from './Home';\r\nimport Login from '../register-login/Login';\r\nimport Nav from './Nav';\r\nimport Register from '../register-login/Register'\r\nimport Search from '../search/Search';\r\nimport ChatShell from '../chat-box/container-main/ChatShell';\r\nimport Friends from './Friends';\r\nimport VideoCall from '../video-call/VideoCall'\r\nimport InterCom from './InterCom'\r\nimport VideoListener from '../socket-listeners/VideoListener'\r\nimport MessageListener from '../socket-listeners/MessageListener'\r\nimport PostManager from '../posts/PostManager'\r\nimport PostListener from '../socket-listeners/PostListener'\r\n\r\nfunction App(props) {\r\n\r\n  //! storing session via socket generated id\r\n  const { user } = props\r\n\r\n  useEffect(() => {\r\n    socket.emit('userId', { userId: user._id })\r\n  }, [user._id])  // only changes when there is change in account info, or will remain consistent\r\n  //!-------------sockets\r\n  return (\r\n    <BrowserRouter>\r\n      <div>\r\n        <Nav />\r\n        <VideoListener />\r\n        <MessageListener />\r\n        <PostListener />\r\n        <Container>\r\n          <Switch>\r\n            <Route exact path='/' component={Home} />\r\n            <Route path='/users/login' component={Login} />\r\n            <Route path='/users/register' component={Register} />\r\n            <Route path='/users/search' component={Search} />\r\n            <Route path='/users/friends' component={Friends} />\r\n            <Route path='/users/intercom' component={InterCom} />\r\n            <Route path='/users/chat' component={ChatShell} />\r\n            <Route path='/users/videocall/:id' component={VideoCall} />\r\n            <Route path='/users/videocall/' component={VideoCall} />\r\n            <Route path='/users/posts/' component={PostManager} />\r\n          </Switch>\r\n        </Container>\r\n      </div>\r\n    </BrowserRouter>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.login\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(App)","const initialStateLogin = {\r\n  _id: '',\r\n  username: '',\r\n  email: '',\r\n  profileImg:'',\r\n  notifications: [],\r\n  friends: [],\r\n  posts: []\r\n}\r\n\r\nconst loginReducer = (state = initialStateLogin, action) => {\r\n  switch (action.type) {\r\n\r\n    case 'SET_USER_DATA': {\r\n      return Object.assign({}, state, {\r\n        _id: action.payload._id,\r\n        username: action.payload.username,\r\n        email: action.payload.email,\r\n        profileImg: action.payload.profilePicUrl,\r\n        notifications: action.payload.notifications,\r\n        friends: action.payload.friends,\r\n        posts: action.payload.posts\r\n      })\r\n    }\r\n\r\n    case 'SET_SEND_MSG': {\r\n      const data = state.friends.map(friend => {\r\n          if(friend.info._id === action.payload._id){\r\n            friend.inbox.push(action.payload.inbox)\r\n            return friend\r\n          }\r\n          else {\r\n            return friend\r\n          }\r\n      })\r\n      //console.log('DATA-LOGIN-REDUCER',data)\r\n      return Object.assign({},state,{ friends: data })\r\n    }\r\n\r\n    case 'UPLOAD_FILE': {\r\n      const data = state.friends.map((friend) => {\r\n        if (friend.info._id === action.payload._id) {\r\n          friend.inbox.push(action.payload.inbox)\r\n          return friend\r\n        } else {\r\n          return friend\r\n        }\r\n      })\r\n      return Object.assign({}, state, { friends: data })\r\n    }\r\n\r\n    case 'UPDATE_FRIEND_LIST': {\r\n      return Object.assign({}, state, { friends: action.payload })\r\n    }\r\n\r\n    case 'FRIEND_CANCEL_REQUEST': {\r\n      const deleteRequest = state.friends.filter(friend => friend.info._id !== action.payload._id)\r\n      return Object.assign({},state,{ friends: deleteRequest })\r\n    }\r\n\r\n    case 'FRIEND_ACCEPT_REQUEST': {\r\n      const data = state.friends.map(friend => {\r\n        if(friend.info._id === action.payload._id){\r\n          friend.status = action.payload.status\r\n          friend.isFriend = action.payload.isFriend\r\n          return friend\r\n        }\r\n        else {\r\n          return friend\r\n        }\r\n      })\r\n      return Object.assign({},state,{ friends: data })\r\n    }\r\n\r\n    case 'FRIEND_REJECT_REQUEST': {\r\n      const rejectRequest = state.friends.filter(friend => friend.info._id !== action.payload._id)\r\n      return Object.assign({},state,{ friends: rejectRequest })\r\n    }\r\n\r\n    case 'FRIEND_REMOVE': {\r\n      const removeFriend = state.friends.filter(friend => friend.info._id !== action.payload._id)\r\n      return Object.assign({},state,{ friends: removeFriend })\r\n    }\r\n\r\n    case 'ADD_NEW_POST': {\r\n      const newPostArray = [action.payload].concat(state.posts)\r\n      return Object.assign({}, state, { posts: newPostArray })\r\n    }\r\n\r\n    case 'DELETE_POST': {\r\n      const newPostArray = action.payload\r\n      return Object.assign({}, state, { posts: newPostArray })\r\n    }\r\n\r\n    case 'CLEAR_USER_DATA': {\r\n      return Object.assign({}, state, {\r\n        _id: '',\r\n        username: '',\r\n        email: '',\r\n        profileImg:'',\r\n        notification: [],\r\n        friends:[],\r\n        posts: [],\r\n      })\r\n    }\r\n    default: {\r\n      return { ...state }\r\n    }\r\n  }\r\n}\r\n\r\nexport default loginReducer\r\n","const initialState = null\r\n\r\nconst selectedChatReducer = (state = initialState, action) => {\r\n    switch(action.type){\r\n        case 'SELECTED_ID': {\r\n            return state = action.payload\r\n        }\r\n        default: {\r\n            return state\r\n        }\r\n    }\r\n}\r\n\r\nexport default selectedChatReducer","const initialSearchResult = []\r\n\r\nconst searchReducer = ( state = initialSearchResult, action ) => {\r\n    switch(action.type){\r\n        case 'SET_SEARCH_RESULT': {\r\n            return state=action.payload\r\n        }\r\n        case 'SET_SENT_REQUEST': {\r\n            return state.map(user => {\r\n                if(user._id===action.payload._id){\r\n                    return Object.assign({},user, action.payload)\r\n                }\r\n                else{\r\n                    return Object.assign({},user)\r\n                }\r\n            })\r\n        }\r\n        case 'SET_CANCEL_REQUEST': {\r\n            return state.map(user => {\r\n                if(user._id===action.payload._id){\r\n                    return Object.assign({},user, action.payload)\r\n                }\r\n                else{\r\n                    return Object.assign({},user)\r\n                }\r\n            })\r\n        }\r\n        case 'SET_ACCEPT_REQUEST': {\r\n            return state.map(user => {\r\n                if(user._id===action.payload._id){\r\n                    return Object.assign({},user, action.payload)\r\n                }\r\n                else{\r\n                    return Object.assign({},user)\r\n                }\r\n            })\r\n        }\r\n        case 'SET_REJECT_REQUEST': {\r\n            return state.filter(user => user._id !== action.payload._id)\r\n        }\r\n        case 'SET_REMOVE_FRIEND': {\r\n            return state.map(user => {\r\n                if(user._id===action.payload._id){\r\n                    return Object.assign({},user, action.payload)\r\n                }\r\n                else{\r\n                    return Object.assign({},user)\r\n                }\r\n            })\r\n        }\r\n        case 'CLEAR_SEARCH_RESULT': {\r\n            return state = []\r\n        }\r\n        default: {\r\n            return [...state]\r\n        }\r\n    }\r\n}\r\n\r\nexport default searchReducer","const initialChatState = {\r\n    'friends.info' : null,\r\n    'friends.inbox': null\r\n}\r\n\r\nconst chatReducer = (state = initialChatState, action) => {\r\n    switch(action.type){\r\n        case 'SET_CHAT_INBOX': {\r\n            return {\r\n                'state.friends.info': action.payload.data.friends.info,\r\n                'state.friends.inbox': action.payload.data.friends.inbox\r\n            }\r\n        }\r\n        default: {\r\n            return {...state}\r\n        }\r\n    }\r\n}\r\n\r\nexport default chatReducer","const initialCallState = {\r\n    signal: null,\r\n    inCall: false,\r\n    callInitiator: false,\r\n    callReceiving: false\r\n}\r\n\r\nconst callReducer = ( state = initialCallState, action ) => {\r\n    switch(action.type){\r\n        case 'SAVE_SIGNAL': {\r\n            return Object.assign({}, state, {signal: action.payload})\r\n        }\r\n        case 'INCALL_STATUS': {\r\n            return Object.assign({},state, {inCall: action.payload})\r\n        }\r\n        case 'INCALL_RECEIVING': {\r\n            return Object.assign({} , state, {inCall: action.payload, callReceiving: action.payload})\r\n        }\r\n        case 'INCALL_INITIATE': {\r\n            return Object.assign({}, state, {inCall:action.payload, callInitiator: action.payload})\r\n        }\r\n        case 'CLEAR_CALL_STATE': {\r\n            return Object.assign({}, state, {\r\n                signal: null,\r\n                inCall: false,\r\n                callInitiator: false,\r\n                callReceiving: false,\r\n            })\r\n        }\r\n        default: {\r\n            return state\r\n        }\r\n    }\r\n}\r\n\r\nexport default callReducer","const initialPostsState = []\r\n\r\nconst postReducer = (state = initialPostsState, action) => {\r\n    switch(action.type){\r\n        case 'SET_PUBLIC_POSTS': {\r\n            return state=action.payload\r\n        }\r\n        case 'ADD_NEW_PUBLIC_POST': {\r\n            return [action.payload].concat(state)\r\n        }\r\n        default: {\r\n            return [...state]\r\n        }\r\n    }\r\n}\r\n\r\nexport default postReducer","import { createStore, applyMiddleware, combineReducers } from 'redux'\r\nimport thunk from 'redux-thunk'\r\n\r\nimport loginReducer from '../reducers/loginReducer'\r\nimport selectedChatReducer from '../reducers/selectedChatReducer'\r\nimport searchReducer from '../reducers/searchReducer'\r\nimport chatReducer from '../reducers/chatReducer'\r\nimport callReducer from '../reducers/callReducer'\r\nimport publicPostReducer from '../reducers/publicPostReducer'\r\n\r\n\r\nconst configureStore = () => {\r\n    const store = createStore(combineReducers({\r\n        login: loginReducer,\r\n        selectedChat: selectedChatReducer,\r\n        searchResult: searchReducer,\r\n        chat: chatReducer,\r\n        call: callReducer,\r\n        publicPosts: publicPostReducer\r\n    }),applyMiddleware(thunk))\r\n    return store\r\n}\r\n\r\nexport default configureStore","import ReactDOM from 'react-dom'\r\nimport React from 'react'\r\nimport { Provider } from 'react-redux'\r\nimport App from './components/general/App'\r\nimport configureStore from './redux/store/configureStore'\r\nimport { startAccount } from './redux/actions/loginsAction'\r\n\r\nimport './styles/index.css'\r\nimport { startGetPublicPosts } from './redux/actions/postsAction'\r\n\r\nconst store = configureStore()\r\n\r\nstore.dispatch(startGetPublicPosts())\r\n\r\nif (localStorage.getItem('token')) {\r\n  store.dispatch(startAccount())\r\n}\r\n\r\nstore.subscribe(() => {\r\n  console.log(store.getState())\r\n})\r\n\r\nconst jsx = (\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>\r\n)\r\n\r\nReactDOM.render(jsx, document.getElementById('root'))\r\n"],"sourceRoot":""}